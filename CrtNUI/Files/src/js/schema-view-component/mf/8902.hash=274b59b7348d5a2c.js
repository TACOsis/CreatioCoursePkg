(self.webpackChunkapp_studio_enterprise_schema_view=self.webpackChunkapp_studio_enterprise_schema_view||[]).push([[8902],{86521:(p,d,o)=>{o.r(d),o.d(d,{BaseFilterPreprocessor:()=>u,HandlerBasedPreprocessor:()=>g});var f=o(21018);class u{constructor(){this.isNewStructure=e=>!!e._filterOptions}_getOrCreateModelFilters(e){const t=e.modelConfig;return t.filterAttributes||(t.filterAttributes=[]),t.filterAttributes}_setFilterToModelFilters(e,t,i){const r=this.getAttributeModelFilters(e,t);r.some(n=>n.name===i)||r.push({name:i,loadOnChange:!0})}getFilterAttributeName(e,t){return(0,f.getFilterAttributeName)(e,t)}getAttributeModelFilters(e,t){const i=e[t];return i?.modelConfig?this._getOrCreateModelFilters(i):[]}createAttributeIfNeed(e,t,i){t in e||(e[t]=i)}setFilterAttribute(e,t,i){const r=this.getFilterAttributeName(t,i),s=e.viewModelConfig.attributes;this.createAttributeIfNeed(s,r,{value:{}}),this._setFilterToModelFilters(s,i,r)}}var l=o(73308);class g{getViewConfigsByType(e,t){return(f.MetadataSchemaUtils.getViewConfigInfoByPropertyForValues("type",[e],t.viewConfig)||[]).map(i=>i?.viewConfig).filter(Boolean)}processElementsOnMetadataInit(e,t,i){var r=this;return(0,l.A)(function*(){const s=r.getViewConfigsByType(e,i);yield Promise.all(s.map(n=>t?.handle({metadata:i,viewConfig:n})))})()}processElementsOnModelInit(e,t,i,r){var s=this;return(0,l.A)(function*(){const n=s.getViewConfigsByType(e,i);yield Promise.all(n.map(a=>t?.handle({metadata:i,viewConfig:a,models:r})))})()}processElementsOnViewModelInit(e,t,i,r,s){var n=this;return(0,l.A)(function*(){const a=n.getViewConfigsByType(e,i);yield Promise.all(a.map(m=>t?.handle({metadata:i,viewConfig:m,models:r,viewModel:s})))})()}}}}]);
