(self.webpackChunkapp_studio_enterprise_schema_view=self.webpackChunkapp_studio_enterprise_schema_view||[]).push([[59910],{84330:(J,$,a)=>{a.d($,{H:()=>f});var s=a(73308),c=a(59131),M=a.n(c),I=a(38495),F=a.n(I),L=a(96590),A=a.n(L),x=a(21018),d=a.n(x),l=a(62278),v=a.n(l),j=a(73723),o=a(32740),u=a(68678),_=a(53035),b=a(60824),y=a(94660),S=a(97082),R=a(19808),B=a(30662),D=a(31996),T=a(3928),U=a(66882);class f{constructor(e,t,i,r,n,m,C){this._crtControlStateAdapter=e,this._validatorTypeResolver=t,this._viewModelGenerator=i,this._attributeCreator=r,this._viewModelRepository=n,this._attributesTopologicalSorting=m,this._injector=C,this._featureValues=this._injector.get(x.FEATURE_VALUES,null,{optional:!0}),this._measurePerformanceService=this._injector.get(x.MeasurePerformanceService)}_generateAttributes(e,t,i){const r=this._attributesTopologicalSorting.sort(t,e._attributeConfigs);return Promise.all(r.map(([n,m])=>e._systemAttributes.includes(n)?(console.warn(`Overriding of system attributes is denied. Attribute name:"${n}"`),Promise.resolve()):(i.disableDefaultConfig||(m??={}),e._attributeConfigs[n]=m,m?"viewModelConfig"in m||"viewModelName"in m?m.isCollection?this._generateNestedModelCollectionAttribute(e,n,m,i):this._generateNestedModelAttribute(e,n,m,i):(0,D.tC)(m)?this._generateCalculatedAttribute(e,n,m,i):this._generateModelAttribute(e,n,m,i):this._removeViewModelAttribute(e,n))))}_generateNestedModelCollectionAttribute(e,t,i,r){var n=this;return this._measurePerformanceService.measureCallback(`BaseViewModelAttributeGenerator.nestedCollectionAttribute.${t}`,(0,s.A)(function*(){const m=e.getBoundDataSourceNameByAttributePath(t),C=e.getModelByName(m),O="viewModelConfig"in i?i.viewModelConfig:yield(0,l.lastValueFrom)(n._viewModelRepository.resolveModelConfig(i.viewModelName)),W=new j.A(n._viewModelGenerator,O,C,e,t);n._registerOrSetFormControl(e.formApiModel,t,W.formApiModel);const g=e.attributes[t];e.attributes[t]=W,n._defineNestedModelAttribute(e,t,i,r),n._subscribeOnCollectionChanged(e,t,W,r),g!==void 0&&r.onChangeAttributeValue(t,W,g)}))}_defineNestedModelAttribute(e,t,i,r){const n=C=>{const O=e.attributes[t];e.attributes[t]=C,O instanceof j.A&&C instanceof j.A&&this._subscribeOnCollectionChanged(e,t,C,r),r.onChangeAttributeValue(t,C,O)},m=()=>e.attributes[t];T.iR.defineAsyncAttribute(e,t,i,m,n)}_generateNestedModelAttribute(e,t,i,r){return this._measurePerformanceService.measureCallback(`BaseViewModelAttributeGenerator.nestedModelAttribute.${t}`,()=>{const n="viewModelConfig"in i?i.viewModelConfig:i.viewModelName,m=e?.[o.wi];return(0,l.lastValueFrom)(this._viewModelGenerator.generate({viewModelConfig:n,parentViewModel:e},m?c.Injector.create({providers:[{provide:u.Fj,useValue:null}],parent:m}):null).pipe((0,l.map)(C=>{this._registerOrSetFormControl(e.formApiModel,t,C.formApiModel);const O=e.attributes[t];e.attributes[t]=C,this._defineNestedModelAttribute(e,t,i,r),O!==void 0&&r.onChangeAttributeValue(t,C,O)})))})}_subscribeOnCollectionChanged(e,t,i,r){if(e._collectionSubscription.has(t)){const m=e._collectionSubscription.get(t);m.unsubscribe(),e._subscriptions.remove(m)}const n=new l.Subscription;n.add(i.changed.subscribe(()=>{r.onChangeAttributeValue(t,i,null)})),n.add(i.itemAttributeChanged.subscribe(()=>{r.onChangeAttributeValue(t,i,null)})),e._collectionSubscription.set(t,n),e._subscriptions.add(n)}_generateCalculatedAttribute(e,t,i,r){this._measurePerformanceService.measure(`BaseViewModelAttributeGenerator.generateCalculatedAttribute.${t}`,()=>{this._attributeCreator.create(b.i)?.defineAttribute({viewModel:e,attribute:t,attributeConfig:i,generateOptions:r})})}_addDataValueTypePropertyConfig(e,t){t.dataValueTypeName&&e.push({name:_.sq,defaultValue:I.DataValueType[t.dataValueTypeName]})}_disableSystemAttributes(e,t,i){if(this._featureValues?.DisableBlockingSystemColumns===!0)return;if(e.getBoundDataSchemaAttributeByAttributePath(t)?.isSystem){let n=i.find(m=>m.name==="readonly");n||(n={name:"readonly"},i.push(n)),n.locked=!0,n.defaultValue=!0}}_getCrtControlPropertiesConfig(e,t,i){const r=Object.entries(i.properties??[]).map(([n,m])=>({name:n,defaultValue:m.defaultValue,locked:m.locked===!0}));return this._addDataValueTypePropertyConfig(r,i),this._disableSystemAttributes(e,t,r),r}_generateModelAttribute(e,t,i,r){this._measurePerformanceService.measure(`BaseViewModelAttributeGenerator.generateModelAttribute.${t}`,()=>{const n=e.attributes[t],m=i?.value,C=this._getCrtControlPropertiesConfig(e,t,i),O=_.CI.create({name:t,value:m,crtControlStateAdapter:this._crtControlStateAdapter,validatorTypeResolver:this._validatorTypeResolver,validatorInfo:e._validators[t],propertiesConfig:C,injectionContext:e._injectionContext??(0,T.Rz)(e)?._injectionContext});e._subscriptions.add(O.onChanged.subscribe(p=>{e.attributes[t]=p.value,r.onChangeAttributeValue(p.name,p.value,p.oldValue)})),e._subscriptions.add(O.onPropertyChanged.subscribe(({name:p,value:V,oldValue:N})=>{r.onChangeAttributeValue(`${t}:${p}`,V,N)})),e._crtControls.set(t,O),this._registerOrSetFormControl(e.formApiModel,t,O.formControl),e.attributes[t]=m??null;const W=e._getDataSourceAttributeDataValueType(t);this._attributeCreator.create(W).defineAttribute({viewModel:e,attribute:t,attributeConfig:i,control:O}),n!==void 0&&r.onChangeAttributeValue(t,m,n)})}_registerOrSetFormControl(e,t,i){this._measurePerformanceService.measure(`BaseViewModelAttributeGenerator.registerOrSetFormControl.${t}`,()=>{if(this._featureValues?.DisableAttributeOnlyRegisteringControl){e.setControl(t,i);return}e.contains(t)?e.setControl(t,i):e.registerControl(t,i)})}_removeViewModelAttribute(e,t){return delete e._attributeConfigs[t],delete e.attributes[t],delete e[t],Promise.resolve()}generate(e,t,i){var r=this;return this._measurePerformanceService.measureCallback("BaseViewModelAttributeGenerator.generateAttributes",(0,s.A)(function*(){yield r._generateAttributes(e,t,i),!r._featureValues?.DisableAttributeOnlyRegisteringControl&&e.formApiModel.updateValueAndValidity()}))}static{this.\u0275fac=function(t){return new(t||f)(c.\u0275\u0275inject(S.f),c.\u0275\u0275inject(_.LL),c.\u0275\u0275inject(y.d),c.\u0275\u0275inject(B.x),c.\u0275\u0275inject(U.k),c.\u0275\u0275inject(R.v),c.\u0275\u0275inject(c.Injector))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac,providedIn:"root"})}}},73723:(J,$,a)=>{a.d($,{A:()=>R});var s=a(73308),c=a(59131),M=a.n(c),I=a(56711),F=a.n(I),L=a(38495),A=a.n(L),x=a(96590),d=a.n(x),l=a(21018),v=a.n(l),j=a(62278),o=a.n(j),u=a(36486),_=a.n(u),b=a(32740),y=a(68678),S=a(65576);class R extends Array{constructor(...D){return super(),this._itemsChanged=new j.Subject,this._itemAttributeChanged=new j.Subject,this._destroyed$=new j.Subject,this._changed=new j.Subject,this._trackChanges=!0,this._createdItems=[],this._deletedItems=[],this._isDestroyed=!1,typeof D[0]=="number"?new Array(D[0]):([this._viewModelGenerator,this._viewModelConfig={},this._model,this._host,this._hostAttributeName]=D,this._measurePerformanceService=this._host?.[b.wi]?.get(l.MeasurePerformanceService,null,{optional:!0}),this._featureValues=this._host?.[b.wi]?.get(l.FEATURE_VALUES,{},{optional:!0})??{},this._ngZone=this._host?.[b.wi]?.get(c.NgZone,null,{optional:!0}),Object.setPrototypeOf(this,Object.create(R.prototype)),this._subscribeItemsModelModesChanges(),this._subscribeItemsAttributesChanges(),new Proxy(this,{set:(T,U,f,P)=>{const e=T[U];return T[U]=f,this._trackChanges&&(U==="length"&&f!==e?this._onItemsChanged():isNaN(parseInt(U))||this._onItemsChanged()),!0}}))}get changed(){return this._changed.asObservable().pipe((0,x.runInZone)(this._ngZone),(0,u.takeUntil)(this._destroyed$))}get itemAttributeChanged(){return this._itemAttributeChanged.asObservable().pipe((0,u.takeUntil)(this._destroyed$))}get isChanged(){return this.getChangedItems().length>0}get formApiModel(){return this._formApiModel||this._updateFormApiModelValues({emitEvent:!1}),this._formApiModel}_isItemPrimaryAttributeEqual(D,T){return(0,s.A)(function*(){if(!D)return!1;const U=yield D[D.primaryAttributeName];return T.includes(U)})()}_insertItem(D,T){typeof T!="number"&&(T=this.length),T=Math.max(T,0),T=Math.min(T,this.length),this.splice(T,0,D)}_generateItem(D){const T=()=>{const U=this._model?.createCollectionItemModel(l.ModelMode.Create),f=this._host?.[b.wi],P=this._viewModelGenerator.generate({viewModelConfig:this._viewModelConfig,modelConfig:U?{primaryDataSourceName:U.name}:void 0,models:U?[U]:void 0,parentViewModel:this._host,businessRulesActive:D.businessRulesActive??!1},f?c.Injector.create({providers:[{provide:y.Fj,useValue:null}],parent:f}):null).pipe((0,u.tap)(e=>{U?.name&&(e.dataSchemas[U.name]=this._host.dataSchemas[U.name])}),(0,u.switchMap)(e=>U?.name?e.create(U.name,D.initialModelValues).pipe((0,u.map)(()=>e)):(0,j.of)(e)),(0,u.tap)(e=>{Object.entries(D.initialAttributeValues??{}).forEach(([t,i])=>e[t]=i),e._markAsPristine(D.initialAttributeValues??{}),this._model?.childrenChange()}));return(0,j.lastValueFrom)(P)};return this._measurePerformanceService?this._measurePerformanceService.measureCallback("ViewModelCollection.generateItem",()=>T()):T()}_mergeItems(D,T){const U=()=>{const f=(D[0]||T[0])?.primaryAttributeName;for(const P of T){const e=D.findIndex(t=>{const i=t.attributes?.[f],r=P.attributes?.[f];return i&&i===r});e===-1?D.push(P):D.splice(e,1,P)}return D};return this._measurePerformanceService?this._measurePerformanceService.measure("ViewModelCollection.mergeItems",()=>U()):U()}_triggerChangesAfter(D){this._trackChanges=!1;const T=D.call(this);return this._trackChanges=!0,this._isDestroyed||this._onItemsChanged(),T}_onItemsChanged(){const D=this.map(T=>({item:T,itemModelMode:T?.getPrimaryModelMode?.()}));this._updateCollectionState(D,!0)}_subscribeItemsModelModesChanges(){this._itemsChanged.pipe((0,u.switchMap)(()=>this._getItemsModelModesChanges()),(0,u.tap)(D=>this._updateCollectionState([D],!1)),(0,u.takeUntil)(this._destroyed$)).subscribe()}_subscribeItemsAttributesChanges(){this._itemsChanged.pipe((0,u.switchMap)(()=>this._getItemsAttributesChanges()),(0,u.filter)(D=>!D.payload.silent),(0,u.tap)(()=>this._itemAttributeChanged.next()),(0,u.takeUntil)(this._destroyed$)).subscribe()}_getItemsAttributesChanges(){const D=this.map(T=>T?.events$?.pipe((0,u.filter)(U=>U.type===S.n.ChangeAttributeValue))).filter(Boolean);return D.length?(0,j.merge)(...D):j.EMPTY}_getItemsModelModesChanges(){const D=[...this,...this._deletedItems].map(T=>T?._getPrimaryModelModeChanges?.()?.pipe((0,u.map)(U=>({item:T,itemModelMode:U})))).filter(Boolean);return D.length?(0,j.merge)(...D):j.EMPTY}_updateCollectionState(D,T){this._trackChanges=!1;const U=D.map(f=>this._onItemModelModeChanged(f)).some(f=>!!f);this._trackChanges=!0,!(!T&&!U)&&(this._updateFormApiModelValues(),this._updateFormApiModelPristineState(),this._changed.next(),this._itemsChanged.next())}_onItemModelModeChanged(D){const{item:T,itemModelMode:U}=D;if(!T||U==null)return!1;switch(U){case l.ModelMode.Create:return this._onCreateItem(T);case l.ModelMode.Update:return this._onUpdateItem(T);case l.ModelMode.Delete:return this._onDeleteItem(T);default:return!1}}_onCreateItem(D){const T=this._deletedItems.indexOf(D);return T!==-1?(this._deletedItems.splice(T,1),!0):(this._createdItems.indexOf(D)===-1&&this._createdItems.push(D),!1)}_onUpdateItem(D){const T=this._createdItems.indexOf(D);if(T!==-1)return this._createdItems.splice(T,1),!1;const U=this._deletedItems.indexOf(D);if(U!==-1){const f=this._deletedItems.splice(U,1);super.push(...f)}return!0}_onDeleteItem(D){const T=this._createdItems.indexOf(D),U=this._deletedItems.indexOf(D);return T!==-1?this._createdItems.splice(T,1):U===-1&&this._deletedItems.push(D),super.splice(this.indexOf(D),1),!0}_updateFormApiModelValues(D){if(this._featureValues.DisableBaseViewModelCollectionOptimization){this._formApiModel??=new I.FormArray([]),this._formApiModel.clear({emitEvent:!1}),this.filter(U=>U?.formApiModel).forEach(U=>{this._formApiModel.push(U.formApiModel,{emitEvent:!1})}),D?.emitEvent!==!1&&this._formApiModel.updateValueAndValidity();return}if(!this._formApiModel||!this._formApiModel.length){const U=new I.FormArray(this.filter(f=>f?.formApiModel)?.map(f=>f.formApiModel));this._formApiModel||(this._formApiModel=U),this._formApiModel.length||this._host?.formApiModel?.setControl(this._hostAttributeName,U)}else this._formApiModel.clear({emitEvent:!1}),this.filter(U=>U?.formApiModel).forEach(U=>{this._formApiModel.push(U.formApiModel,{emitEvent:!1})}),D?.emitEvent!==!1&&this._formApiModel.updateValueAndValidity()}_updateFormApiModelPristineState(){const D=this.formApiModel.pristine,T=this.some(U=>U?.formApiModel?.dirty);if(T&&D){this.formApiModel.markAsDirty();return}!T&&!D&&this.formApiModel.markAsPristine()}_reload(D){const T=()=>{for(const P of[...this._deletedItems,...this])this.removeChildModel(P,{triggerNotification:!1});this._model?.childrenChange();const U=[],f=P=>U.push(P.destroy());return this._createdItems.forEach(f),this._createdItems.splice(0,this._createdItems.length),this._deletedItems.forEach(f),this._deletedItems.splice(0,this._deletedItems.length),this.forEach(f),this.splice(0,this.length,...D),(0,j.forkJoin)(U).pipe((0,u.defaultIfEmpty)(void 0),(0,u.map)(()=>{}))};return this._measurePerformanceService?this._measurePerformanceService.measure("ViewModelCollection.reload",()=>T()):T()}removeChildModel(D,T){const U=T?.triggerNotification??!0,f=this._model?.name,P=D.getModelByName(f);this._model?.removeChild(P),U&&this._model?.childrenChange()}copyWithin(D,T,U){return this._triggerChangesAfter(()=>super.copyWithin(D,T,U))}fill(D,T,U){return this._triggerChangesAfter(()=>super.fill(D,T,U))}push(...D){return this._triggerChangesAfter(()=>super.push(...D))}reverse(){return this._triggerChangesAfter(()=>super.reverse())}shift(){return this._triggerChangesAfter(()=>super.shift())}sort(D){return this._triggerChangesAfter(()=>super.sort(D))}splice(D,T,...U){return this._triggerChangesAfter(()=>super.splice(D,T,...U))}unshift(...D){return this._triggerChangesAfter(()=>super.unshift(...D))}getChangedItems(){const D=[...this._deletedItems];return this.filter(U=>{if(U.attributes.IsChanged)return!0;const f=U.getPrimaryModelMode();return f&&f!==l.ModelMode.Update}).concat(D)}createItem(D){var T=this;const U=function(){var f=(0,s.A)(function*(){const P=yield T._generateItem(D||{});return T._insertItem(P,D?.index),P});return function(){return f.apply(this,arguments)}}();return this._measurePerformanceService?this._measurePerformanceService.measureCallback("ViewModelCollection.createItem",()=>U()):U()}getPrimaryAttributeValues(){return Promise.all(this.map(D=>D?.[D?.primaryAttributeName]))}findByPrimaryAttribute(D){var T=this;return(0,s.A)(function*(){for(const U of T)if(yield T._isItemPrimaryAttributeEqual(U,[D]))return U})()}filterByPrimaryAttributes(D){var T=this;return(0,s.A)(function*(){const U=[];for(const f of T)(yield T._isItemPrimaryAttributeEqual(f,D))&&U.push(f);return U})()}merge(D){const T=()=>{this._triggerChangesAfter(()=>{const U=this._mergeItems([...this],D);super.splice(0,this.length,...U),this._createdItems.splice(0,this._createdItems.length),D instanceof R&&this._mergeItems(this._deletedItems,D._deletedItems)})};return this._measurePerformanceService?this._measurePerformanceService.measure("ViewModelCollection.merge",()=>T()):T()}reload(D){return(0,j.lastValueFrom)(this._reload(D))}remove(D){const[T,U]=typeof D=="number"?[D,this[D]]:[this.indexOf(D),D];if(T>=0&&T<this.length)return this.splice(T,1),(0,j.lastValueFrom)(U.destroy())}clear(){return this.reload([])}moveTo(D,T){if(T>=this.length)throw new L.ArgumentOutOfRangeException("Target index cannot be greater than collection length");const U=this.indexOf(D);U===T||T<0||this._triggerChangesAfter(()=>{super.splice(T,0,super.splice(U,1)[0])})}destroy(){this._isDestroyed=!0,this._host=null;const D=this._reload([]);return this._formApiModel.clear({emitEvent:!1}),this._itemAttributeChanged.complete(),this._itemsChanged.complete(),this._destroyed$.next(),this._destroyed$.complete(),(0,j.lastValueFrom)(D)}}},38128:(J,$,a)=>{a.d($,{o:()=>f});var s=a(73308),c=a(59131),M=a(56711),I=a(38495),F=a(79772),L=a(20442),A=a(21018),x=a(28399),d=a(62278),l=a(36486),v=a(84330),j=a(73723);class o{_defineResourceAttribute(e,t,i,r,n){return new d.Observable(m=>{const C=e._getDataSourceAttributeCaption(r,n);if(this._defineResourceProperty(t,i,C),r.includes(".")){const O=r.split(".")[1];this._defineResourceProperty(t,O,C)}m.next(),m.complete()})}_defineResourceProperty(e,t,i){e[t]||Object.defineProperty(e,t,{get:()=>Promise.resolve(i??""),configurable:!0})}_getResourceNameByPath(e){const t=e.split(".");return t.length>1?t.join("_"):e}generate(e,t){return Object.entries(t||{}).map(([i,r])=>{const n=e[A.SchemaResourcesSuffix][A.TypeResources.string],m=this._getResourceNameByPath(i);return this._defineResourceAttribute(e,n,m,i,r)})}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"})}}var u=a(32740),_=a(11848),b=a(68678),y=a(65576),S=a(28114),R=a(81116),B=a(53035),D=a(18046),T=a(31996);const U=500;class f{static{this._skippedProperties=["schedule","then"]}constructor(e,t,i,r,n,m,C,O){this.viewModelGenerator=e,this.injector=t,this.viewModelConfig=i,this.resources=r,this._eventScopes=m,this._modelsInitConfig=C,this._defaultPrimaryAttributeName="Id",this._models$=new d.BehaviorSubject([]),this._businessRulesActive=!0,this._dropdownPageSizeSettingsCode="DropdownPageSize",this._dataSourcesInfos=new Map,this._attributesToDataSourceNameMap=new Map,this._dropdownPageSize=null,this._replayEvents$=new d.ReplaySubject,this._loadedDataSources=new Set,this._conflictedModels=[],this.__destroyed=!1,this._disableViewModelWaitingForAsyncTasks=!1,this._disableViewModelLoadUnblockingThread=!1,this._blockFieldsAffectedByBusinessRules=!1,this._asyncTasksExecutingSubject=new d.BehaviorSubject(new Set),this._modelsRequestedToLoad=new Set,this._attributesAffectedByBusinessRules=[],this._businessRulesAreActivated=!1,this._destroySubject=new d.Subject,this._modelSourceRecordId={},this._modelLoaded$=new d.Subject,this._viewModelAttributeChangeEventOptions=new A.ViewModelAttributeChangeEventOptions({preventAttributeChangeRequest:!1,preventStateChange:!0,preventRunBusinessRules:!0}),this._attributeConfigs={},this._eventsSubject$=new d.Subject,this._collectionSubscription=new Map,this._crtControls=new Map,this._subscriptions=new d.Subscription,this._destroy$=this._destroySubject.asObservable(),this._businessRulesActivated$=new d.BehaviorSubject(!1),this.attributes={},this.dataSchemas={},this.events$=(0,d.merge)(this._eventsSubject$,this._replayEvents$),this._systemAttributes=[],this.getAttributeViewModelConfig=g=>this._attributeConfigs[g]?.viewModelConfig?.attributes,this.initDependencies(),this._subscribeModelsChanges(),this.handlerChain=I.HandlerChainService.instance,n?this.formApiModel=n:this.formApiModel=this.formBuilder.group({}),this.parent=O;const W=this._appInfo?.isDebugEnabled?this._createProxy(this):this;return this._viewModelDataDelayerService&&!this.parent&&this._viewModelDataDelayerService.setViewModel(W),W}_createProxy(e){return new Proxy(e,{get(t,i){return!(typeof i=="string")||i in t||f._skippedProperties.includes(i)||console.debug(`Attribute ${i} not found.`),t[i]}})}get IsChanged(){return Promise.resolve(this.attributes[u.j7])}set IsChanged(e){}get HasUnsavedData(){return Promise.resolve(this.attributes[u.ie])}set HasUnsavedData(e){}set BusinessRulesActivated(e){}get BusinessRulesActivated(){return Promise.resolve(this._businessRulesAreActivated)}get _isChanged(){return console.warn("Warning: The `_isChanged` property of the view-model is deprecated. It will be removed in future versions. Use `IsChanged` or `HasUnsavedData` attribute instead."),Object.keys(this._attributeConfigs).filter(e=>!(0,x.isEmpty)(this._attributeConfigs[e].modelConfig)).some(e=>this.formApiModel.controls[e]?.dirty)}get _scopes(){return[...this._eventScopes??[]]}get _injectionContext(){return this._context}get[u.wi](){return this.injector}get primaryAttributeName(){if(!this._primaryModelName)return this._defaultPrimaryAttributeName in this._attributeConfigs?this._defaultPrimaryAttributeName:null;const t=this.dataSchemas[this._primaryModelName].primaryAttributeName,i=this._dataSourcesInfos.get(this._primaryModelName);return this._getMappedAttributeName(i,t)}get PrimaryModelMode(){return this.getPrimaryModelMode()}get State(){return(0,T.Rz)(this).attributes[u.$s]}get _destroyed(){return this.__destroyed}get models(){return this._models$.value}_executeWithOptions(e,t){let i;try{return i=this._viewModelAttributeChangeEventOptions.getOptions(),this._viewModelAttributeChangeEventOptions.setOptions(t),e()}finally{this._viewModelAttributeChangeEventOptions.setOptions(i)}}_setSystemAttributeValue(e,t){const i=this.attributes[e];this.attributes[e]=t,this._executeWithOptions(()=>{this._fireChangeAttributeEvent({type:y.n.ChangeAttributeValue,payload:{attributeName:e,oldValue:i,value:t}})},{preventStateChange:!0,preventRunBusinessRules:!0})}_fireChangeAttributeEvent(e){e.payload.silent??=this._viewModelAttributeChangeEventOptions.getAsSilent(),Object.assign(e.payload,this._viewModelAttributeChangeEventOptions.getOptions()),this._eventsSubject$.next(e)}_getViewModelValidators(e){const t=this.viewModelConfig.attributes[e]??{};return("validators"in t&&t.validators)??{}}_initDataSourceValidators(){return this._measurePerformanceService?.measure(`ViewModel.initDataSourceValidators.${this._injectionContext?.id}.parent.${!!this.parent}`,()=>(this._validators={},this._dataSourcesInfos.forEach(e=>{e.attributesMap.forEach((t,i)=>{const r=this.viewModelConfig.attributes[i]??{};if("modelConfig"in r&&r.modelConfig?.ignoreValidators)return;this._validators[i]=this._validators[i]||[];const n=this._getDataSourceAttributeSchema(e,t);if(n?.validators){for(const[m,C]of Object.entries(n.validators))if(C?.type){const O=this._injectionContext??(0,T.Rz)(this)?._injectionContext,W=this.validatorTypeResolver.getValidator(C.type,{validationParameters:C?.params,injectionContext:O}),g=this._getViewModelValidators(i),p=Object.values(g).find(V=>V.type===C.type);this._validators[i].push({name:m,instance:W,disabled:!!p?.disabled,params:C?.params})}}})}),(0,d.of)(null)))}_initSchemaValidators(e){this._measurePerformanceService.measure(`ViewModel.initSchemaValidators.${this._injectionContext?.id}.parent.${!!this.parent}`,()=>{Object.entries(e||{}).forEach(([t])=>{const i=this._getViewModelValidators(t);this._validators[t]=this._validators[t]||[];for(const[r,n]of Object.entries(i))if(n?.type){const m=this._injectionContext??(0,T.Rz)(this)?._injectionContext,C=this.validatorTypeResolver.getValidator(n.type,{validationParameters:n.params,injectionContext:m});this._validators[t].push({name:r,instance:C,disabled:n.disabled,params:n?.params})}})})}_waitAsyncValidation(){return(0,d.from)(this.waitAsyncTasksFinish()).pipe((0,l.switchMap)(()=>this.formApiModel.statusChanges.pipe((0,l.startWith)(this.formApiModel.status),(0,l.filter)(e=>e.toLowerCase()!=="pending"),(0,l.first)(),(0,l.map)(()=>null))))}_getDataSourceAttributeCaption(e,t){let i=this.resourceFinderService.findLocalizableValue(t);const r=this._getDataSourceInfoByViewModelAttributePath(e);if(i==null&&r){const n=r.getDataSourceAttributePath(e),m=n?this._getDataSourceAttributeSchema(r,n):"";i=m?m.caption:this._translateService.instant("BaseViewModel.DataSourceAttributeRemoved")}return i}_getResourcesStrings(){const e=this.resources?.strings??{};return{...e,...this._getResourceStringsByAttributes(e)}}_getChangedResourcesStrings(e){const t=Object.entries(e).reduce((r,[n,m])=>{const C=this.resources?.strings[n]||{},O=m&&{...C,...m};return{...r,[n]:O}},{}),i={...this.resources?.strings,...t};return JSON.parse(JSON.stringify(i))}_generateResourceAttribute(){this[A.SchemaResourcesSuffix]={},this[A.SchemaResourcesSuffix][A.TypeResources.string]={};const e=this._getResourcesStrings();return this._attributeResourceGenerator.generate(this,e)}_getBoundAttributeNames(){const e=new Set;return this._dataSourcesInfos.forEach(t=>{for(const i of t.mappedViewModelAttributes)e.add(i)}),Array.from(e.values())}_getDataSourceInfoByViewModelAttributePath(e){const t=this.getBoundDataSourceNameByAttributePath(e);return this._dataSourcesInfos.has(t)?this._dataSourcesInfos.get(t):null}_getResourceStringsByAttributes(e){const t=Object.keys(e);return this._getBoundAttributeNames().filter(r=>!t.includes(r)).reduce((r,n)=>(r[n]={},r),{})}_getDataSourceAttributeSchema(e,t){return this.dataSchemas[e.name]?.attributes?.find(i=>i.name===t)}_generatePrimaryAttributes(){return this._measurePerformanceService.measure(`ViewModel.generatePrimaryAttributes.${this._injectionContext?.id}.parent.${!!this.parent}`,()=>{const e=Array.from(this._dataSourcesInfos.values()).map(t=>{const i=t.name,r=this.dataSchemas[i],m=(t.includePrimaryAttributes?[r?.primaryAttributeName,r?.primaryDisplayAttributeName]:[]).filter(C=>C&&!t.getIsDataSourceAttributePathExists(C)).map(C=>{const O=(0,I.generateGuid)(),W=`${i}_${C}_${O}`,g=r.findAttributeByName(C),p={modelConfig:{path:`${i}.${C}`},dataValueTypeName:I.DataValueType[g.dataValueType]};return this._attributeConfigs[W]=p,t.addNewAttribute(W,p),this._attributeGenerate({[W]:p})});return m.length===0?(0,d.of)(null):(0,d.forkJoin)(m)});return e.length===0?(0,d.of)(null):(0,d.forkJoin)(e).pipe(this._measurePerformanceService.measure$(`ViewModel.generatePrimaryAttributes.forkJoin.${this._injectionContext?.id}.parent.${!!this.parent}`))})}_getDataSourceDto(e){const t={},i=this._dataSourcesInfos.get(e);return i.attributesMap.forEach((r,n)=>{if(!i.getIsMapOnCollection(n)){const m=this.attributes[n],C=this._getDataSourceAttributeSchema(i,r);!m&&C?.dataValueType===I.DataValueType.Lookup?t[r]=null:t[r]=m}}),(0,d.of)(t)}_checkFilteringAttributes(e,t){if(t.some(r=>(0,x.isNil)(r.name)))throw new Error(`Filtering attributes for ${e} are not valid!`)}_attributeGenerate(e,t){return this._attributeGenerator.generate(this,e,{...t,onChangeAttributeValue:(i,r,n)=>{this._fireChangeAttributeEvent({type:y.n.ChangeAttributeValue,payload:{attributeName:i,value:r,oldValue:n,silent:this._viewModelAttributeChangeEventOptions.getAsSilent()}})}})}_getDataSourceNamesAffectedByFilteringAttribute(e){return[...this._dataSourcesInfos.entries()].filter(([,t])=>t.isCollection).filter(([t])=>{const i=this.getModelByName(t);return this._modelsRequestedToLoad?.has(i?.name)||i?.isLoaded||i?.isLoading}).filter(([t,i])=>{const r=i.getFilteringConfig(),n=r.some(m=>m?.name===e&&m?.loadOnChange);return n&&this._checkFilteringAttributes(t,r),n}).map(([t])=>t)}_createRequestsForReloadingDataSources(e){return e.map(t=>({type:"crt.LoadDataRequest",$context:this,dataSourceName:t,config:{loadType:I.DataSourceLoadType.Reload}}))}_dispatchStartLoadModelAttributes(e){const t=`${_.I4.AttributeLoading}_${this._context?.id}_${Object.keys(e)}`;this._measurePerformancePageLoadService?.addTask(t,{targetTask:!0}),this._replayEvents$.next({type:y.n.StartLoadModelAttributes,payload:e})}_dispatchFinishLoadModelAttributes(e){const t=`${_.I4.AttributeLoading}_${this._context?.id}_${Object.keys(e)}`;this._measurePerformancePageLoadService?.removeTask(t,{targetTask:!0}),this._replayEvents$.next({type:y.n.FinishLoadModelAttributes,payload:e})}_processEmptyLoadDataForCollection(e,t){var i=this;return(0,s.A)(function*(){if(!e.isCollection||!e.collectionViewModelAttributeName)return;const r=t.find(O=>O.type===I.ModelParameterType.PrimaryColumnValue);if(!r)return;const n=r.value?.value,m=i.attributes[e.collectionViewModelAttributeName];if(!n||!m)return;const C=yield m.findByPrimaryAttribute(n);C&&m.remove(C)})()}_loadDynamicModel(e){const t=e.attributeName,i=e.dataSourceConfig,r=e.dataSourceName||T.iR.createDynamicDataSourceNameFromAttributeName(this,t),n=T.iR.createAttributeConfig(this,r,e),m=this._createAndSetDataSourceInfo(r,t,n);return this._defineOrUpdateAttribute(t,n),this._setupSortingAttribute(e.sortingConfig),this._setupFiltersAttributes(e.filtersConfig),this._modelGenerator.generateOne(i,r).pipe((0,l.tap)(C=>this._markModelAsCollection(C,m)),(0,l.tap)(C=>this._upsertModel(r,C)),(0,l.tap)(C=>this._addModelDependencies(C,e.dependencies)),(0,l.switchMap)(C=>(0,d.forkJoin)([(0,d.of)(C),this._addDataSchemaToDataSchemas(C)])),(0,l.switchMap)(([C])=>(0,d.forkJoin)([(0,d.of)(C),(0,d.of)(this._replaceAttributesToDataSourceNameMap(m))])),(0,l.switchMap)(([C])=>(0,d.forkJoin)([(0,d.of)(C),this._reGenerateResourcesAttributes()])),(0,l.switchMap)(([C])=>this._loadModelData({model:C,dataSourceInfo:m,parametersConfig:[],loadType:I.DataSourceLoadType.Reload,useLastLoadParameters:e.useLastLoadParameters}).pipe(this._measurePerformanceService.measure$(`ViewModel.loadDynamicModel.${this._injectionContext?.id}.parent.${!!this.parent}.datasourceName.${e.dataSourceName}`))))}_defineOrUpdateAttribute(e,t){this.attributes[e]?this._attributeConfigs[e]=t:this._attributeGenerate({[e]:t})}_createAndSetDataSourceInfo(e,t,i){const n=B.OU.getFromViewModelConfig({attributes:{[t]:i}}).get(e);return this._dataSourcesInfos.set(e,n),n}_setupSortingAttribute(e){if(!e?.default)return;const t=e.attributeName;this.attributes[t]=e.default}_setupFiltersAttributes(e){e?.forEach(t=>{if(!t.value)return;const i=t.name,r=t.value;this[i]=r.value||r})}_addModelDependencies(e,t){this._modelDependencies[e.name]=t||[]}_addDataSchemaToDataSchemas(e){return e.getSchema().pipe((0,l.tap)(t=>this.dataSchemas[e.name]=t))}_reGenerateResourcesAttributes(){return(0,d.forkJoin)([...this._generateResourceAttribute(),(0,d.of)(null)])}_replaceAttributesToDataSourceNameMap(e){const t=this._getDataSourceAttributesMap(e),i=[...Array.from(this._attributesToDataSourceNameMap.entries()),...t];this._initializeAttributesToDataSourceNameMap(i)}_getMappedAttributeName(e,t){if(!e)return"";const i=e.getMappedAttributeNames(t);return!i||i.length===0?"":i[0]}_getMappedAttributeNames(e,t){return e?e.getMappedAttributeNames(t):[]}_getModelAttributesToLoad(e,t){const i=this._dataSourcesInfos.get(e.name);if(t?.attributes){const r=t.attributes.filter(n=>{const m=this._getMappedAttributeName(i,n);return!this.getIsDirty(m)});return this._getModelDependentAttributes(e,r)}return i.attributes.map(r=>r.path)}_loadStaticModel(e,t,i,r,n,m){const C=this.getModelByName(e),O=this._dataSourcesInfos.get(C.name);return this._loadModelData({model:C,dataSourceInfo:O,parametersConfig:t,loadType:i,payload:r,useLastLoadParameters:n,doNotUpdateLastLoadParameters:m})}_waitDataDelay(e){return this._viewModelDataDelayerService?.shouldBeDelayed()?(0,d.of)(e).pipe((0,l.delayWhen)(()=>this._viewModelDataDelayerService.loadTrigger$)):(0,d.of)(e)}_updateTrackedAttributes(e){const t=this._modelDependencies[e.name];if(!t||!e.isAggregate)return;const i=/^.{0,2}\[\w+:\w+(:\w+)?]/;t.forEach(r=>{const n=r.relationPath.split(".")[0],m=this.getModelByName(n),C=e.affectedAttributes.filter(W=>W.schemaName===m.dataSchemaName).map(W=>W.path.split(".")[0]).filter(W=>!i.test(W)),O=new Set([...r.trackByAttributes??[],...C]);r.trackByAttributes=[...O.values()]})}_getDependOnModelsNames(e){const t=this._modelDependencies[e];if(!t)return[];const i=t.map(r=>r.relationPath.split(".")[0]);return[...new Set(i)]}_waitForModelLoad(e){var t=this;return(0,s.A)(function*(){const i=t.getModelByName(e);!i||i?.isLoaded||i.mode===A.ModelMode.Create||i.mode===A.ModelMode.Copy||(yield(0,d.firstValueFrom)(t._modelLoaded$.pipe((0,l.filter)(r=>r===e),(0,l.take)(1))))})()}_waitForModelsLoad(e){var t=this;return(0,s.A)(function*(){if(e.length===0||t._isDesignTime)return;const i=e.map(r=>t._waitForModelLoad(r));yield Promise.all(i)})()}_getAffectedAttributes(e,t,i){const n=this.dataSchemas[e].primaryAttributeName,m=[...t];return n&&!t.includes(n)&&i?.length>0&&i?.[0][n]&&m.push(n),m}_getModelLoadParameters(e,t,i,r,n,m){return this._modelParametersBuilder.getModelLoadParameters(this,e,t,i,{payload:r,useLastLoadParameters:n,doNotUpdateLastLoadParameters:m}).catch(C=>(console.error(C),this._showNotification({message:C.message}),[[{type:I.ModelParameterType.Never}],{},{}]))}_isRootModelAndDependsOnPrimaryDSByOneToManyRelation(e){if(!this._featureValues.AllowMultipleDataSources)return!1;const t=this._modelDependencies[e],i=(0,T.CB)(this.getModelByName(e));if(t?.length!==1||!this._primaryModelName||!i)return!1;const r=this.dataSchemas[this._primaryModelName],n=t[0],m=n.relationPath.split("."),C=m.shift(),O=m.shift(),W=C!==this._primaryModelName,g=O!==r.primaryAttributeName;return W||g?!1:(0,T.p9)(this.dataSchemas[e],n.attributePath,r,O)===T.Eq.OneToMany}_getOneToManyRelationDefaultValues(e){const t=this._modelDependencies[e]?.[0],i=this.dataSchemas[this._primaryModelName],r=Object.keys(this._attributeConfigs).find(n=>this._attributeConfigs[n]?.modelConfig?.path===`${this._primaryModelName}.${i.primaryAttributeName}`);return{[t.attributePath]:this.attributes[r]}}_getDependOnModelLoadConfiguration(e){const t=this._getDependOnModelsNames(e),i={};return t.forEach(r=>{this._modelSourceRecordId[r]&&(i[r]={[this.dataSchemas[r].primaryAttributeName??"Id"]:this._modelSourceRecordId[r]})}),i}_checkAndProcessPageDataSourceData(e,t){if(!this._featureValues.AllowMultipleDataSources||!(this._isRootModelAndDependsOnPrimaryDSByOneToManyRelation(e.name)&&t.length===0))return(0,d.of)(t);e.resetMode();const n=this._getOneToManyRelationDefaultValues(e.name);if(this.PrimaryModelMode===A.ModelMode.Copy){const m=this.dataSchemas[e.name].primaryAttributeName??"Id",C=this._getDependOnModelLoadConfiguration(e.name);return(0,d.from)(this.getDataSourceLoadParameters(e.name,C)).pipe((0,l.switchMap)(({parameters:O,options:W})=>e.load({attributes:[m],parameters:O,options:{loadType:I.DataSourceLoadType.Reload,pagingConfig:W.pagingConfig,sortingConfig:W.sortingConfig}})),(0,l.switchMap)(O=>{e.resetMode();const W=O?.length?O[0][m]:null;return W?this.copy(e.name,W,n):this.create(e.name,n)}),(0,l.map)(()=>t))}return this.create(e.name,n).pipe((0,l.map)(()=>t))}_loadModelData({model:e,dataSourceInfo:t,parametersConfig:i,loadType:r,payload:n,useLastLoadParameters:m,doNotUpdateLastLoadParameters:C}){const O=e.name;this._modelsRequestedToLoad.add(O);const W=this._getModelAttributesToLoad(e,n),g=n?.attributes;if(g&&W.length===0)return(0,d.of)([]);if(this._conflictedModels.includes(O))return(0,d.of)([]);const p=this._getDataSourceMappingAttributes(t,W),V=this._getLoadTypeForDataSource(t,r);if(V===I.DataSourceLoadType.LoadNext&&this._loadedDataSources.has(O))return(0,d.of)([]);this._dispatchStartLoadModelAttributes(p);const N=!this._isSyncForModelAllowed(e)||g===null||e.mode===A.ModelMode.Init,h=this._getDependOnModelsNames(O);return this._checkAndLoadUnloadedDependOnModels(h),(0,d.from)(this._waitForModelsLoad(h)).pipe((0,l.switchMap)(E=>this._getModelLoadParameters(t,i,V,n,m,C)),(0,l.mergeMap)(E=>this._waitDataDelay(E)),(0,l.switchMap)(([E,w,K])=>e.load({attributes:W,parameters:E,options:{loadType:r,pagingConfig:w,sortingConfig:K}}).pipe(this._measurePerformanceService.measure$(`ViewModel.loadStaticModel.model.load.${this._injectionContext?.id}.parent.${!!this.parent}.modelName.${O}`),(0,l.catchError)(z=>this._handleLoadErrorResponse(z,[])),(0,l.tap)(()=>this._updateTrackedAttributes(e)),(0,l.tap)(z=>{z.length<w?.rowCount?this._loadedDataSources.add(O):this._loadedDataSources.delete(O)}),(0,l.tap)(z=>{z.length===0&&this._dispatchFinishLoadModelAttributes(p)}),(0,l.mergeMap)(z=>z.length===0?(0,d.from)(this._processEmptyLoadDataForCollection(t,E)).pipe((0,l.map)(()=>z)):(0,d.of)(z)),(0,l.switchMap)(z=>this._checkAndProcessPageDataSourceData(e,z)))),(0,l.map)(E=>({data:E,viewModelAttributes:t.getModelDto(E)})),(0,l.switchMap)(({data:E,viewModelAttributes:w})=>this.setValue(w,{collectionLoadType:V===I.DataSourceLoadType.Reload?A.CollectionLoadType.Reload:A.CollectionLoadType.Merge,silent:!0}).pipe((0,l.tap)(()=>{!t.isCollection||!w||Object.keys(w).forEach(K=>{this.attributes[K]?.forEach(q=>{q.formApiModel.updateValueAndValidity()})})}),(0,l.tap)(()=>this._markAsPristine(w)),(0,l.map)(()=>E))),(0,l.tap)(()=>this._modelLoaded$.next(O)),(0,l.switchMap)(E=>this._runBusinessRulesForModel(e,E)),(0,l.tap)(E=>{if(N)return;const w=this._getAffectedAttributes(O,W,E);this._reloadDependentModels(e,w)}),(0,l.tap)(()=>{e.setLoadedState(),this._dispatchFinishLoadModelAttributes(p)}))}_checkAndLoadUnloadedDependOnModels(e){const t=e.filter(i=>{const r=!this._modelsRequestedToLoad.has(i),n=!(0,T.CB)(this.getModelByName(i));return r&&n});this._requestReloadModels(t)}_createChangeAttributeTriggers(e){return e.map(t=>({type:A.BusinessRuleTriggerType.ChangeAttributeValue,name:t,scopeId:""}))}_runBusinessRulesForModel(e,t,i=!1,r=[]){const n=this._dataSourcesInfos.get(e.name);if(n.isCollection||!this._businessRulesProcessingEnabled||!this._businessRulesActive)return(0,d.of)(t);const m=t[0]??{},C=i?[...n.mappedViewModelAttributes]:Object.keys(m).flatMap(p=>this._getMappedAttributeNames(n,p)).filter(p=>p!=null),O=this._createChangeAttributeTriggers(C),W={type:A.BusinessRuleTriggerType.DataLoaded,name:e.name,scopeId:""},g=this.models.filter(p=>p!==e).filter(p=>p.mode!==A.ModelMode.Init).filter(p=>p.getDataSource().scope===I.DataSourceScope.Page).map(p=>this._getModelBusinessRuleContext(p.name,[]));return(0,d.forkJoin)([this._getModelBusinessRuleContext(n.name,[W,...r]),...g,(0,d.of)(this._getViewModelBusinessRuleContext([...O,...r,W]))]).pipe(this._measurePerformanceService.measure$(`ViewModel.runBusinessRulesForModel.${this._injectionContext?.id}.parent.${!!this.parent}`),(0,l.switchMap)(p=>this._runBusinessRulesForContexts(p)),(0,l.map)(()=>t))}_runInitialBusinessRules(){if(!this._businessRulesProcessingEnabled||!this._businessRulesActive)return(0,d.of)(null);const e={type:A.BusinessRuleTriggerType.ContextReady,name:null,scopeId:""};return this._prepareBusinessRulesContexts([e]).pipe(this._measurePerformanceService.measure$(`ViewModel.runInitialBusinessRules.${this._injectionContext?.id}.parent.${!!this.parent}`),(0,l.mergeMap)(t=>t.length===0?(0,d.of)(null):this._runBusinessRulesForContexts(t)))}_createViewModelAttributesValues(e,t){const i=Object.entries(this.dataSchemas),[,r]=i.find(([m])=>m===e),n={};for(const m of r.attributes){const C=t[m.name],O=this.getViewModelAttributePath(e,m.name);O&&(n[O]=C??null)}return n}_createModelData(e,t){const i=this._dataSourcesInfos.get(e),r=this._getDataSourceMappingAttributes(i);this._dispatchStartLoadModelAttributes(r);const n=this.getModelByName(e),m=n.disableSync,C=this._getModelAttributesToLoad(n,null);return n.disableSync=!0,n.create(t).pipe((0,l.switchMap)(O=>{const W=this._createViewModelAttributesValues(e,O),g=this._isRootModelAndDependsOnPrimaryDSByOneToManyRelation(e)?{silent:!0}:null;return this.setValue(W,g).pipe((0,l.tap)(()=>this._forEachControl(W,p=>{p.markAsPristine(),p.markAsUntouched()})))}),(0,l.tap)(()=>{n.disableSync=m,this._modelLoaded$.next(e)}),(0,l.switchMap)(()=>this._runBusinessRulesForModel(n,[],!0)),(0,l.tap)(()=>{this._isSyncForModelAllowed(n)&&this._reloadDependentModels(n,C)}),(0,l.tap)(()=>{this._dispatchFinishLoadModelAttributes(r),n.setLoadedState()}),(0,l.map)(()=>null))}_copyModelData(e,t,i){const r=this._dataSourcesInfos.get(e),n=this._getDataSourceMappingAttributes(r);this._dispatchStartLoadModelAttributes(n);let m;const C=this.getModelByName(e),O=this._getModelAttributesToLoad(C,null),W=C.disableSync;return C.disableSync=!0,this._modelSourceRecordId[e]=t,C.copy(t,i).pipe((0,l.catchError)(g=>this._handleLoadErrorResponse(g,{})),(0,l.map)(g=>({data:[g],viewModelAttributes:r.getModelDto([g])})),(0,l.switchMap)(({data:g,viewModelAttributes:p})=>this.setValue(p).pipe((0,l.tap)(()=>this._markAsPristine(p)),(0,l.map)(()=>g))),(0,l.tap)(()=>{C.disableSync=W,this._modelLoaded$.next(e)}),(0,l.switchMap)(g=>this._runBusinessRulesForModel(C,g,!0)),(0,l.tap)(()=>{this._isSyncForModelAllowed(C)&&this._reloadDependentModels(C,O)}),(0,l.tap)(()=>{this._dispatchFinishLoadModelAttributes(n),C.setLoadedState()}),(0,l.mergeMap)(()=>(0,d.of)(m)))}_getDataSourceMappingAttributes(e,t=null){const i=t??e.attributes.map(n=>n.path),r=Object.fromEntries(i.map(n=>[this._getMappedAttributeName(e,n),!0]));return e.collectionViewModelAttributeName&&(r[e.collectionViewModelAttributeName]=!0),r}_handleLoadErrorResponse(e,t){return console.error(e),this._showNotification({message:e.message,duration:1e4}),(0,d.of)(t)}_canExecuteBusinessRulesByModelAttributeValue(e,t,i){return t&&e?this._isModelAttributeValueValid(e,t,i):!0}_canExecuteBusinessRulesByViewModelAttributeValue(e,t){const i=this._getDataSourceInfoByViewModelAttributePath(e);if(i){const r=i.getDataSourceAttributePath(e);return this._canExecuteBusinessRulesByModelAttributeValue(i,r,t)}return!0}_getContextAttributeValue(e){return e instanceof Date?(0,I.toLocalISOString)(e):e}_getNormalizedContextAttributeValue(e,t,i){const r=e;return I.DataValueType[t]===I.DataValueType.Lookup||r?.displayValue?r?.value??e:i===!0||!t?e:[I.DataValueType.RICH_TEXT,I.DataValueType.Image].includes(I.DataValueType[t])?null:I.DataValueType[t]===I.DataValueType.MAXSIZE_TEXT&&e?e.slice(0,500):e}_getHasValueContextAttributeValue(e,t){return!!(t&&I.DataValueType[t]===I.DataValueType.Boolean||e!=null&&e!=="")}_getViewModelAttributeInfos(e,t,i){return Object.keys(t).filter(r=>!(t[r]instanceof j.A)).map(r=>{if(t[r]instanceof f)return this._getViewModelAttributeInfos(e?`${e}.${r}`:r,t[r]?.attributes??{},i);const n=this._attributeConfigs[r]?.dataValueTypeName,m=this._getContextAttributeValue(t[r]),C=this._getNormalizedContextAttributeValue(m,n,i);return{name:e?`${e}.${r}`:r,value:C??null,displayValue:t[r]?.displayValue,dataValueTypeName:n,hasValue:this._getHasValueContextAttributeValue(m,n)}}).flat()}_runBusinessRulesForContexts(e){const t=`${_.I4.RunningBusinessRules}-${(0,I.generateGuid)()}`;return this._onAsyncTaskStarted(t),(0,d.of)(e).pipe(this._measurePerformanceService.measure$(`ViewModel.runBusinessRules.${this._injectionContext?.id}.parent.${!!this.parent}`),(0,l.map)(i=>i?.filter(r=>!(0,x.isNil)(r))??[]),(0,l.mergeMap)(i=>{if(i.length===0)return(0,d.of)(null);const r=i.map(n=>({scopeName:n.scopeName,scopeId:n.scopeId,scopeType:n.scopeType,triggers:n.triggers}));return this._toggleControlsAffectedByBusinessRules(!1,r),this._businessRulesEngine.execute(i).pipe(this._measurePerformanceService.measure$(`ViewModel.runBusinessRules.execute.${this._injectionContext?.id}.parent.${!!this.parent}`),(0,l.tap)(n=>{n.forEach(m=>{const C=r.find(O=>O.scopeId===m.scopeId&&O.scopeName===m.scopeName&&O.scopeType===m.scopeType);m.triggers=C?.triggers??[]})}),(0,l.switchMap)(n=>n?this._businessRulesApplier.applyRules(this,n):(0,d.of)(null)),(0,l.tap)(()=>{this._toggleControlsAffectedByBusinessRules(!0,r)}))}),(0,l.tap)(()=>this._onAsyncTaskFinished(t)))}_createViewModelContext(e,t){return{scopeType:L.ScopeType.ViewModel,scopeName:this._scopeName,scopeId:this._scopeName,scopeState:L.ScopeStateType.Unknown,parentScopeId:null,attributes:t,triggers:e}}_getViewModelBusinessRuleContext(e){const t=this._featureValues["BRules-EnableCompareLargeAttributeValues"],i=this._getViewModelAttributeInfos(null,this.attributes,t);return this._createViewModelContext(e,[...i].map(r=>({attributeName:r.name,value:r.value,displayValue:r.displayValue,dataValueTypeName:r.dataValueTypeName,hasValue:r.hasValue})))}_prepareModelBusinessRuleTrigger(e,t){return t.map(i=>{if(i.type===A.BusinessRuleTriggerType.DataLoaded||i.type===A.BusinessRuleTriggerType.ContextReady)return i;const r=this._getDataSourceInfoByViewModelAttributePath(i.name);return!r||r.name!==e?null:{type:A.BusinessRuleTriggerType.ChangeAttributeValue,name:r.getDataSourceAttributePath(i.name),scopeId:""}}).filter(i=>i!=null)}_getModelContextScopeStateType(e){switch(e.mode){case A.ModelMode.Init:return L.ScopeStateType.Init;case A.ModelMode.Create:return L.ScopeStateType.Create;case A.ModelMode.Copy:return L.ScopeStateType.Copy;case A.ModelMode.Update:return L.ScopeStateType.Update;default:return L.ScopeStateType.Unknown}}_getModelBusinessRuleContext(e,t){const i=this._dataSourcesInfos.get(e),r=this.getModelByName(e),n=this.dataSchemas[e],m=this._prepareModelBusinessRuleTrigger(e,t),C=this._getModelContextScopeStateType(r);return this._getDataSourceDto(e).pipe((0,l.map)(O=>({...r._getPersistedState(),...O})),(0,l.map)(O=>({enableCompareLargeAttributeValues:this._featureValues["BRules-EnableCompareLargeAttributeValues"],modelDto:O})),(0,l.map)(({enableCompareLargeAttributeValues:O,modelDto:W})=>Object.entries(W).map(([g,p])=>{let V;const N=this._getMappedAttributeName(i,g);if(N)V=this._attributeConfigs[N]?.dataValueTypeName;else{const w=n.findAttributeByName(g);V=I.DataValueType[w.dataValueType]}const h=this._getContextAttributeValue(p),E=this._getNormalizedContextAttributeValue(h,V,O);return{attributeName:g,value:E,displayValue:p?.displayValue,dataValueTypeName:V,hasValue:this._getHasValueContextAttributeValue(h,V),isSignificant:g===n.primaryAttributeName}})),(0,l.map)(O=>({scopeType:L.ScopeType.Model,scopeName:r.dataSchemaName,scopeId:e,scopeState:C,parentScopeId:this._scopeName,attributes:O,triggers:m,modelType:r.getDataSource()?.type})))}_prepareDataSourceNamesForBusinessRules(){return this._modelsMap.size===0?[]:[...this._modelsMap.values()].filter(e=>!this._dataSourcesInfos.get(e.name).isCollection).map(e=>e.name)}_getModelsBusinessRuleContexts(e){return this._prepareDataSourceNamesForBusinessRules().map(i=>i?this._getModelBusinessRuleContext(i,e):(0,d.of)(null))}_prepareBusinessRulesContexts(e){const t=this._getModelsBusinessRuleContexts(e);if(!this._scopeName)return t.length===0?(0,d.of)([]):(0,d.forkJoin)([...t]);const r=[(0,d.of)(this._getViewModelBusinessRuleContext(e)),...t];return r.length===0?(0,d.of)([]):(0,d.forkJoin)(r)}_isAttributeChange(e){return!e.attributeName?.includes(":")}_businessRulesSubscribeOnChangeAttributes(){if(!this._businessRulesProcessingEnabled)return;const e=this.events$.pipe((0,l.filter)(i=>i.type===y.n.ChangeAttributeValue),(0,l.filter)(i=>this._isAttributeChange(i.payload)),(0,l.filter)(i=>!i.payload.silent),(0,l.filter)(i=>!i.payload?.preventRunBusinessRules),(0,l.filter)(i=>{const r=i.payload;return this._canExecuteBusinessRulesByViewModelAttributeValue(r.attributeName,r.value)}),(0,l.filter)(()=>this._businessRulesActive),(0,l.map)(i=>i.payload.attributeName)),t=e.pipe((0,l.tap)(()=>this._onAsyncTaskStarted(_.I4.DebouncingBusinessRules)),(0,l.buffer)(e.pipe((0,l.debounceTime)(U))),(0,l.map)(i=>Array.from(new Set(i))),(0,l.map)(i=>this._createChangeAttributeTriggers(i)),(0,l.mergeMap)(i=>this._prepareBusinessRulesContexts(i)),(0,l.tap)(()=>this._onAsyncTaskFinished(_.I4.DebouncingBusinessRules)),(0,l.filter)(i=>i.length>0),(0,l.mergeMap)(i=>this._runBusinessRulesForContexts(i)));this._subscriptions.add(t.subscribe())}_subscribeOnChangeAttributes(){const e=this.events$.pipe((0,l.filter)(t=>t.type===y.n.ChangeAttributeValue),(0,l.tap)(t=>{const i=t,r=i.payload.attributeName,n=this.getBoundDataSourceName(r),m=this.getModelByName(n),O=this._dataSourcesInfos.get(n)?.attributesMap.get(r);O&&m?.attributeChanged(O,i.payload?.preventStateChange??i.payload?.silent)}));this._subscriptions.add(e.subscribe())}_getHasRelation(e,t,i){return e.map(n=>{const m=n.relationPath.split("."),C=n.trackByAttributes??[],O=m.shift(),W=m.shift();return C.push(W),{rootModelName:O,trackedAttributes:C}}).filter(({rootModelName:n})=>n===t).filter(({trackedAttributes:n})=>this._dataSourcesInfos.get(t).isCollection?!0:i.some(m=>n.includes(m))).length!==0}_getDependentModelsNames(e,t=[]){return e?Object.entries(this._modelDependencies).filter(([i])=>i!==e).filter(([,i])=>this._getHasRelation(i,e,t)).map(([i])=>i).map(i=>[i,...this._getDependentModelsNames(i)]).flat():[]}_getIsModelDataChanged(e){if(!this.getModelByName(e)?.isLoaded)return!1;const i=this._dataSourcesInfos.get(e);if(i.isCollection){const n=i.collectionViewModelAttributeName,m=this.attributes[n];return m?m.isChanged:!1}return i.getMappedAttributes().some(n=>this.getIsDirty(n))}_requestReloadModels(e){this._createRequestsForReloadingDataSources(e).forEach(i=>{this._ngZone.runOutsideAngular(()=>this.processRequest(i))})}_isModelAttributeValueValid(e,t,i){return this._getDataSourceAttributeSchema(e,t)?.dataValueType===I.DataValueType.Lookup?(0,A.isValidLookupValue)(i):!0}_canReloadModelDependentData(e,t){return e.canReloadDependentData(t)?!0:this._conflictedModels.includes(e.name)?!1:this._getDependentModelsNames(e.name,[t]).length>0}_getModelDependentAttributes(e,t){return[...t,...t.map(i=>e.getDependentAttributesNames(i)).flat()]}_getChangedModelsNames(e){return e.filter(t=>this._getIsModelDataChanged(t))}_showNotification(e){this._ngZone.runOutsideAngular(()=>this.processRequest({type:"crt.NotificationRequest",$context:this,...e}))}_isSyncForModelAllowed(e){return e.allowSync}_subscribeOnReloadDataEvents(){const e=this.events$.pipe((0,l.filter)(()=>this._modelSynchronizationEnabled),(0,l.filter)(t=>t.type===y.n.ChangeAttributeValue),(0,l.filter)(t=>t.payload.silent!==!0),(0,l.map)(t=>({modelName:this.getBoundDataSourceNameByAttributePath(t.payload.attributeName),attributeName:t.payload.attributeName,attributeValue:t.payload.value})),(0,l.filter)(({modelName:t})=>t!=null),(0,l.map)(({modelName:t,attributeName:i,attributeValue:r})=>{const n=this._dataSourcesInfos.get(t),m=n?.attributesMap.get(i);return{model:this.getModelByName(t),dataSourceInfo:n,modelAttribute:m,attributeValue:r}})).pipe((0,l.filter)(({model:t})=>t!=null),(0,l.filter)(({dataSourceInfo:t})=>!t.isCollection),(0,l.filter)(({model:t})=>this._isSyncForModelAllowed(t)),(0,l.filter)(({dataSourceInfo:t,modelAttribute:i,attributeValue:r})=>this._isModelAttributeValueValid(t,i,r)),(0,l.filter)(({model:t,modelAttribute:i})=>this._canReloadModelDependentData(t,i))).pipe((0,l.tap)(({model:t,dataSourceInfo:i,modelAttribute:r,attributeValue:n})=>{const m=this._getModelDependentAttributes(t,[r]),C=Object.fromEntries(m.map(O=>[this._getMappedAttributeName(i,O),!0]));this._dispatchStartLoadModelAttributes(C),t.reloadDependentData(r,n).pipe((0,l.switchMap)(O=>{if(O.length===0)return(0,d.of)(O);const W=i.getModelDto(O);return this.setValue(W,{silent:!0}).pipe((0,l.switchMap)(()=>this._runBusinessRulesForModel(t,O)))}),(0,l.tap)(()=>this._reloadDependentModels(t,[r])),(0,l.tap)(()=>this._dispatchFinishLoadModelAttributes(C))).subscribe()}));this._subscriptions.add(e.subscribe())}_subscribeOnChangeRequests(){const e=this.events$.pipe((0,l.filter)(t=>t.type===y.n.ChangeAttributeValue),(0,l.mergeMap)(t=>{const i=t.payload.attributeName,r=this._attributeConfigs[i];return Array.isArray(r?.change)?r.change:[r?.change]}),(0,l.filter)(t=>t!=null),(0,l.map)(t=>({type:t.request,$context:this,scopes:this._scopeName?[this._scopeName]:[],...t.params})),(0,l.tap)(t=>this._ngZone.runOutsideAngular(()=>this.handlerChain.process(t))));this._subscriptions.add(e.subscribe())}_subscribeOnFilteringEvents(){const e=this.events$.pipe((0,l.filter)(t=>t.type===y.n.ChangeAttributeValue),(0,l.map)(t=>{const i=t.payload.attributeName;return this._getDataSourceNamesAffectedByFilteringAttribute(i)}),(0,l.map)(t=>this._createRequestsForReloadingDataSources(t)),(0,l.tap)(t=>{t.forEach(i=>{this._ngZone.runOutsideAngular(()=>this.processRequest(i))})}));this._subscriptions.add(e.subscribe())}_saveModel(e,t,i){const r="MODEL_SAVING";this.maskService.showMask(r,this);const n=this._getBoundDataSourceAttributeControls(e);return Object.keys(n).forEach(m=>this.formApiModel.controls[m].updateValueAndValidity()),this._saveModelAndGetDataSourceSaveResult(e,t).pipe((0,l.finalize)(()=>this.maskService.hideMask(r,this)),(0,l.catchError)(m=>{const C=typeof m=="string"?m:m?.message||m?.errorInfo;return i?.silent===!0?(0,d.of)({success:!1,rowsAffected:0,errorInfo:C}):(0,d.throwError)(()=>new Error(C))}))}_saveModelAndGetDataSourceSaveResult(e,t){return(0,d.from)(this.isValid(e)).pipe((0,l.switchMap)(i=>{if(!i){const m=this.injector.get(F.TranslateService);return(0,d.of)({success:!1,rowsAffected:0,errorInfo:m.instant("HomePage.DialogMessages.RequiredFieldsAreNotFilled")})}const r=this.getModelByName(e),n=r.mode;return(0,d.forkJoin)({parameters:this._modelParametersBuilder.getModelParameters(this,t),dto:this._getDataSourceDto(e)}).pipe((0,l.mergeMap)(({parameters:m,dto:C})=>(0,d.forkJoin)({result:r.insertOrUpdate(C,m),dto:(0,d.of)(C)})),(0,l.tap)(({result:m,dto:C})=>{const O=n===A.ModelMode.Create||n===A.ModelMode.Copy,W=this.dataSchemas[e],g=W.dataSourceConfig?.type===A.DataSourceType.EntityDataSource;if(m.success&&O&&g){const p=W.primaryAttributeName,V=C[p];this._loadedDataSources.add(e),this._lastEventLoadParameters.set(e,[{type:I.ModelParameterType.PrimaryColumnValue,value:V}])}}),(0,l.map)(({result:m})=>m))}))}_deleteModel(e,t,i){return(0,d.from)(this._modelParametersBuilder.getModelParameters(this,t,i?.payload)).pipe((0,l.mergeMap)(r=>this.getModelByName(e).delete(r)))}_initSubscriptions(){return this._measurePerformanceService.measure(`ViewModel.initSubscriptions.${this._injectionContext?.id}.parent.${!!this.parent}`,()=>(this._subscribeOnFilteringEvents(),this._subscribeModelsEvents(),this._subscribeOnChangeAttributes(),this._subscribeOnChangeRequests(),this._subscribeOnReloadDataEvents(),this._businessRulesSubscribeOnChangeAttributes(),(0,d.of)(null)))}_getDataSchemas(){if(this.models&&this.models.length!==0){const e=this.models.map(t=>t.getSchema().pipe((0,l.map)(i=>[t.name,i])));return(0,d.combineLatest)(e).pipe((0,l.take)(1),(0,l.map)(t=>Object.fromEntries(t)))}return(0,d.of)({})}_setAttributesDefaultValues(e){var t=this;return(0,d.from)((0,s.A)(function*(){let i=Object.entries(t.dataSchemas);e&&(i=i.filter(([r])=>r===e));for(const[r,n]of i){const m={};for(const C of n.attributes){const O=yield(0,d.lastValueFrom)(C.defaultValue,{defaultValue:null});if(!(0,x.isNil)(O)){const W=t.getViewModelAttributePath(r,C.name);W&&(m[W]=O)}}t.setValue(m).subscribe()}})())}_generateDataSourcesInfo(){return this._dataSourcesInfos=B.OU.getFromViewModelConfig(this.viewModelConfig,this.models),(0,d.of)(this._dataSourcesInfos)}_generateAttributesToDataSourceNameMap(e){const t=Array.from(e.values()).map(i=>this._getDataSourceAttributesMap(i)).flat();return this._initializeAttributesToDataSourceNameMap(t),(0,d.of)(this._attributesToDataSourceNameMap)}_initializeAttributesToDataSourceNameMap(e){this._attributesToDataSourceNameMap=new Map(e)}_getDataSourceAttributesMap(e){const i=e.getMappedAttributes().map(r=>[r,e.name]);return e.isCollection&&i.push([e.collectionViewModelAttributeName,e.name]),i}_checkDataSourceName(e){if(!e)throw new Error("Data source name is not provided")}_getDataSourceLoadType(e){return e?e||I.DataSourceLoadType.Reload:null}_getLoadTypeForDataSource(e,t){if(t===I.DataSourceLoadType.Load)return t;const i=e.getPagingConfig();return!t&&i?I.DataSourceLoadType.LoadNext:t}_loadDefaultSorting(e){this._measurePerformanceService.measure(`ViewModel.mergeCollectionModels.${this._injectionContext?.id}.parent.${!!this.parent}.dsNames.${e?.toString()}`,()=>{Array.from(this._dataSourcesInfos.entries()).filter(([t])=>!e?.length||e.includes(t)).map(([,t])=>t.getSortingConfig()).filter(t=>!!t?.default).map(t=>({[t.attributeName]:t.default})).forEach(t=>this.setValue(t,{silent:!0}).subscribe())})}_getDropdownPageSize(){var e=this;return(0,s.A)(function*(){if(!(0,x.isEmpty)(e._dropdownPageSize))return e._dropdownPageSize;const t=yield e.sysSettingsService.getByCode(e._dropdownPageSizeSettingsCode);return e._dropdownPageSize={pagingConfig:{rowCount:t?.value,rowsOffset:0}},e._dropdownPageSize})()}_mergeCollectionModels(e,t){this._measurePerformanceService.measure(`ViewModel.mergeCollectionModels.${this._injectionContext?.id}.parent.${!!this.parent}.collection.${e}`,()=>{const i=this.attributes[e];this._featureValues.DisableBaseViewModelCollectionOptimization||i.length?i.merge(t):i.push(...t)})}_getEmbeddedModels(){const e=Object.entries(this.viewModelConfig?.attributes??{}).filter(([,r])=>r&&"embeddedModel"in r&&r.embeddedModel).map(([r,n])=>({attributeName:r,embeddedModel:n.embeddedModel}));if(e.length===0)return(0,d.of)([]);const t={},i=[];if(e.forEach(({attributeName:r,embeddedModel:{name:n,config:m}})=>{n?t[n]&&i.push(`Duplicated embedded model : ${n}.`):i.push(`Embedded model name is not provided for ${r}.`),t[n]=m}),i.length>0)throw new Error(i.join(" "));return this._modelGenerator.generate({dataSources:t},this.injector)}_concatModelsWithEmbedded(e=null){return this._getEmbeddedModels().pipe((0,l.map)(t=>{const i=[...e??[],...t??[]],r=i.map(n=>n.name).filter((n,m,C)=>C.indexOf(n)!==m);if(r.length>0)throw new Error(`Duplicated model names found : ${r.join(",")}.`);return i}))}_updateModelsMap(){const e=this.models.map(t=>[t.name,t]);this._modelsMap=new Map(e)}_subscribeModelsChanges(){this._subscriptions.add(this._models$.subscribe(()=>this._updateModelsMap()))}_subscribeModelsEvents(){this.models.forEach(e=>this._subscribeModelEvents(e))}_subscribeModelEvents(e){this._subscriptions.add(e.event$.pipe((0,l.mergeMap)(t=>this._waitDataDelay(t)),(0,l.mergeMap)(t=>this._ngZone.runOutsideAngular(()=>this.processRequest({type:"crt.HandleModelEventRequest",$context:this,scopes:this._eventScopes,modelName:e.name,modelEvent:t})),1)).subscribe())}initDependencies(){this.formBuilder=this.injector.get(M.FormBuilder),this.resourceFinderService=this.injector.get(A.ResourceFinderService),this.validatorTypeResolver=this.injector.get(B.LL),this.maskService=this.injector.get(A.DEVKIT_MASK_SERVICE),this.sysSettingsService=this.injector.get(I.SysSettingsService),this.crtControlStateAdapter=this.injector.get(D.f),this._businessRulesEngine=this.injector.get(L.BusinessRulesEngine),this._businessRulesApplier=this.injector.get(L.BusinessRulesApplier),this._featureValues=this.injector.get(A.FEATURE_VALUES),this._modelGenerator=this.injector.get(S.n),this._ngZone=this.injector.get(c.NgZone),this._translateService=this.injector.get(F.TranslateService),this._scopeName=this.injector.get(b.Fj,null),this._attributeGenerator=this.injector.get(v.H),this._attributeResourceGenerator=this.injector.get(o),this._crtZoneService=this.injector.get(A.CrtZoneService),this._viewEventZoneName=this.injector.get(b.C_,A.DefaultZones.Root),this._modelParametersBuilder=this.injector.get(R.R),this._context=this.injector.get(b.iB,null),this._crtInjectionContextService=this.injector.get(A.CrtInjectionContextsService),this._viewModelDataDelayerService=this.injector.get(B.bs,null),this._isDesignTime=this.injector.get(A.IS_DESIGN_TIME,null),this._measurePerformanceService=this.injector.get(A.MeasurePerformanceService,null),this._measurePerformancePageLoadService=this.injector.get(A.MeasurePerformancePageLoadService),this._appInfo=this.injector.get(A.ApplicationInfo,null)}processRequest(e){return this.handlerChain.process(e)}_upsertModel(e,t){const i=[...this.models],r=i.findIndex(({name:n})=>n===e);r===-1?i.push(t):i.splice(r,1,t).forEach(n=>n.destroy()),this._subscribeModelEvents(t),this._models$.next(i)}_replaceDataSourceInfo(e,t){!e||!t||(this._loadedDataSources.has(e)&&this._loadedDataSources.delete(e),this._dataSourcesInfos.set(e,t),this._replaceAttributesToDataSourceNameMap(t))}_updateModels(e){e.forEach((t,i)=>{const r=this.getModelByName(i);r&&(this._markModelAsCollection(r,t),this._updateModelDependentAttributes(r,t))})}_markModelAsCollection(e,t){t.isCollection&&(e._isCollection=!0)}_updateModelDependentAttributes(e,t){const i=t.attributes.map(r=>({path:r.path,type:r.type}));e.updateDependentAttributes(i)}_initIsChangedAttribute(){this._systemAttributes.push(u.j7),this.attributes[u.j7]=!1;const e=this._models$.pipe((0,l.switchMap)(t=>t?.length?(0,d.combineLatest)(t.map(i=>i._dirty$)):(0,d.of)([])),(0,l.map)(t=>t.some(i=>i)),(0,l.filter)(()=>!this._viewModelAttributeChangeEventOptions.getOptions().preventStateChange),(0,l.distinctUntilChanged)()).subscribe(t=>{this._setSystemAttributeValue(u.j7,t)});this._subscriptions.add(e)}_initHasUnsavedDataAttribute(){this._systemAttributes.push(u.ie),this.attributes[u.ie]=!1;const e=this.events$.pipe((0,l.filter)(m=>m?.type===y.n.ChangeAttributeValue&&m.payload?.attributeName===u.j7),(0,l.map)(m=>m.payload.value)),t=(0,d.merge)(this.IsChanged,e),r=this._models$.pipe((0,l.map)(m=>m.map(C=>C._modeChanges$.pipe((0,l.map)(O=>({mode:O,name:C.name})),(0,l.startWith)({mode:C.mode,name:C.name})))),(0,l.switchMap)(m=>m?.length?(0,d.combineLatest)(m):(0,d.of)([]))).pipe((0,l.map)(m=>m.some(({mode:C,name:O})=>(C===A.ModelMode.Create||C===A.ModelMode.Copy)&&!this._isRootModelAndDependsOnPrimaryDSByOneToManyRelation(O)))),n=(0,d.combineLatest)([t,r]).pipe((0,l.map)(([m,C])=>!!(m||C)),(0,l.distinctUntilChanged)()).subscribe(m=>{this._setSystemAttributeValue(u.ie,m)});this._subscriptions.add(n)}_initPrimaryModelModeAttribute(){const e=this._getPrimaryModelModeChanges();if(!e)return;this._systemAttributes.push(u.yM),this.attributes[u.yM]=this.getPrimaryModelMode();const t=e.pipe((0,l.startWith)(this.getPrimaryModelMode())).subscribe(i=>this._setSystemAttributeValue(u.yM,i));this._subscriptions.add(t)}_initStateAttribute(){this._systemAttributes.push(u.$s),this.attributes[u.$s]=_.HQ.Active}_initBusinessRulesActivatedAttribute(){if(this._systemAttributes.push(u.kd),this.attributes[u.kd]=this._businessRulesAreActivated,this._businessRulesAreActivated)return;const e=this._businessRulesActivated$.pipe((0,l.filter)(t=>t===!0)).subscribe(t=>{this._setSystemAttributeValue(u.kd,t)});this._subscriptions.add(e)}_initSystemAttributes(){var e=this;return(0,s.A)(function*(){yield e._measurePerformanceService.measureCallback(`ViewModel.initSystemAttributes.${e._injectionContext?.id}.parent.${!!e.parent}`,()=>(e._initIsChangedAttribute(),e._initPrimaryModelModeAttribute(),e._initHasUnsavedDataAttribute(),e._featureValues.DisableDelayingModelEvents||e._initStateAttribute(),e._initBusinessRulesActivatedAttribute(),Promise.resolve()))})()}_handleCircularDependencies(){const e=(0,A.detectCircularDependencies)(this._modelDependencies);if(e.hasCycles){const t=this._translateService.instant("BaseViewModel.WarningModelsWithCircularDependencies");this._showNotification({message:t,duration:1e4}),console.warn(t,e.cycledModelsNames)}this._conflictedModels=e?.cycledModelsNames}_forEachControl(e,t){Object.keys(e).forEach(r=>{if(this.attributes[r]instanceof j.A){const n=this.attributes[r],m=e[r];n.forEach(C=>{const O=C.primaryAttributeName,W=C.attributes[O],g=m.find(p=>p[O]===W);g&&C._forEachControl(g,t)})}else if(this.attributes[r]instanceof f)this.attributes[r]._forEachControl(e[r],t);else{const n=this.getControl(r);t(n.formControl)}})}_getModelsErrors(e){return(e??[]).filter(t=>!t.isCollectionItemModel&&t.hasErrors).map(t=>t.getLastError())}_notifyAboutModelsErrors(e){const t=this._getModelsErrors(e);if(t.length>0){const i=t.map(r=>r.message).join(" ");this._showNotification({message:i})}}_initFeaturesStates(){this._disableViewModelWaitingForAsyncTasks=this._featureValues.DisableViewModelWaitingForAsyncTasks,this._disableViewModelLoadUnblockingThread=this._featureValues.DisableViewModelLoadUnblockingThread,this._blockFieldsAffectedByBusinessRules=this._featureValues.BlockFieldsWhileRunBusinessRules,this._modelSynchronizationEnabled=!this._featureValues.ModelSynchronizationDisabled}_handleAsyncTasksCycle(e){let t=null;const i=100,r=Array.from(e).filter(n=>n.startsWith(_.I4.ProcessingAttributeChangeRequest));if(!(!e.size||!r.length))return r.length&&(t=setTimeout(()=>{console.warn("[ViewModel]: Clearing executing tasks by exceeded timeout",r),r.forEach(n=>e.delete(n)),this._asyncTasksExecutingSubject.next(e)},i)),t}_getAffectedViewModelAttributes(e,t){return this.models.filter(r=>r.dataSchemaName===e).map(r=>r.name).flatMap(r=>this.getViewModelAttributePaths(r,t))}_toggleControlsAffectedByBusinessRules(e,t){if(!this._blockFieldsAffectedByBusinessRules)return;this._attributesAffectedByBusinessRules?.filter(r=>(0,L.canToggleAttribute)(this._scopeName,r,t))?.forEach(r=>{r.scopeName===this._scopeName?this.getControl(r.name).toggle(e):this._getAffectedViewModelAttributes(r.scopeName,r.name).forEach(m=>{this.getControl(m).toggle(e)})})}_initAttributesAffectedByBusinessRules(){var e=this;return(0,s.A)(function*(){const i=e._prepareDataSourceNamesForBusinessRules().filter(n=>!!n).map(n=>e.getModelByName(n)).map(n=>({scopeId:n.name,scopeName:n.dataSchemaName,scopeType:L.ScopeType.Model,modelType:n.getDataSource()?.type})),r={scopeName:e._scopeName,scopeType:L.ScopeType.ViewModel,scopeId:e._scopeName};e._attributesAffectedByBusinessRules=yield e._businessRulesEngine.getAffectedAttributes([r,...i])})()}_initBusinessRules(){var e=this;return(0,s.A)(function*(){return e._measurePerformanceService.measureCallback(`ViewModel.initBusinessRules.${e._injectionContext?.id}.parent.${!!e.parent}`,(0,s.A)(function*(){e._businessRulesProcessingEnabled=!e._featureValues.BusinessRulesProcessingDisabled,yield e._initAttributesAffectedByBusinessRules(),e._businessRulesAreActivated=e._businessRulesProcessingEnabled&&e._businessRulesActive!==!1,e._businessRulesActivated$.next(e._businessRulesAreActivated)}))})()}_attributeGenerate$(e,t){return(0,d.of)(this._featureValues.UseDesignerHotSwapViewModel).pipe((0,l.switchMap)(i=>i&&this._isDesignTime?this._initDataSourceValidators().pipe((0,l.tap)(()=>{this._initSchemaValidators(e)}),(0,l.switchMap)(()=>this._attributeGenerate(e,t))):this._attributeGenerate(e,t)))}_validateByDataSourceName(e){var t=this;return(0,s.A)(function*(){const i={},r=t._getBoundDataSourceAttributeControls(e);return yield Promise.all(Object.entries(r).map(([n,m])=>(m.markAsTouched(),m.updateValueAndValidity(),(0,d.lastValueFrom)((0,T.OL)(m).pipe((0,l.tap)(()=>{m.errors&&(i[n]=m.errors)})))))),i})()}_validateAll(){var e=this;return(0,s.A)(function*(){const t={};return e.formApiModel.markAllAsTouched(),e.formApiModel.updateValueAndValidity(),(0,T.SH)(e.formApiModel),yield(0,d.lastValueFrom)((0,T.OL)(e.formApiModel).pipe((0,l.tap)(()=>{Object.entries(e.formApiModel.controls).forEach(([r,n])=>{n.errors&&(t[r]=n.errors)})}))),t})()}runInitFlow(e=null){return this._concatModelsWithEmbedded(e).pipe(this._measurePerformanceService.measure$(`ViewModel.runInitFlow.${this._injectionContext?.id}.parent.${!!this.parent}`),(0,l.tap)(t=>this._notifyAboutModelsErrors(t)),(0,l.tap)(t=>this._models$.next(t)),(0,l.tap)(()=>this._initFeaturesStates()),(0,l.mergeMap)(()=>this._generateDataSourcesInfo()),(0,l.tap)(t=>this._updateModels(t)),(0,l.mergeMap)(t=>this._generateAttributesToDataSourceNameMap(t)),(0,l.mergeMap)(t=>this._getDataSchemas()),(0,l.tap)(t=>this.dataSchemas=t),(0,l.mergeMap)(()=>this._initDataSourceValidators()),(0,l.switchMap)(()=>this._initBusinessRules()),(0,l.tap)(()=>{this._initSchemaValidators(this.viewModelConfig.attributes)}),(0,l.mergeMap)(()=>(0,d.forkJoin)([...this._generateResourceAttribute(),this._initSystemAttributes(),this._attributeGenerate(this.viewModelConfig.attributes),(0,d.of)(this),this._initSubscriptions()])),(0,l.mergeMap)(()=>this._generatePrimaryAttributes()),(0,l.tap)(()=>this._loadDefaultSorting()),(0,l.mergeMap)(()=>this._runInitialBusinessRules()),(0,l.tap)(()=>this._viewModelAttributeChangeEventOptions.reset())).pipe((0,l.switchMap)(()=>(0,d.of)(this)))}get modelInitConfigs(){return this._modelsInitConfig}init(e,t){return this._primaryModelName=t?.primaryModelName,this._modelDependencies=t?.modelDependencies||{},this._modelsLoadingConfig=t?.modelsLoadingConfig||{},this._lastEventLoadParameters=new Map,t?.businessRulesActive||this.deactivateBusinessRules(),this._modelDependencies&&this._handleCircularDependencies(),this._ngZone.runOutsideAngular(()=>this.runInitFlow(e))}setValue(e,t){const i=[],r=[];for(const n of Object.keys(this._attributeConfigs))"viewModelConfig"in this._attributeConfigs[n]||"viewModelName"in this._attributeConfigs[n]?r.push(n):i.push(n);return this._executeWithOptions(()=>{this._measurePerformanceService.measure(`ViewModel.setValue.updateViewModelModelAttributes.${this._injectionContext?.id}.parent.${!!this.parent}.data.${Object.keys(e).toString()}`,()=>{for(const n in e)i.includes(n)&&(this[n]=e[n])})},t),(0,d.forkJoin)([...r.filter(n=>e&&e[n]).map(n=>{if(this.attributes[n]instanceof f)return this.attributes[n].setValue(e[n],{silent:t?.silent,preventAttributeChangeRequest:t?.preventAttributeChangeRequest,preventStateChange:t?.preventStateChange,preventRunBusinessRules:t?.preventRunBusinessRules});{const m=this._attributeConfigs[n].viewModelConfig||this._attributeConfigs[n].viewModelName,C=!this._featureValues.DisableDataGridEditingMode,O=(e[n]||[]).map(W=>{const g=this.getBoundDataSourceName(n),V=this._getDataSourceInfoByViewModelAttributePath(n)?.isCollection&&this.getModelByName(g)?.createCollectionItemModel(A.ModelMode.Update);return this.viewModelGenerator.generate({viewModelConfig:m,modelConfig:C&&V?{primaryDataSourceName:V.name}:void 0,models:C&&V?[V]:void 0,parentViewModel:this,businessRulesActive:!1},c.Injector.create({providers:[{provide:b.Fj,useValue:null}],parent:this.injector})).pipe(this._measurePerformanceService.measure$(`ViewModel.setValue.generateViewModel.${this._injectionContext?.id}.parent.${!!this.parent}.modelName.${V?.name}`),(0,l.tap)(N=>{g&&(N.dataSchemas[g]=this.dataSchemas[g])}),(0,l.tap)(N=>{N.deactivateBusinessRules()}),(0,l.switchMap)(N=>N.setValue(W,{silent:t?.silent,preventAttributeChangeRequest:t?.preventAttributeChangeRequest,preventStateChange:t?.preventStateChange,preventRunBusinessRules:t?.preventRunBusinessRules}).pipe((0,l.tap)(()=>V&&V.setLoadedState()),(0,l.map)(()=>N))))});return!O.length&&t?.collectionLoadType===A.CollectionLoadType.Reload&&this.attributes[n].clear(),O.length===0?(0,d.of)(null):(0,d.forkJoin)([...O]).pipe((0,l.tap)(W=>{const g=this.getBoundDataSourceName(n);this.getModelByName(g)?.childrenChange(),this._executeWithOptions(()=>{t?.collectionLoadType===A.CollectionLoadType.Reload||!t?.collectionLoadType?this.attributes[n].reload(W):this.getBoundDataSchema(n)?this._mergeCollectionModels(n,W):this.attributes[n].push(...W)},t)}))}}),(0,d.of)(this)])}deactivateBusinessRules(){this._businessRulesActive=!1}activateBusinessRules(){const e=this._businessRulesActive;if(this._businessRulesActive=!0,e)return(0,d.of)(null);const t=this.models.filter(i=>i.isLoaded);if(t.length>0){const i={type:A.BusinessRuleTriggerType.ContextReady,name:null,scopeId:""};return(0,d.forkJoin)(t.map(r=>this._runBusinessRulesForModel(r,[],!0,[i]))).pipe((0,l.tap)(()=>this._businessRulesAreActivated=this._businessRulesProcessingEnabled),(0,l.tap)(()=>this._businessRulesActivated$.next(this._businessRulesAreActivated)))}}_getModelDependencies(e){return this._modelDependencies[e]??[]}_getIsAffectedByBusinessRules(e){if(!this._businessRulesProcessingEnabled)return Promise.resolve(!1);const t=e.name,i=this._attributesAffectedByBusinessRules;if(i.length===0||!t)return Promise.resolve(!1);const r=i.some(O=>O.name===t),n=this.getBoundDataSchemaByAttributePath(t),m=this.getBoundDataSchemaAttributeByAttributePath(t);if(!m)return Promise.resolve(r);const C=i.filter(O=>O.scopeName===n.name).some(O=>O.name===m.name);return Promise.resolve(C||r)}executeRequest(e){return e.scopes=e.scopes||this._eventScopes,this._crtZoneService.runInZone(this._viewEventZoneName,()=>this.processRequest(e))}getAttributeControl(e){let t=this.formApiModel;(0,T.Jt)(this,e).then(x.noop);for(const i of e.split("."))t=t.get(i);return t??new M.FormControl}loadLookupList(e,t=[],i){const r=e.control,n=e.items,m=this._getDataSourceInfoByViewModelAttributePath(n);if(m){const C=this._ngZone.runOutsideAngular(()=>this.processRequest({type:"crt.LoadDataRequest",$context:this,dataSourceName:m.name,parameters:t,config:{payload:i}}));Promise.resolve(C)}else{const C=this._getDataSourceInfoByViewModelAttributePath(r);if(C){const O=C.getDataSourceAttributePath(r);(0,d.forkJoin)([this._getDropdownPageSize(),this._modelParametersBuilder.getModelParameters(this,t,i)]).pipe((0,l.mergeMap)(([W,g])=>this.getModelByName(C.name).loadLookupList(O,g,W)),(0,l.map)(W=>B.OU.getLookupListDataSourceInfo(n,{value:W.primaryAttributeName,displayValue:W.primaryDisplayAttributeName}).getModelDto(W.data)),(0,l.mergeMap)(W=>this.setValue(W,{silent:!0}))).subscribe()}}}load(...e){const t=this._disableViewModelLoadUnblockingThread?(0,d.of)(null):(0,d.timer)(0,d.asyncScheduler);if(typeof e[0]=="string"){const r=e[0],n=e[1],m=e[2];this._checkDataSourceName(r);const C=this._getDataSourceLoadType(m?.loadType);return t.pipe((0,l.switchMap)(()=>this._loadStaticModel(r,n,C,m?.payload,m?.useLastLoadParameters,m?.doNotUpdateLastLoadParameters).pipe(this._measurePerformanceService.measure$(`ViewModel.loadStaticModel.${this._injectionContext?.id}.parent.${!!this.parent}.datasourceName.${r}`))))}const i=e[0];return t.pipe((0,l.switchMap)(()=>this._loadDynamicModel(i).pipe(this._measurePerformanceService.measure$(`ViewModel.loadDynamicModel.${this._injectionContext?.id}.parent.${!!this.parent}.model.${i.dataSourceName}`))))}setSorting(e,t){const r=this._dataSourcesInfos.get(e).getSortingConfig(),n=r&&r.attributeName;return n&&(this[n]=t),(0,d.of)(null)}create(e,t){return this._checkDataSourceName(e),this._createModelData(e,t)}copy(e,t,i){return this._checkDataSourceName(e),this._copyModelData(e,t,i)}loadDefaultValues(e){return this._setAttributesDefaultValues(e)}save(e,t,i){return(0,d.from)(this.waitAsyncTasksFinish()).pipe((0,l.switchMap)(()=>(this._checkDataSourceName(e),this.getModelMode(e)===A.ModelMode.Delete?this.delete(e,t,i):this._saveModel(e,t,i))))}delete(e,t,i){return this._checkDataSourceName(e),this._deleteModel(e,t,i)}resume(){return(0,d.of)(void 0)}pause(){return(0,d.of)(void 0)}destroy(){this._subscriptions.unsubscribe(),Array.from(this._collectionSubscription.values()).forEach(t=>t.unsubscribe()),this._collectionSubscription.clear(),this._crtControls.forEach(t=>{t.destroy()}),this.models?.forEach(t=>t.destroy()),this._crtControls.clear(),this._eventsSubject$.complete(),this._replayEvents$.complete(),this._modelLoaded$.complete();const e=[];for(const t of Object.values(this.attributes))t instanceof f&&e.push(t.destroy()),t instanceof j.A&&e.push((0,d.from)(t.destroy()));return(0,d.forkJoin)(e).pipe((0,l.defaultIfEmpty)(void 0),(0,l.map)(()=>{}),(0,l.finalize)(()=>{this.parent||(this._crtInjectionContextService.removeContext(this._injectionContext?.id),(0,I.callOnContextDestroyHooks)(this._injectionContext),this._context=null,this._viewModelDataDelayerService?.destroy(),this._viewModelDataDelayerService=null),this._asyncTasksExecutingSubject.complete(),this._dataSourcesInfos.clear(),this.__destroyed=!0,this._destroySubject.next(),this._destroySubject.complete()}))}getBoundDataSourceName(e){if(this._attributesToDataSourceNameMap.has(e))return this._attributesToDataSourceNameMap.get(e);const t=Array.from(this._attributesToDataSourceNameMap.keys()).find(i=>i.includes(".")&&i.split(".")[1]===e);return this._attributesToDataSourceNameMap.has(t)?this._attributesToDataSourceNameMap.get(t):null}_getBoundDataSourceAttributeControls(e){return Object.fromEntries(Array.from(this._attributesToDataSourceNameMap.entries()).filter(([t,i])=>i===e).map(([t])=>[t,this.getAttributeControl(t)]))}getBoundDataSourceAttributeControls(e){return Object.values(this._getBoundDataSourceAttributeControls(e))}getBoundDataSourceNameByAttributePath(e){return this._attributesToDataSourceNameMap.has(e)?this._attributesToDataSourceNameMap.get(e):null}getBoundDataSchema(e){return this.dataSchemas[this.getBoundDataSourceName(e)]}getBoundDataSchemaByAttributePath(e){return this.dataSchemas[this.getBoundDataSourceNameByAttributePath(e)]??null}getBoundDataSchemaAttributeByAttributePath(e){const t=this.getBoundDataSourceNameByAttributePath(e),i=this.getBoundDataSchemaByAttributePath(e);if(!t||!i)return null;const n=this._getDataSourceInfoByViewModelAttributePath(e).getDataSourceAttributePath(e);return i.findAttributeByName(n)}getPrimaryModelName(){return Promise.resolve(this._primaryModelName)}getPrimaryDataSchema(){return this.getPrimaryModelName().then(e=>this.dataSchemas[e])}isValid(e){const t=this._waitAsyncValidation().pipe((0,l.map)(()=>e?this.getBoundDataSourceAttributeControls(e).every(i=>!i.invalid):this.formApiModel.valid));return(0,d.lastValueFrom)(t)}validate(e){return this._ngZone.run(()=>e?this._validateByDataSourceName(e):this._validateAll())}getViewModelAttributePath(e,t){const i=this._dataSourcesInfos.get(e);return this._getMappedAttributeName(i,t)}getViewModelAttributePaths(e,t){return this._dataSourcesInfos.get(e)?.getMappedAttributeNames(t)}getCollectionViewModelAttributePath(e){return this._dataSourcesInfos.get(e)?.collectionViewModelAttributeName}canDelete(e,t){var i=this;return(0,s.A)(function*(){return i.getModelByName(e).canDelete(t)})()}canSave(e,t){var i=this;return(0,s.A)(function*(){return i.getModelByName(e).canSave(t)})()}enableAttributeValidator(e,t){this.getControl(e).enableValidator(t)}disableAttributeValidator(e,t){this.getControl(e).disableValidator(t)}_hotSwap(e){return this._measurePerformanceService.measure(`ViewModel.generatePrimaryAttributes.${this._injectionContext?.id}.parent.${!!this.parent}.hotSwap`,()=>{const t=e?.attributes?.changed||[],i=(0,x.isEmpty)(e.resources?.strings);if((0,x.isEmpty)(t)&&i)return(0,d.of)(!1);i||(this.resources={strings:this._getChangedResourcesStrings(e.resources.strings)}),this.viewModelConfig=e.actualViewModelConfig;const r=B.OU.getFromViewModelConfig(this.viewModelConfig),n=Object.fromEntries(t.map(p=>[p,this.viewModelConfig.attributes[p]])),m=e?.models?.changed??[],C=m.map(p=>p.name),O=this.models.filter(p=>p.isLoaded||p.isLoading).filter(p=>C.includes(p.name)).map(p=>p.name),W=m.map(p=>{const V=r.get(p.name);return this._upsertModel(p.name,p),this._replaceDataSourceInfo(p.name,V),this._addDataSchemaToDataSchemas(p)}),g=this._attributeGenerate$(n,{disableDefaultConfig:!0});return(0,d.forkJoin)([...W,g]).pipe(this._measurePerformanceService.measure$(`ViewModel.generatePrimaryAttributes.${this._injectionContext?.id}.parent.${!!this.parent}.hotSwap.forkJoin`),(0,l.switchMap)(()=>this._reGenerateResourcesAttributes()),(0,l.tap)(()=>this._loadDefaultSorting(C)),(0,l.tap)(()=>this._requestReloadModels(O)),(0,l.map)(()=>!0))})}_setAttributeValue(e,t,i){this._executeWithOptions(()=>this[e]=t,i)}set(e,t,i){return this._setAttributeValue(e,t,i),Promise.resolve()}_markAsPristine(e){this._forEachControl(e,t=>t.markAsPristine())}getAttributeNameByViewItemName(e){return Object.keys(this._attributeConfigs).find(t=>this._attributeConfigs[t].viewItemName===e)}getControl(e){return this._crtControls.has(e)?this._crtControls.get(e):B.CI.create({name:e,value:null,propertiesConfig:[]})}getAttributePropertyValue(...e){let t,i;if(e.length===2)t=e[0],i=e[1];else if(e.length===1){const n=e[0].split(":");t=n[0],i=n[1]}else throw new Error("ArgumentException");return this.getControl(t).getPropertyValue(i)}setAttributePropertyValue(...e){let t,i,r;if(e.length===3)t=e[0],i=e[1],r=e[2];else if(e.length===2){const m=e[0].split(":");t=m[0],i=m[1],r=e[1]}else throw new Error("ArgumentException");return this.getControl(t).setPropertyValue(i,r)}resetAttributePropertyValue(...e){let t,i;if(e.length===1)[t,i]=e[0].split(":");else if(e.length===2)t=e[0],i=e[1];else throw new Error("ArgumentException");this.getControl(t).getPropertyByName(i)?.resetValue()}getInvariabilityPropertyName(e){return this.getControl(e).getInvariabilityPropertyName()}setModelValues(e,t){return this.getModelByName(e).setValue(t)}_getBoundAttributesNames(e){const t=this.getBoundDataSourceNameByAttributePath(e);if(!t)return null;const i=this._dataSourcesInfos.get(t),r=i.attributesMap.get(e);return Array.from(i.attributesMap.entries()).filter(([n,m])=>m===r&&n!==e).map(([n])=>n)}_getAttributeDataValueTypeName(e){return this._attributeConfigs[e].dataValueTypeName}getDataSourceLoadParameters(e,t){const i=this._dataSourcesInfos.get(e);return i?this._modelParametersBuilder.getModelLoadParameters(this,i,[],I.DataSourceLoadType.Load,{modelLoadConfiguration:t}).then(([r,n,m])=>({parameters:r,options:{pagingConfig:n,sortingConfig:m}})):null}isDataSourceForCollection(e){return!!this._dataSourcesInfos.get(e)?.isCollection}_getDataSourceAttributeDataValueType(e){const t=this._getDataSourceInfoByViewModelAttributePath(e);let i=null;if(t){const r=t.getDataSourceAttributePath(e);r&&(i=this._getDataSourceAttributeSchema(t,r)?.dataValueType)}return i}_getModelNamesByLoadType(e){return Object.entries(this._modelsLoadingConfig).filter(([t,i])=>i.type===e).map(([t,i])=>t)}_reloadDependentModels(e,t=[]){const i=this._getDependentModelsForLoad(e,t);this._requestReloadModels(i)}_getDependentModelsForLoad(e,t=[]){const i=this._getDependentModelsNames(e.name,t),r=this._getChangedModelsNames(i).filter(n=>!(0,T.CB)(this.getModelByName(n)));return r.length!==0&&this._showNotification({message:"BaseViewModel.RefreshModelDataConflict"}),i.filter(n=>!r.includes(n)).filter(n=>this._modelsRequestedToLoad.has(n)||(0,T.CB)(this.getModelByName(n)))}getIsDirty(e){return this.getControl(e).isDirty}getModelByName(e){return this._modelsMap.get(e)}getModelMode(e){return this.getModelByName(e)?.mode}getPrimaryModelMode(){return this.getModelMode(this._primaryModelName)}_getModelModeChanges(e){return this.getModelByName(e)?._modeChanges$}_getPrimaryModelModeChanges(){return this._getModelModeChanges(this._primaryModelName)}markModelFor(e,t){this.getModelByName(e)?.markFor(t)}markPrimaryModelFor(e){this.markModelFor(this._primaryModelName,e)}_setStateAttribute(e){this._setSystemAttributeValue(u.$s,e)}_onAsyncTaskStarted(e){if(this._disableViewModelWaitingForAsyncTasks)return;const t=this._asyncTasksExecutingSubject.value;t.add(e),this._asyncTasksExecutingSubject.next(t)}_onAsyncTaskFinished(e){if(this._disableViewModelWaitingForAsyncTasks)return;const t=this._asyncTasksExecutingSubject.value;t.delete(e),this._asyncTasksExecutingSubject.next(t)}waitAsyncTasksFinish(){let e;return(0,d.firstValueFrom)(this._asyncTasksExecutingSubject.pipe((0,l.tap)(t=>{clearTimeout(e),e=this._handleAsyncTasksCycle(t)}),(0,l.filter)(t=>t.size===0),(0,l.take)(1),(0,l.map)(()=>{})))}}},32740:(J,$,a)=>{a.d($,{kd:()=>d,kP:()=>v,qg:()=>I,Do:()=>c,ie:()=>L,j7:()=>A,yM:()=>x,Ef:()=>s,$s:()=>l,wi:()=>F});const s="Unsaved7xDetailsData",c="HasUnsavedDataAnd7xDetails";var M=a(21018);const I=["crt.CopilotActionDataSource","crt.CopilotIntentDataSource","crt.CopilotIntentParameterDataSource",M.EntityDataSourceTypeName],F=Symbol("InternalViewModelInjector"),L="HasUnsavedData",A="IsChanged",x="PrimaryModelMode",d="BusinessRulesActivated",l="State",v="DisableShowSuccessMessageAfterLoadDataRequest"},28930:(J,$,a)=>{a.d($,{Mf:()=>A,dY:()=>d,yR:()=>L,yz:()=>x});var s=a(62278),c=a.n(s),M=a(36486),I=a.n(M),F=a(90169);class L extends Error{get isCritical(){return!0}constructor(v,j){super(j),this.dataSource=v}}class A extends L{constructor(v,j){super(v,j)}}class x extends L{get isCritical(){return!1}constructor(v,j){super(v,j)}}class d{constructor(v,j){this.dataSourceName=v,this.injector=j,this._errors=[]}get scope(){return this._scope}get hasErrors(){return this._errors.length!==0}get hasCriticalErrors(){return this._errors.some(v=>v.isCritical)}get affectedAttributes(){return[]}get isForceUpdateUnchangedData(){return!1}getLastError(){return this.hasErrors?this._errors[this._errors.length-1]:null}get isAggregate(){return!1}getEmptySchema(){return new F.I}init(v,j){return this.initialConfig=v,this._scope=j,(0,s.of)(this)}load(v,j,o){return this.innerLoad(v,j,o)}save(v,j){return this.innerSave(v,j)}insert(v){return this.innerInsert(v)}delete(v){return this.innerDelete(v)}getSchema(){return this.dataSchema?(0,s.of)(this.dataSchema):this.innerGetSchema().pipe((0,M.tap)(v=>{this.dataSchema=v}))}getLookupDataSchema(v){return this.innerGetLookupDataSchema(v)}getDefaultValues(){return this.innerGetDefaultValues()}canEdit(v){return this.innerCanEdit(v)}canDelete(v){return this.innerCanDelete(v)}canCreate(v){return this.innerCanCreate(v)}getOwnLoadParameters(){return null}getAllowCopyingRecords(){return!1}}},37015:(J,$,a)=>{a.d($,{kr:()=>c,wY:()=>M,aA:()=>F,$E:()=>L,vx:()=>I,d4:()=>x,ww:()=>A,d1:()=>l,Al:()=>s,L9:()=>v});const s="invalidate-data-schema-cache",c="DS",M="DYN",I="CopilotIntentMode",F={Chat:"Chat",Api:"API"},L=new Map([["Chat","326bba59-302a-4a5e-857c-2576e1a38ab0"],["API","5f2dc095-4543-4972-b6bc-6599bf6bc3fd"]]),A="CopilotIntentStatus",x=new Map([["InDevelopment","4670b068-ad03-4364-9350-6cc61efd1b7f"],["Active","1d73b111-07a9-49e2-aa15-c9415cce7470"],["Deactivated","2c547e71-7a05-42e1-8b65-2bf63f200156"]]);var d=a(62278);const l={System:{value:"35f3b644-4fa3-4d1e-8e62-5c3fdc4d3e52",displayValue:"System",primaryColorValue:"#22AC14"},Skill:{value:"6d940b75-21c8-4a90-89ab-9867e6e4a045",displayValue:"Skill",primaryColorValue:"#7848EE"},Agent:{value:"a8fbe253-be1b-4ec4-bc58-65b8047013da",displayValue:"Agent",primaryColorValue:"#E67E22"}};function v(){return(0,d.of)(Object.values(l))}},63801:(J,$,a)=>{a.d($,{m:()=>F});var s=a(38495),c=a(95868),M=a(62278),I=a(24089);class F extends I.f{constructor(A,x){super(A,x),this.dataSourceName=A,this.injector=x,this.type="crt.CopilotActionDataSource",this._intentManager=this.injector.get(c.CopilotIntentManagerService)}_getActionUId(A){return A.filter(d=>d.type===s.ModelParameterType.PrimaryColumnValue)[0]?.value}innerDelete(A){return(0,M.of)(void 0)}innerInsert(A){const x=A;return(0,M.forkJoin)([this._intentManager.createAction(x),this.getSchema()]).pipe((0,M.map)(([d,l])=>({success:d.success,rowsAffected:1,errorInfo:d.errorInfo?.message,primaryAttributes:d.success?[{[l.primaryAttributeName]:x.Id}]:null})))}innerLoad(A,x,d){const l=this._getActionUId(x);return l?this._intentManager.getActionByUId(l).pipe((0,M.map)(v=>[v])):(0,M.of)([])}innerSave(A,x){const d=this._getActionUId(A),l=x;return l.Id=d,this._intentManager.updateAction(l).pipe((0,M.map)(v=>({success:v.success,rowsAffected:1,errorInfo:v.errorInfo?.message})))}}},7896:(J,$,a)=>{a.d($,{g:()=>A});var s=a(38495),c=a(95868),M=a(62278),I=a(36486),F=a(24089),L=a(77325);class A extends F.f{constructor(d,l){super(d,l),this.dataSourceName=d,this.injector=l,this.type="crt.CopilotIntentDataSource",this._intentManager=this.injector.get(c.CopilotIntentManagerService),this._copilotIntentDataSourceModelConvertor=this.injector.get(L.tq)}innerGetDefaultValues(){return this._copilotIntentDataSourceModelConvertor.convertToDataSourceModel({UId:(0,s.generateGuid)(),Status:"InDevelopment",Mode:"Chat",Type:"Skill"})}innerInsert(d){const l=this._copilotIntentDataSourceModelConvertor.convertToModel({...d});return(0,M.forkJoin)([this._intentManager.createIntent(l),this.getSchema()]).pipe((0,M.map)(([v,j])=>({success:v.success,rowsAffected:v.success?1:0,errorInfo:v.errorInfo?.message,primaryAttributes:[{[j.primaryAttributeName]:v.schemaUid}]})),(0,I.switchMap)(v=>v.success?(0,M.of)(v):(0,M.throwError)(()=>v)))}innerLoad(d,l,v){const j=l.filter(o=>o.type===s.ModelParameterType.PrimaryColumnValue);if(j.length)return this._intentManager.getIntent(j[0].value).pipe((0,I.switchMap)(o=>this._copilotIntentDataSourceModelConvertor.convertToDataSourceModel(o).pipe((0,M.map)(u=>[u]))))}innerSave(d,l){const j=d.filter(u=>u.type===s.ModelParameterType.PrimaryColumnValue)[0].value,o=this._copilotIntentDataSourceModelConvertor.convertToModel({...l});return o.UId=j,this._intentManager.updateIntent(o).pipe((0,M.map)(u=>({success:u.success,rowsAffected:u.success?1:0,errorInfo:u.errorInfo?.message})),(0,I.switchMap)(u=>u.success?(0,M.of)(u):(0,M.throwError)(()=>u)))}}},29812:(J,$,a)=>{a.d($,{V:()=>L});var s=a(38495),c=a(95868),M=a(62278),I=a(24089),F=a(77325);class L extends I.f{constructor(x,d){super(x,d),this.dataSourceName=x,this.injector=d,this.type="crt.CopilotIntentParameterDataSource",this._intentManager=this.injector.get(c.CopilotIntentManagerService),this._modelConvertor=this.injector.get(F.Y7)}_getPrimaryColumnParameter(x){return x.find(d=>d.type===s.ModelParameterType.PrimaryColumnValue&&(0,s.isGuid)(d.value))}_getIsIntentUIdParameter(x){return(x.relationsConfigs??[]).some(d=>d.dataSchemaName==="CopilotIntent"&&d.attributePath==="Intent")}_getSourceCollectionFilterValue(x){const d=x.find(j=>j.type===s.ModelParameterType.Filter);if(!d?.value)return null;const l=s.FilterParser.fromJson(d.value);let v;return l.filters.forEach(j=>{j instanceof s.CompareFilter&&j.leftExpression instanceof s.ColumnExpression&&j.leftExpression.columnPath==="SourceCollection"&&j.rightExpression instanceof s.ParameterExpression&&(v=j.rightExpression.value)}),v}innerGetDefaultValues(){return this._modelConvertor.convertToDataSourceModel({UId:(0,s.generateGuid)()})}innerInsert(x){const d=this._modelConvertor.convertToModel({...x});return this._intentManager.createIntentParameter(d).pipe((0,M.map)(l=>({success:l.success,rowsAffected:l.success?1:0,errorInfo:l.errorInfo?.message,primaryAttributes:[{Id:d.UId}]})),(0,M.switchMap)(l=>l.success?(0,M.of)(l):(0,M.throwError)(()=>l)))}innerLoad(x,d,l){const v=this._getPrimaryColumnParameter(d),j=this._getSourceCollectionFilterValue(d)??"InputParameters";return v?(this._getIsIntentUIdParameter(v)?this._intentManager.getIntentParameters(v.value,j):this._intentManager.getIntentParameter(v.value).pipe((0,M.map)(u=>[u]))).pipe((0,M.mergeMap)(u=>(0,M.from)(u).pipe((0,M.mergeMap)(_=>this._modelConvertor.convertToDataSourceModel(_)),(0,M.toArray)())),(0,M.catchError)(()=>(0,M.of)([]))):(0,M.of)([])}innerSave(x,d){const l=this._getPrimaryColumnParameter(x)?.value,v=this._modelConvertor.convertToModel({...d});return v.UId=l,this._intentManager.updateIntentParameter(v).pipe((0,M.map)(j=>({success:j.success,rowsAffected:j.success?1:0,errorInfo:j.errorInfo?.message})),(0,M.switchMap)(j=>j.success?(0,M.of)(j):(0,M.throwError)(()=>j)))}innerDelete(x){const d=this._getPrimaryColumnParameter(x)?.value;return this._intentManager.deleteIntentParameter(d).pipe((0,M.map)(l=>({success:l.success,rowsAffected:l.success?1:0,errorInfo:l.errorInfo?.message})),(0,M.switchMap)(l=>l.success?(0,M.of)(l):(0,M.throwError)(()=>l)))}}},99774:(J,$,a)=>{a.d($,{J:()=>o});var s=a(96590),c=a.n(s),M=a(21018),I=a.n(M),F=a(62278),L=a.n(F),A=a(36486),x=a.n(A),d=a(37015),l=a(87767),v=a(59131),j=a.n(v);class o{constructor(_,b){this._entitySchemaRepository=_,this._broadcastChannelFactory=b,this._dataSchemas=new Map,this._subscribeOnChangesInDesigner()}_subscribeOnChangesInDesigner(){this._broadcastChannelFactory.createInstance(d.Al).messages$.subscribe(({schemaName:_})=>{this._removeCachedSchema(_)})}_createEntityDataSchema(_){const b=new l.i;return b.setEntitySchema(_),(0,F.of)(b.build())}_getEntityDataSchema(_){return this._entitySchemaRepository.getSchemaByName(_).pipe((0,A.switchMap)(b=>this._createEntityDataSchema(b)))}_removeCachedSchema(_){this._dataSchemas.has(_)&&(this._dataSchemas.delete(_),this._entitySchemaRepository.clearSchemaCacheByName(_))}get(_){return this._dataSchemas.has(_)?(0,F.of)(this._dataSchemas.get(_)):this._getEntityDataSchema(_).pipe((0,A.tap)(b=>this._dataSchemas.set(_,b)))}getByEntitySchema(_){const b=_.name;return this._dataSchemas.has(b)?(0,F.of)(this._dataSchemas.get(b)):this._createEntityDataSchema(_).pipe((0,A.tap)(y=>this._dataSchemas.set(b,y)))}static{this.\u0275fac=function(b){return new(b||o)(v.\u0275\u0275inject(M.EntitySchemaRepository),v.\u0275\u0275inject(s.BroadcastChannelFactory))}}static{this.\u0275prov=v.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"platform"})}}},36688:(J,$,a)=>{a.d($,{w:()=>A});var s=a(38495),c=a.n(s),M=a(62278),I=a.n(M),F=a(36486),L=a.n(F);class A{get isDate(){return this.dataValueType===s.DataValueType.Date||this.dataValueType===s.DataValueType.DateTime||this.dataValueType===s.DataValueType.Time}get isImage(){return this.dataValueType===s.DataValueType.IMAGELOOKUP||this.dataValueType===s.DataValueType.Image}get isLookup(){return this.dataValueType===s.DataValueType.Lookup}set isSystem(d){this._isSystem=d}get isSystem(){return this._isSystem}get isAggregate(){return this.attributeType===s.DataSchemaAttributeType.AggregationAttribute?!0:this.attributeType===s.DataSchemaAttributeType.FunctionAttribute&&this.functionConfig?.type==="aggregation"}constructor(d){if(this._isSystem=!1,d!=null){this.name=d.name,this.caption=d.caption,this.path=d.path,this.dataValueType=d.dataValueType,d.validators&&(this.validators={...d.validators||{}});const l=d.defaultValue;l&&(l instanceof M.Observable?this.defaultValue=l.pipe((0,F.map)(v=>this._getConvertDefaultValue(v))):this.defaultValue=(0,M.of)(this._getConvertDefaultValue(l))),this.defaultValueSchema=d.defaultValueSchema,this.isValueCloneable=d.isValueCloneable,this.attributeType=d.attributeType,this.referenceSchemaName=d.referenceSchemaName,this.functionConfig=d.functionConfig,this.aggregationConfig=d.aggregationConfig,this.isMasked=d.isMasked,this.isFormatValidated=d.isFormatValidated,this.isSensitiveData=d.isSensitiveData,this.usageType=d.usageType,this.isRequired=d.isRequired,this.lookupMode=d.lookupMode,this.isSystem=!!d.isSystem}}_getConvertDefaultValue(d){if(this.isDate)if(d instanceof Date){const l=new Date;return l.setTime(d.getTime()),l}else return d;else return typeof d=="object"?{...d}:d}clone(){return new A(this)}addDefaultValidators(){const d=this.validators??{};this.isRequired&&(d["crt.Required"]={type:"crt.Required"}),!this.validators&&Object.keys(d).length>0&&(this.validators=d)}}},52701:(J,$,a)=>{a.d($,{I:()=>s});class s{get attributes(){return this._parent?[...this._parent.attributes,...this._attributes]:[...this._attributes]}get parent(){return this._parent}constructor(M){if(M!=null){this.name=M.name,this.type=M.type,M.caption&&(this.caption=typeof M.caption=="string"?M.caption:{...M.caption}),this.primaryAttributeName=M.primaryAttributeName,this.primaryDisplayAttributeName=M.primaryDisplayAttributeName,this.primaryColorAttributeName=M.primaryColorAttributeName,this.hierarchyAttributeName=M.hierarchyAttributeName,this.createdByAttributeName=M.createdByAttributeName,this.createdOnAttributeName=M.createdOnAttributeName,this.modifiedByAttributeName=M.modifiedByAttributeName,this.modifiedOnAttributeName=M.modifiedOnAttributeName,M.dataSourceConfig&&(this.dataSourceConfig={...M.dataSourceConfig,config:{...M.dataSourceConfig.config}}),this._parent=M.parent;const I=M.attributes??[];this._attributes=[],I.forEach(F=>{if(this._parent){this._parent.findAttributeByName(F.name)||this._attributes.push(F.clone());return}this._attributes.push(F.clone())})}else this._attributes=[]}clearAttributes(){this._attributes=[]}addAttribute(M){if(this._parent){this._parent.findAttributeByName(M.name)||this._attributes.push(M);return}this._attributes.push(M)}findAttributeByName(M){return this.attributes.find(I=>I.name===M)??null}getPrimaryAttributesNames(){return[this.primaryAttributeName]}getPrimaryLoadAttributes(){const M=[];return this.primaryAttributeName&&M.push(this.primaryAttributeName),this.primaryDisplayAttributeName&&M.push(this.primaryDisplayAttributeName),M}clone(){return new s(this)}createChild(){const M=new s;return M.name=this.name,M.type=this.type,this.caption&&(M.caption=typeof this.caption=="string"?this.caption:{...this.caption}),M.primaryAttributeName=this.primaryAttributeName,M.primaryDisplayAttributeName=this.primaryDisplayAttributeName,M.primaryColorAttributeName=this.primaryColorAttributeName,M.hierarchyAttributeName=this.hierarchyAttributeName,M.createdByAttributeName=this.createdByAttributeName,M.createdOnAttributeName=this.createdOnAttributeName,M.modifiedByAttributeName=this.modifiedByAttributeName,M.modifiedOnAttributeName=this.modifiedOnAttributeName,this.dataSourceConfig&&(M.dataSourceConfig={...this.dataSourceConfig,config:{...this.dataSourceConfig.config}}),M._attributes=[],M._parent=this,M}}},90169:(J,$,a)=>{a.d($,{I:()=>s.I,w:()=>c.w});var s=a(52701),c=a(36688)},98594:(J,$,a)=>{a.d($,{L:()=>d});var s=a(59131),c=a.n(s),M=a(62278),I=a.n(M),F=a(36486),L=a.n(F),A=a(28930),x=a(71642);class d{constructor(v,j){this.injector=v,this.resolver=j}create(v,j,o){const{type:u,scope:_,config:b}=j;return this.resolver.resolve(u).pipe((0,F.switchMap)(S=>S?new S(v,o||this.injector).init(b,_):(0,M.throwError)(()=>new Error(`Data source type '${u}' not supported.`))),(0,F.catchError)(S=>S instanceof A.Mf?(0,M.of)(S.dataSource):(0,M.throwError)(()=>S)))}static{this.\u0275fac=function(j){return new(j||d)(s.\u0275\u0275inject(s.Injector),s.\u0275\u0275inject(x._))}}static{this.\u0275prov=s.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac})}}},71642:(J,$,a)=>{a.d($,{_:()=>v});var s=a(59131),c=a(21018),M=a(62278),I=a(63801),F=a(7896),L=a(29812),A=a(24089);class x extends A.f{innerDelete(o){return(0,M.of)(null)}innerInsert(o){return(0,M.of)(null)}innerLoad(o,u){return(0,M.of)([])}innerSave(o,u){return(0,M.of)(null)}innerGetLookupDataSchema(o){return(0,M.of)(null)}innerGetDefaultValues(){return(0,M.of)(null)}innerCanDelete(o){return(0,M.of)(null)}innerCanEdit(o){return(0,M.of)(null)}innerCanCreate(o){return(0,M.of)(null)}}var d=a(60928),l=a(24285);class v{resolve(o){let u=null;switch(o){case c.EntityDataSourceTypeName:u=A.f;break;case c.PAGE_PARAMETERS_DATA_SOURCE_TYPE_NAME:u=d.X;break;case"crt.WebServiceDataSource":u=l.b;break;case"crt.CopilotIntentDataSource":u=F.g;break;case"crt.CopilotIntentParameterDataSource":u=L.V;break;case"crt.CopilotActionDataSource":u=I.m;break;case"crt.DashboardDataSource":u=x;break}return(0,M.of)(u)}static{this.\u0275fac=function(u){return new(u||v)}}static{this.\u0275prov=s.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac})}}},64581:(J,$,a)=>{a.d($,{D:()=>F,Q:()=>L});var s=a(38495),c=a.n(s),M=a(21018),I=a.n(M);const F=A=>{switch(A){case s.DataValueType.Guid:return s.DataValueType.Guid;case s.DataValueType.Text:case s.DataValueType.SHORT_TEXT:case s.DataValueType.PHONE_TEXT:case s.DataValueType.WEB_TEXT:case s.DataValueType.EMAIL_TEXT:case s.DataValueType.MEDIUM_TEXT:case s.DataValueType.MAXSIZE_TEXT:case s.DataValueType.LONG_TEXT:case s.DataValueType.HASH_TEXT:case s.DataValueType.SECURE_TEXT:case s.DataValueType.RICH_TEXT:return s.DataValueType.Text;case s.DataValueType.Integer:case s.DataValueType.Enum:return s.DataValueType.Integer;case s.DataValueType.Float:case s.DataValueType.FLOAT1:case s.DataValueType.FLOAT2:case s.DataValueType.FLOAT3:case s.DataValueType.FLOAT4:case s.DataValueType.FLOAT8:case s.DataValueType.Money:return s.DataValueType.Float;case s.DataValueType.DateTime:case s.DataValueType.Date:case s.DataValueType.Time:return s.DataValueType.DateTime;case s.DataValueType.Lookup:case s.DataValueType.IMAGELOOKUP:return s.DataValueType.Lookup;case s.DataValueType.Boolean:return s.DataValueType.Boolean;case s.DataValueType.Blob:return s.DataValueType.Blob;case s.DataValueType.Image:return s.DataValueType.Image;case s.DataValueType.Color:return s.DataValueType.Color;default:throw new Error(`Type ${A} not implemented`)}};function L(A,x=null,d=s.DataValueType.Float){if(!A||A.length===0)return x;if(A.length===1)return A[0];let l=A.map(v=>F(v)).map(v=>M.DataValueTypeGroup.Number.includes(v)?d:v);return l=[...new Set(l)],l.length===1?l[0]:x}},87767:(J,$,a)=>{a.d($,{i:()=>j});var s=a(38495),c=a.n(s),M=a(21018),I=a.n(M),F=a(28399),L=a.n(F),A=a(62278),x=a.n(A),d=a(36486),l=a.n(d),v=a(90169);class j{constructor(u=null,_){u==null?this._dataSchema=new v.I:this._dataSchema=_?.useClone?u.clone():u.createChild()}_createDataSchemaAttributeByConfig(u){const _=new v.w;return _.name=u.name,_.caption=u.caption,_.path=u.path,_.dataValueType=u.dataValueType,_.validators={...u.validators||{}},_.defaultValue=(0,A.of)(typeof u.defaultValue=="object"?{...u.defaultValue}:u.defaultValue),_.defaultValueSchema=u.defaultValueSchema,_.isValueCloneable=u.isValueCloneable,_.attributeType=u.attributeType,_.referenceSchemaName=u.referenceSchemaName,_.functionConfig=u.functionConfig,_.aggregationConfig=u.aggregationConfig,_.usageType=u.usageType,_.isMasked=u.isMasked,_.isFormatValidated=u.isFormatValidated,_.isSensitiveData=u.isSensitiveData,_.isRequired=u.isRequired,_.lookupMode=u.lookupMode,_.isSystem=u.isSystem??!1,_}setEntitySchemaColumnValidators(u,_){return u.isRequired&&this.setAttributeRequiredValidator(_),this.setAttributeTextDataValueTypeValidator(_,u.dataValueType).setAttributeNumberDataValueTypeValidator(_,u.dataValueType).setAttributePhoneDataValueTypeValidator(_,u)}setAttributeValidator(u,_,b){const y=this._dataSchema.attributes.find(R=>R.name===u),S=y.validators||{};return S[_]=b,y.validators=S,this}setAttributeRequiredValidator(u){return this.setAttributeValidator(u,"crt.Required",{type:"crt.Required"})}setAttributeMaxLengthValidator(u,_){return this.setAttributeValidator(u,"crt.MaxLength",{type:"crt.MaxLength",params:{maxLength:_}})}setAttributeTextDataValueTypeValidator(u,_){const b=(0,M.getTextDataValueTypeValidatorParams)(_);return b?this.setAttributeMaxLengthValidator(u,b.maxLength):this}setAttributeMinValueValidator(u,_){return this.setAttributeValidator(u,"crt.Min",{type:"crt.Min",params:{min:_}})}setAttributeMaxValueValidator(u,_){return this.setAttributeValidator(u,"crt.Max",{type:"crt.Max",params:{max:_}})}setAttributeMinMaxValidator(u,_,b){return this.setAttributeMinValueValidator(u,_).setAttributeMaxValueValidator(u,b)}setAttributeNumberDataValueTypeValidator(u,_){const b=(0,M.getNumberDataValueTypeValidatorParams)(_);return b&&this.setAttributeMinMaxValidator(u,b.minValue,b.maxValue),this}setAttributePhoneDataValueTypeValidator(u,_){return[s.DataValueType.PHONE_TEXT].includes(_.dataValueType)&&_.isMasked&&this.setAttributeRegExpValidator(u,{regex:/^((?!_).)*$/,errorCode:"phoneMaskValidator"}),this}setAttributeRegExpValidator(u,_){return this.setAttributeValidator(u,"crt.RegExp",{type:"crt.RegExp",params:_})}setAttributesDefaultValue(u){return this._dataSchema.attributes.forEach(_=>{_.defaultValue=u.pipe((0,d.map)(b=>b[_.name]))}),this}addAttribute(u,_){const{name:b,caption:y,dataValueType:S,isValueCloneable:R,referenceSchemaName:B,isMasked:D,isFormatValidated:T,usageType:U,isRequired:f,isSensitiveData:P}=u,e=new v.w;return e.name=_.attributeName||b,e.path=_.attributePath||b,e.caption=y,e.dataValueType=S,e.isValueCloneable=!!R,e.attributeType=_.attributeType||s.DataSchemaAttributeType.OwnAttribute,e.referenceSchemaName=B,e.validators={},e.isMasked=D,e.isFormatValidated=T,e.isSensitiveData=P,e.usageType=U,e.isRequired=f,e.defaultValueSchema=u.defaultValueSchema,e.lookupMode=u.lookupMode,e.isSystem=(0,F.compact)([this._dataSchema.createdByAttributeName,this._dataSchema.createdOnAttributeName,this._dataSchema.modifiedByAttributeName,this._dataSchema.modifiedOnAttributeName,this._dataSchema.primaryAttributeName,"ProcessListeners"]).includes(e.name),this._dataSchema.addAttribute(e),_.attributeType===s.DataSchemaAttributeType.OwnAttribute&&this.setEntitySchemaColumnValidators(u,e.name),_.attributeType===s.DataSchemaAttributeType.AggregationAttribute&&(e.aggregationConfig=_.aggregationConfig),_.attributeType===s.DataSchemaAttributeType.FunctionAttribute&&(e.functionConfig=_.functionConfig),this}addOwnAttribute(u){return this.addAttribute(u,{attributeType:s.DataSchemaAttributeType.OwnAttribute})}setEntitySchema(u){return this._dataSchema.dataSourceConfig={type:"crt.EntityDataSource",config:{entitySchemaName:u.name}},this._dataSchema.name=u.name,this._dataSchema.type=s.DataSchemaType.Entity,this._dataSchema.primaryAttributeName=u.getPrimaryColumn()?.name,this._dataSchema.primaryDisplayAttributeName=u.getPrimaryDisplayColumn()?.name,this._dataSchema.primaryColorAttributeName=u.getPrimaryColorColumn()?.name,this._dataSchema.hierarchyAttributeName=u.getHierarchyColumn()?.name,this._dataSchema.caption=u.caption,this._dataSchema.createdByAttributeName=u.columns.find(_=>_.uId===u.createdByColumnUId)?.name,this._dataSchema.createdOnAttributeName=u.columns.find(_=>_.uId===u.createdOnColumnUId)?.name,this._dataSchema.modifiedByAttributeName=u.columns.find(_=>_.uId===u.modifiedByColumnUId)?.name,this._dataSchema.modifiedOnAttributeName=u.columns.find(_=>_.uId===u.modifiedOnColumnUId)?.name,this._dataSchema.clearAttributes(),u.columns.forEach(_=>{this.addOwnAttribute(_)}),this}setDataSchemaConfig(u){return this._dataSchema.name=u.name,this._dataSchema.type=u.type,this._dataSchema.caption=typeof u.caption=="string"?u.caption:{...u.caption},this._dataSchema.primaryAttributeName=u.primaryAttributeName,this._dataSchema.primaryDisplayAttributeName=u.primaryDisplayAttributeName,this._dataSchema.dataSourceConfig={...u.dataSourceConfig,config:{...u.dataSourceConfig?.config}},(u.attributes||[]).forEach(b=>{const y=this._createDataSchemaAttributeByConfig(b);this._dataSchema.addAttribute(y)}),this}build(){return this._dataSchema.clone()}}},493:(J,$,a)=>{a.d($,{O:()=>u});var s=a(38495),c=a.n(s),M=a(96590),I=a.n(M),F=a(21018),L=a.n(F),A=a(62278),x=a.n(A),d=a(16605),l=a(81680),v=a(25060),j=a(59131),o=a.n(j);class u{constructor(b,y,S){this.entitySchemaQueryUtils=b,this._entitySchemaColumnAppenderFactory=y,this._dataSchemaToDataSourceAttributeConverter=S}_addPagingToEsq(b,y){y&&(b.rowsOffset=y.rowsOffset,b.rowCount=y.rowCount)}_addSortingToEsq(b,y){y&&y.columns.forEach((S,R)=>{const B=b.findColumn(S.columnName),D=(0,F.toOrderDirection)(S.direction);B?B.withOrdering(D,R):b.addSchemaColumn(S.columnName).withOrdering(D,R)})}_addIsDistinctToEsq(b,y){y&&(b.isDistinct=!0)}_addColumnToEsq(b,y){y.filter(Boolean).forEach(S=>{this._entitySchemaColumnAppenderFactory.create(S).addColumn(b,S)})}_prepareAttributePairsForLoad(b,y){return y.map(S=>{if(typeof S=="string"){const R=S,B=b.attributes.find(D=>D.name===R);return B?this._dataSchemaToDataSourceAttributeConverter.create(B.attributeType).convert(B):{name:R,path:R}}else return S})}build(b,y,S,R){if(S.some(B=>B.type===s.ModelParameterType.Never))throw new Error('Failed to build entity schema query: parameters contains "Never" model parameter.');return(0,A.forkJoin)([this.entitySchemaQueryUtils.convertToEntityDataSourceParameters(S),(0,A.of)(this._prepareAttributePairsForLoad(b,y))]).pipe((0,A.map)(([B,D])=>({esq:new s.EntitySchemaQuery(b.name),esqParameters:B,dataSourceAttributes:D})),(0,A.tap)(({esq:B,dataSourceAttributes:D})=>this._addColumnToEsq(B,D)),(0,A.tap)(({esq:B})=>this._addSortingToEsq(B,R?.sortingConfig)),(0,A.tap)(({esq:B})=>this._addPagingToEsq(B,R?.pagingConfig)),(0,A.tap)(({esq:B})=>this._addIsDistinctToEsq(B,R?.isDistinct)),(0,A.switchMap)(({esq:B,esqParameters:D})=>this.entitySchemaQueryUtils.applyParameters(D,B)))}static{this.\u0275fac=function(y){return new(y||u)(j.\u0275\u0275inject(d.A),j.\u0275\u0275inject(v.m),j.\u0275\u0275inject(l.L))}}static{this.\u0275prov=j.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"})}}},16605:(J,$,a)=>{a.d($,{A:()=>v});var s=a(38495),c=a(28399),M=a(62278),I=a(73308),F=a(90169);class L{constructor(o){this._dataSchemaRepository=o}_getDataSchema(o){var u=this;return(0,I.A)(function*(){const _=yield(0,M.firstValueFrom)(u._dataSchemaRepository.get(o));if(!_)throw new Error(`Can not find DataSchema with name '${o}'`);return _})()}_getDataSchemaAttribute(o,u){var _=this;return(0,I.A)(function*(){const b=o instanceof F.I?o:yield _._getDataSchema(o),y=b.findAttributeByName(u);if(!y)throw new Error(`Can not find column '${u}' in Schema '${b.name}'`);return y})()}_getDataSchemaPrimaryAttribute(o){var u=this;return(0,I.A)(function*(){const _=yield u._getDataSchema(o);return u._getDataSchemaAttribute(_,_.primaryAttributeName)})()}_createRelationPathItemFromForwardPathItem(o,u){var _=this;return(0,I.A)(function*(){const b=yield _._getDataSchemaAttribute(o,u);let y=null,S=null;const R=b.dataValueType===s.DataValueType.Lookup;return R&&(y=b.referenceSchemaName,S=(yield _._getDataSchema(y)).primaryAttributeName),{isJoin:R,referenceSchemaName:y,referenceAttributeName:S,ownSchemaAttributeName:u,ownSchemaName:o}})()}_createRelationPathItemFromJoinPathItem(o,u,_,b){var y=this;return(0,I.A)(function*(){const S=_?yield y._getDataSchemaAttribute(u,_):yield y._getDataSchemaPrimaryAttribute(u);return{isJoin:!0,referenceSchemaName:u,referenceAttributeName:S.name,ownSchemaAttributeName:b,ownSchemaName:o}})()}_createRelationPathItem(o,u){const b=/(?<joinType>.*)\[(?<refSchema>.*?):(?<ownColumn>.*?)(?::(?<refColumn>.*))?]/.exec(u);if(b){const y=b.groups;return this._createRelationPathItemFromJoinPathItem(o,y.refSchema,y.refColumn,y.ownColumn)}return this._createRelationPathItemFromForwardPathItem(o,u)}_getReverseRelationPath(o){const u=[...o],_=[];let b;for(;(b=u.pop())!=null;)_.push({isJoin:!0,ownSchemaName:b.referenceSchemaName,ownSchemaAttributeName:b.referenceAttributeName,referenceSchemaName:b.ownSchemaName,referenceAttributeName:b.ownSchemaAttributeName});return _}_buildRelationPath(o,u){var _=this;return(0,I.A)(function*(){const b=u.split("."),y=[];let S=o;for(const R of b){const B=yield _._createRelationPathItem(S,R);S=B.referenceSchemaName,y.push(B)}return y})()}_getRelationPathToSourceSchema(o,u){const _=[...o],b=_.pop(),y=u.split("."),S={isJoin:!0,ownSchemaName:b.isJoin?b.referenceSchemaName:b.ownSchemaName,ownSchemaAttributeName:b.isJoin?b.referenceAttributeName:b.ownSchemaAttributeName,referenceSchemaName:null,referenceAttributeName:y.pop()};return[..._,...b.isJoin?[b]:[],S]}_buildRelationDataFromPath(o){return o.map(u=>({attributeName:u.ownSchemaAttributeName,referenceAttributeName:u.referenceAttributeName,referenceSchemaName:u.referenceSchemaName}))}_getDataSourceParameterRelationData(o){var u=this;return(0,I.A)(function*(){const _=yield u._buildRelationPath(o.dataSchemaName,o.relationPath),b=u._getRelationPathToSourceSchema(_,o.attributePath),y=u._getReverseRelationPath(b);return u._buildRelationDataFromPath(y)})()}_convertEntityDataSourceParameter(o){var u=this;return(0,I.A)(function*(){if(!o.relationsConfigs||o.relationsConfigs.length===0)return o;const _=[];for(const b of o.relationsConfigs){const y=yield u._getDataSourceParameterRelationData(b);_.push({...b,relationData:y})}return{...o,relationsConfigs:_}})()}convert(o,u=!1){return o.length===0?Promise.resolve([]):u?Promise.resolve(o):Promise.all(o.map(_=>this._convertEntityDataSourceParameter(_)))}}var A=a(29957);class x{_getExpressionColumnPath(o,u){const _="[{referenceSchemaName}:{referenceAttributeName}:{attributeName}]",b=o.relationData.map(D=>A.String.format(_,D)).join("."),y=o.attributePath.split("."),S=y.length>1?"{ownColumnPath}.{relationString}.{columnPath}":"{relationString}.{columnPath}";y.pop();const B={ownColumnPath:y.join("."),relationString:b,columnPath:u};return A.String.format(S,B)}_updateFilterLeftExpression(o,u){switch(o.expressionType){case s.ExpressionType.SchemaColumn:o.columnPath=this._getExpressionColumnPath(u,o.columnPath);break;case s.ExpressionType.SubQuery:o.columnPath=this._getExpressionColumnPath(u,o.columnPath);break;case s.ExpressionType.Function:o.functionType!==s.FunctionType.Macros&&this._updateFilterLeftExpression(o.functionArgument,u);break}}_updateRelatedFilterGroup(o,u){o instanceof s.FilterGroup?this._updateRelatedFilterGroupInstance(o,u):this._updateRelatedFilterGroupObject(o,u)}_updateRelatedFilterGroupObject(o,u){Object.values(o.items).forEach(_=>{this._updateRelatedFilter(_,u)})}_updateRelatedFilterGroupInstance(o,u){o.filters.forEach(_=>this._updateRelatedFilter(_,u))}_updateRelatedFilter(o,u){if(o.filterType!==s.FilterType.FilterGroup){const _=o.leftExpression;_&&this._updateFilterLeftExpression(_,u)}else this._updateRelatedFilterGroup(o,u)}convertToRelatedFilter(o,u=[]){if(!o)return o;let _;if(o instanceof s.BaseFilter)_=o.clone();else{const b=JSON.stringify(o);_=JSON.parse(b)}return[...u].reverse().forEach(b=>{b.relationData&&b.relationData.length!==0&&this._updateRelatedFilter(_,b)}),_}}var d=a(99774),l=a(59131);class v{_createPrimaryColumnValueFilter(o,u){const y=(u.relationsConfigs||[])[0]?.dataSchemaName??o;return this._dataSchemaRepository.get(y).pipe((0,M.map)(S=>{const R=new s.ColumnExpression({columnPath:S.primaryAttributeName}),B=new s.ParameterExpression({value:u.value});return new s.CompareFilter(s.ComparisonType.Equal,R,B)}))}_createColumnValueFilter(o){const u=o.value.attributePath,_=o.value.attributeValue,b=new s.ColumnExpression({columnPath:u}),y=new s.ParameterExpression({value:_}),S=new s.CompareFilter(s.ComparisonType.Equal,b,y);return(0,M.of)(S)}_createPrimaryDisplayValueFilter(o,u){const y=(u.relationsConfigs||[])[0]?.dataSchemaName??o;return this._dataSchemaRepository.get(y).pipe((0,M.map)(S=>{const R=new s.ColumnExpression({columnPath:S.primaryDisplayAttributeName}),B=new s.ParameterExpression({value:u.value});return new s.CompareFilter(u.comparisonType,R,B)}))}_createCustomFilter(o){let u={};return o.value&&(u=typeof o.value=="string"?JSON.parse(o.value):o.value),(0,M.of)(u)}_createEmptyParameterFiler(o){const u=o.relationsConfigs||[];if(u.length===0)return(0,M.of)({});const _=u[0];return this._dataSchemaRepository.get(_.dataSchemaName).pipe((0,M.map)(b=>b.primaryAttributeName),(0,M.map)(b=>{const y=new s.ColumnExpression({columnPath:b});return new s.ExistsFilter(y,null)}))}_createEsqFilter(o,u){switch(u.type){case s.ModelParameterType.PrimaryColumnValue:return this._createPrimaryColumnValueFilter(o,u);case s.ModelParameterType.ColumnValue:return this._createColumnValueFilter(u);case s.ModelParameterType.PrimaryDisplayValueFilter:return this._createPrimaryDisplayValueFilter(o,u);case s.ModelParameterType.Filter:return this._createCustomFilter(u);case s.ModelParameterType.Empty:return this._createEmptyParameterFiler(u)}}constructor(o){this._dataSchemaRepository=o}applyParameters(o,u){if(o.length===0)return(0,M.of)(u);const _=o.map(b=>this._createEsqFilter(u.rootSchemaName,b).pipe((0,M.map)(y=>new x().convertToRelatedFilter(y,b.relationsConfigs))));return(0,M.forkJoin)(_).pipe((0,M.tap)(b=>{b.forEach(y=>{(0,c.isEmpty)(y)||u.filters.add(y)})}),(0,M.map)(()=>u))}convertToEntityDataSourceParameters(o,u=!1){const _=new L(this._dataSchemaRepository);return(0,M.from)(_.convert(o,u))}static{this.\u0275fac=function(u){return new(u||v)(l.\u0275\u0275inject(d.J))}}static{this.\u0275prov=l.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac,providedIn:"root"})}}},24089:(J,$,a)=>{a.d($,{iu:()=>x.i,f:()=>t,CW:()=>I,g$:()=>L,WY:()=>F,hs:()=>A,OL:()=>T.O});var s=a(38495);class c{addColumnCaption(r,n){const{name:m,caption:C}=n;if(!C)return;const O=r.findColumn(m);O&&O.withCaption(C)}addColumn(r,n){!r||!n||(this.addColumnInternal(r,n),this.addColumnCaption(r,n))}}var M=a(59131);class I extends c{addColumnInternal(r,n){const{name:m,path:C,aggregationConfig:O}=n;r.addAggregationSubQueryColumn(C,(0,s.toAggregationType)(O?.aggregationFunction),O,m)}static{this.\u0275fac=(()=>{let r;return function(m){return(r||(r=M.\u0275\u0275getInheritedFactory(I)))(m||I)}})()}static{this.\u0275prov=M.\u0275\u0275defineInjectable({token:I,factory:I.\u0275fac,providedIn:"root"})}}class F extends c{addColumnInternal(r,n){r.addSchemaColumn(n.path,n.name)}static{this.\u0275fac=(()=>{let r;return function(m){return(r||(r=M.\u0275\u0275getInheritedFactory(F)))(m||F)}})()}static{this.\u0275prov=M.\u0275\u0275defineInjectable({token:F,factory:F.\u0275fac,providedIn:"root"})}}class L extends c{addColumnInternal(r,n){const{name:m,path:C}=n||{},O=n?.functionConfig;r.addAggregationFunctionColumn(C,(0,s.toAggregationType)(O?.aggregation),m,(0,s.toAggregationEvalType)(O?.aggregationEval))}static{this.\u0275fac=(()=>{let r;return function(m){return(r||(r=M.\u0275\u0275getInheritedFactory(L)))(m||L)}})()}static{this.\u0275prov=M.\u0275\u0275defineInjectable({token:L,factory:L.\u0275fac,providedIn:"root"})}}class A extends c{addColumnInternal(r,n){const{name:m,path:C}=n||{},O=n?.functionConfig;r.addDatePartFunctionColumn(C,(0,s.toDatePartType)(O?.datePart),m)}static{this.\u0275fac=(()=>{let r;return function(m){return(r||(r=M.\u0275\u0275getInheritedFactory(A)))(m||A)}})()}static{this.\u0275prov=M.\u0275\u0275defineInjectable({token:A,factory:A.\u0275fac,providedIn:"root"})}}var x=a(87767),d=a(63721),l=a(31589),v=a(79772),j=a(96590),o=a(85638),u=a(35266),_=a(21018),b=a(28399),y=a(62278),S=a(36486),R=a(28930);class B extends R.Mf{get entitySchemaName(){return this._entitySchemaName}constructor(r,n){super(r,`Entity schema with name '${n}' not found.`),this._entitySchemaName=n}}class D extends R.Mf{constructor(r){super(r,`Entity schema name for data source ${r.dataSourceName} is not provided`)}}var T=a(493),U=a(16605),f=a(90169),P=a(99774),e=a(64581);class t extends R.dY{get isForceUpdateUnchangedData(){return!!this.initialConfig?.isForceUpdateUnchangedData}constructor(r,n){super(r,n),this.dataSourceName=r,this.injector=n,this._affectedAttributes=[],this._errorReferenceAttributes=[],this.type=_.EntityDataSourceTypeName,this._featureValues=n.get(_.FEATURE_VALUES),this._queryExecutor=n.get(u.QueryExecutor),this._entitySchemaService=n.get(_.EntitySchemaService),this._httpClient=this.injector.get(d.HttpClient),this._rightsService=this.injector.get(o.RightsService),this.dataSchemaRepository=this.injector.get(P.J),this._entitySchemaRepository=this.injector.get(_.EntitySchemaRepository),this._entitySchemaQueryBuilder=this.injector.get(T.O),this._entitySchemaQueryUtils=this.injector.get(U.A),this._window=this.injector.get(j.WINDOW_TOKEN),this._measurePerformanceService=this.injector.get(_.MeasurePerformanceService);const m=this.injector.get(_.UserInfo);this._entityDefaultValuesUrl=m.isSSP?"/ssp/rest/EntitySchemaService/GetEntityDefaultValues":"/rest/EntitySchemaService/GetEntityDefaultValues"}_buildSelectEsq(r,n,m){return this.getSchema().pipe((0,S.switchMap)(C=>this._entitySchemaQueryBuilder.build(C,r,n,m)),(0,S.map)(C=>(this._featureValues["DataSource-DisableRecordDeactivation"]!==!0&&(C.useRecordDeactivation=this.initialConfig.useRecordDeactivation),C.adminUnitRoleSources=this._getEsqAdminUnitRoleSources(),C)))}_getEsqAdminUnitRoleSources(){let r;const n=this.initialConfig.adminUnitRoleSources;return(0,b.isNumber)(n)?n:((0,b.isArray)(n)&&n.forEach(m=>{const C=l.eAdminUnitRoleSources[m];(0,b.isNumber)(C)&&(r=r|C)}),r)}_normalizeValue(r,n){switch(n){case s.DataValueType.Lookup:return r||null;case s.DataValueType.Date:case s.DataValueType.Time:case s.DataValueType.DateTime:return r instanceof Date?(0,s.encodeDate)(r):typeof r=="string"&&Date.parse(r)>0?`"${r}"`:r;default:return r}}_buildUpdateEsq(r,n){return this._entitySchemaQueryUtils.convertToEntityDataSourceParameters(r,!0).pipe((0,S.map)(m=>({updateQuery:new s.UpdateQuery(this._entitySchemaName),esqParameters:m})),(0,S.tap)(({updateQuery:m})=>{m.isForceUpdate=!!this.initialConfig.isForceUpdate,Object.keys(n).forEach(C=>{const O=this._findEntitySchemaColumn(C);if(!O)throw new Error(`Column ${C} not found`);const W=n[C];this._isEntityColumnValue(W)&&m.addColumn(O.name,this._normalizeValue(W,O.dataValueType),(0,e.D)(O.dataValueType))})}),(0,S.switchMap)(({updateQuery:m,esqParameters:C})=>this._entitySchemaQueryUtils.applyParameters(C,m)),(0,S.catchError)(m=>(0,y.throwError)(()=>m)))}_buildInsertEsq(r){const n=new s.InsertQuery(this._entitySchemaName);return Object.keys(r).forEach(m=>{const C=this._findEntitySchemaColumn(m);if(!C)throw new Error(`Column ${m} not found`);const O=r[m];this._isEntityColumnValue(O)&&n.addColumn(C.name,this._normalizeValue(O,C.dataValueType),(0,e.D)(C.dataValueType))}),n}_buildDeleteEsq(r){return this._entitySchemaQueryUtils.convertToEntityDataSourceParameters(r,!0).pipe((0,S.switchMap)(n=>{const m=new s.DeleteQuery(this._entitySchemaName);return this._entitySchemaQueryUtils.applyParameters(n,m)}))}_checkOwnAttributes(r){return this.getSchema().pipe((0,S.switchMap)(n=>{const m=n.attributes.filter(C=>C.attributeType!==s.DataSchemaAttributeType.OwnAttribute).filter(C=>!(0,b.isUndefined)(r[C.name]));return m.length!==0?(0,y.throwError)(()=>new Error(`Not valid attributes for this data source: ${m.map(C=>C.name).join(",")}`)):(0,y.of)(null)}))}_findEntitySchemaColumn(r){return this._entitySchema.columns.find(n=>n.name===r)}_isEntityColumnValue(r){const n=m=>typeof m=="object"&&(m===null||"value"in m);return typeof r=="string"||typeof r=="number"||typeof r=="boolean"||typeof r=="bigint"||r instanceof Date||n(r)}_parseDefaultValues(r,n){const m=new Map(r.attributes.map(C=>[C.name,C.dataValueType]));return n.reduce((C,O)=>{const{defaultValue:W,name:g}=O;if((0,b.isNil)(W.value))return C;if(W.displayValue)return{...C,[g]:W};const p=(0,_.parseJsonValue)(W.value,m.get(g));return{...C,[g]:p}},{})}_getDefaultValues(r){const n=`${this._entityDefaultValuesUrl}?entityName=${r}`;return this._httpClient.get(n).pipe((0,S.catchError)(m=>this._catchErrorResponse(m)),(0,S.map)(m=>m.GetEntityDefaultValuesResult),(0,S.mergeMap)(m=>this.getSchema().pipe((0,S.tap)(C=>{let O=this._window.defaultValueStorage;const W=m?.find(g=>g.name===C.primaryAttributeName)?.defaultValue?.value;if(O=O||{},W){const g=`${r}_${W}`;O[g]=m,this._window.defaultValueStorage=O}}),(0,S.map)(C=>this._parseDefaultValues(C,m)))))}_catchErrorResponse(r){return console.log(r),(0,y.of)({GetEntityDefaultValuesResult:[]})}_requestEntitySchemaColumnsInfo(r){const n=r.map(m=>m.attributePath);return this._entitySchemaService.getEntitySchemaColumnsInformationByPathsArray(this._entitySchema.uId,n).pipe((0,S.map)(m=>r.map(C=>({column:m[C.attributePath],config:C}))))}_getEntitySchemaForwardReferenceColumnsInfo(r){const n={name:this._entitySchemaName,loadLookupColumns:!1,forwardReferencePaths:r.map(m=>m.attributePath)};return this._entitySchemaRepository.getSchemes([n]).pipe((0,S.map)(()=>r.map(m=>{const C=m.attributePath.split("."),O=this._entitySchemaRepository.findEntitySchemaColumnByPath(this._entitySchemaName,C);return{column:new _.EntitySchemaColumn(O),config:m}})))}_createReferenceAttributes(r,n){return n.length===0?(0,y.of)(r):(0,y.of)(this._featureValues["DataSource-DontUseOneRequestForEntitySchemes"]).pipe((0,S.switchMap)(m=>m?this._requestEntitySchemaColumnsInfo(n):this._getEntitySchemaForwardReferenceColumnsInfo(n))).pipe((0,S.tap)(m=>{m.forEach(({column:C,config:O})=>{O.attributeType===s.DataSchemaAttributeType.AggregationAttribute&&O.aggregationConfig?.aggregationFunction===s.AggregationFunction.Count&&(C.dataValueType=s.DataValueType.Integer),r.addAttribute(C,O)})}),(0,S.map)(()=>r))}_createAttributesFromInitialConfig(r,n={}){const m=[];return Object.entries(n).forEach(([C,O])=>{const W=O;W.type===s.DataSchemaAttributeType.ForwardReferenceAttribute&&m.push({attributeName:C,attributeType:s.DataSchemaAttributeType.ForwardReferenceAttribute,attributePath:W.path}),W.type===s.DataSchemaAttributeType.AggregationAttribute&&m.push({attributeName:C,attributeType:s.DataSchemaAttributeType.AggregationAttribute,attributePath:W.path,aggregationConfig:W.aggregationConfig}),W.type===s.DataSchemaAttributeType.FunctionAttribute&&m.push({attributeName:C,attributeType:s.DataSchemaAttributeType.FunctionAttribute,attributePath:W.path,functionConfig:W.functionConfig})}),this._createReferenceAttributes(r,m).pipe((0,S.catchError)(C=>{const O=C.message&&C.toString(),W=new R.yz(this,O);return this._errors.push(W),m.forEach(g=>{this._errorReferenceAttributes.push(g)}),(0,y.of)(r)}))}_shouldSkipLoad(r){return r.some(n=>n.type===s.ModelParameterType.Never)}_setValidValuesForLookupAttributes(r,n){return Object.keys(n).forEach(m=>{const C=r.attributes.find(O=>O.name===m);C&&(C.dataValueType===s.DataValueType.Lookup||C.dataValueType===s.DataValueType.IMAGELOOKUP)&&n[m]===""&&(n[m]=null)}),n}_throwErrorResponse(r){const n=typeof r=="string"?r:r?.message;return(0,y.throwError)(()=>({success:!1,rowsAffected:0,errorInfo:n}))}_mapOperationResult(r){return{success:r.success,rowsAffected:r.rowsAffected}}get affectedAttributes(){return[...this._affectedAttributes]}get isAggregate(){return this.dataSchema?this.dataSchema.attributes.some(n=>n.isAggregate):!1}_getIsAffectedAttributeStored(r){return this._affectedAttributes.some(n=>n.path===r.path&&n.schemaName===r.schemaName)}_collectUsedAttributes(r){let n=r._getUsedColumns();n=n.filter(m=>!this._getIsAffectedAttributeStored(m)),this._affectedAttributes.push(...n)}_findErrorReferenceAttribute(r){const n=typeof r=="string"?r:r.name;return this._errorReferenceAttributes.find(m=>m.attributeName===n)}innerLoad(r,n,m){if(this.hasErrors){if(this.hasCriticalErrors)return(0,y.throwError)(()=>this.getLastError());if(r.length!==0&&r.every(O=>this._findErrorReferenceAttribute(O)!=null))return(0,y.throwError)(()=>this.getLastError())}return this._shouldSkipLoad(n)?(0,y.of)([]):this._buildSelectEsq(r,n,m||{}).pipe((0,S.tap)(C=>this._collectUsedAttributes(C)),(0,S.switchMap)(C=>this._queryExecutor.executeSelectQuery(C,{throttled:m?.throttled}).pipe(this._measurePerformanceService.measure$(`EntityDataSource.load.executeSelectQuery.${this.dataSourceName}`),(0,S.catchError)(()=>(0,y.throwError)(()=>{const O=this.injector.get(v.TranslateService);return new Error(O.instant("BaseViewModel.LoadingModelErrorMessage"))})))),(0,S.map)(C=>C),(0,S.mergeMap)(C=>this.getSchema().pipe((0,S.map)(O=>(O.attributes&&C.forEach(W=>{this._setValidValuesForLookupAttributes(O,W)}),C)))))}innerSave(r,n){return this.hasCriticalErrors?(0,y.throwError)(()=>this.getLastError()):this._checkOwnAttributes(n).pipe((0,S.switchMap)(()=>this._buildUpdateEsq(r,n)),(0,S.switchMap)(m=>this._queryExecutor.executeUpdateQuery(m)),(0,S.map)(m=>this._mapOperationResult(m)),(0,S.catchError)(m=>this._throwErrorResponse(m)))}innerInsert(r){return this.hasCriticalErrors?(0,y.throwError)(()=>this.getLastError()):this._checkOwnAttributes(r).pipe((0,S.map)(()=>this._buildInsertEsq(r)),(0,S.switchMap)(n=>(0,y.forkJoin)({response:this._queryExecutor.executeInsertQuery(n),dataSchema:this.getSchema()})),(0,S.map)(({response:n,dataSchema:m})=>({...this._mapOperationResult(n),primaryAttributes:[{[m.primaryAttributeName]:n.id}]})),(0,S.catchError)(n=>this._throwErrorResponse(n)))}innerDelete(r){return this.hasCriticalErrors?(0,y.throwError)(()=>this.getLastError()):this._buildDeleteEsq(r).pipe((0,S.switchMap)(n=>this._queryExecutor.executeDeleteQuery(n)),(0,S.map)(n=>this._mapOperationResult(n)),(0,S.catchError)(n=>this._throwErrorResponse(n)))}innerGetSchema(){return this.hasCriticalErrors?(0,y.throwError)(()=>this.getLastError()):this.dataSchemaRepository.get(this._entitySchemaName).pipe((0,S.map)(r=>new x.i(r)),(0,S.switchMap)(r=>this._createAttributesFromInitialConfig(r,this.initialConfig.attributes)),(0,S.tap)(r=>{const n=this._getDefaultValues(this._entitySchemaName).pipe((0,S.shareReplay)({bufferSize:1,refCount:!0}));r.setAttributesDefaultValue(n)}),(0,S.map)(r=>r.build()))}innerGetLookupDataSchema(r){if(this.hasCriticalErrors)return(0,y.throwError)(()=>this.getLastError());const m=r.split(".")[0],C=this._findEntitySchemaColumn(m);return C?C.dataValueType!==s.DataValueType.Lookup?(0,y.throwError)(()=>new Error(`DataValueType for column '${m}' isn't lookup`)):C.referenceSchemaName?this.dataSchemaRepository.get(C.referenceSchemaName):(0,y.throwError)(()=>new Error(`referenceSchemaName for column '${m}' is absent`)):(0,y.throwError)(()=>new Error(`Can't find column with name '${m}'`))}innerGetDefaultValues(){return this.hasCriticalErrors?(0,y.throwError)(()=>this.getLastError()):this._getDefaultValues(this._entitySchemaName)}innerCanDelete(r){return this.hasCriticalErrors?(0,y.of)({result:!1}):this._rightsService.getCanDelete({schemaName:this.initialConfig.entitySchemaName,primaryColumnValue:r.primaryColumnValue})}innerCanCreate(r){if(this.hasCriticalErrors)return(0,y.of)({result:!1});const n={isNew:!0,schemaName:this.initialConfig.entitySchemaName};return this._rightsService.getCanEdit(n)}innerCanEdit(r){if(this.hasCriticalErrors)return(0,y.of)({result:!1});const n={primaryColumnValue:r.primaryColumnValue,isNew:!1,schemaName:this.initialConfig.entitySchemaName};return this._rightsService.getCanEdit(n)}getEmptySchema(){return this._entitySchemaName?new f.I({name:this._entitySchemaName}):super.getEmptySchema()}init(r,n){return super.init(r,n).pipe((0,S.mergeMap)(m=>{if(!this.initialConfig.entitySchemaName){const C=new D(this);return this._errors.push(C),(0,y.throwError)(()=>C)}return(0,y.of)(m)}),(0,S.tap)(()=>this._entitySchemaName=this.initialConfig.entitySchemaName),(0,S.mergeMap)(m=>this._entitySchemaRepository.getSchemaByName(this.initialConfig.entitySchemaName).pipe((0,S.tap)(C=>this._entitySchema=C),(0,S.catchError)(()=>{this._entitySchema=new _.EntitySchema,this._entitySchema.name=this._entitySchemaName,this._entitySchema.columns=[];const C=new B(this,this._entitySchemaName);return this._errors.push(C),(0,y.throwError)(()=>C)}),(0,S.map)(()=>m))))}getOwnLoadParameters(){return this.initialConfig?.loadParameters}getAllowCopyingRecords(){return this.initialConfig?.allowCopyingRecords}}},57117:(J,$,a)=>{a.d($,{DI:()=>L.DI,dY:()=>v.dY,me:()=>R.m,g9:()=>y.g,tq:()=>L.tq,Vc:()=>S.V,Y7:()=>L.Y7,LT:()=>x.L,DC:()=>d,kr:()=>s.kr,wY:()=>s.wY,IO:()=>c.I,wG:()=>c.w,J_:()=>j.J,Mp:()=>L.Mp,Ts:()=>L.Ts,SP:()=>L.SP,yR:()=>v.yR,LZ:()=>o.L,Mf:()=>v.Mf,_h:()=>u._,mv:()=>A.m,yf:()=>l,iu:()=>M.iu,f:()=>M.f,OL:()=>M.OL,aA:()=>s.aA,$E:()=>s.$E,vx:()=>s.vx,d4:()=>s.d4,ww:()=>s.ww,d1:()=>s.d1,yz:()=>v.yz,mj:()=>L.mj,X4:()=>B.X,Al:()=>s.Al,bX:()=>_.b,Q6:()=>b.Q,L9:()=>s.L9,DR:()=>b.D});var s=a(37015),c=a(90169),M=a(24089),I=a(38495),F=a(96590),L=a(77325),A=a(25060),x=a(81680);const d=F.FactoryProvider.create({token:x.L,mappings:[{predicate:I.DataSchemaAttributeType.AggregationAttribute,injectable:L.Mp},{predicate:I.DataSchemaAttributeType.FunctionAttribute,injectable:L.SP}],default:{injectable:L.Ts}}),l=F.FactoryProvider.create({token:A.m,mappings:[{predicate:D=>D.type==="aggregation",injectable:M.CW},{predicate:D=>D.type==="function"&&D.functionConfig?.type==="aggregation",injectable:M.g$},{predicate:D=>D.type==="function"&&D.functionConfig?.type==="datePart",injectable:M.hs}],default:{injectable:M.WY}});var v=a(28930),j=a(99774),o=a(98594),u=a(71642),_=a(24285),b=a(64581),y=a(7896),S=a(29812),R=a(63801),B=a(60928)},60928:(J,$,a)=>{a.d($,{X:()=>v});var s=a(38495),c=a(21018),M=a(62278),I=a(11848),F=a(49159),L=a(10763),A=a(28930),x=a(52701),d=a(36688),l=a(54665);class v extends A.dY{constructor(o,u){super(o,u),this.dataSourceName=o,this._injector=u,this.type=c.PAGE_PARAMETERS_DATA_SOURCE_TYPE_NAME,this._schemaParametersStore=this._injector.get(L.B),this._lookupDataLoadService=this._injector.get(l.m),this._featureValues=this._injector.get(c.FEATURE_VALUES),this._featureValues.DisableCommunicationBetweenSchemas||this._subscribeParametersChanged()}_subscribeParametersChanged(){this._schemaParametersStore.changedValues$.subscribe(o=>{F.q.instance.notify({modelId:(0,s.generateGuid)(),dataSchemaName:this.dataSchema.name,type:I.MQ.Update,payload:{primaryAttributesValues:null,changedAttributes:Object.keys(o)}})})}_getCanSuccessfullyExecuteOperationResult(){return(0,M.of)({result:!0})}_fillLookupValues(o,u,_){Object.entries(_).forEach(([b,y])=>{(u[b]||[]).forEach(R=>{o[R]={value:b,displayValue:y}})})}_fillSchemaParameterValueNameMap(o,u,_,b){const y=b;let S=o[u];S||(S={},o[u]=S);let R=S[y];R||(R=[],S[y]=R),R.push(_)}_fillSchemaNamePrimaryValuesMap(o,u,_){const b=_;let y=o[u];y||(y=[],o[u]=y),y.push(b)}_isLookupValue(o){return!!o?.value}_shouldFillSchemaLookupValueMaps(o,u){return o&&u&&u.referenceSchemaName&&!this._isLookupValue(o)}_load(o,u){const _={},b=this._schemaParametersStore.values,y=u.attributes,S={},R={};for(const D of o){const T=b[D],U=y.find(f=>f.name===D);if(this._shouldFillSchemaLookupValueMaps(T,U)){this._fillSchemaNamePrimaryValuesMap(R,U.referenceSchemaName,T),this._fillSchemaParameterValueNameMap(S,U.referenceSchemaName,D,T);continue}_[D]=T??null}return Object.keys(R).length===0?(0,M.of)([_]):this._lookupDataLoadService.load(R).pipe((0,M.map)(D=>{for(const[T,U]of Object.entries(D)){const f=S[T];this._fillLookupValues(_,f,U)}return[_]}))}_getValuesForStore(o){const u={};return Object.entries(o).forEach(([_,b])=>{const y=this.initialConfig.parameters[_];if(!y)return;(0,c.getDataValueTypeByName)(y.dataValueTypeName)===s.DataValueType.Lookup?u[_]=b?.value:u[_]=b}),u}innerLoad(o,u,_){return this.getSchema().pipe((0,M.switchMap)(b=>this._load(o,b)))}innerSave(o,u){const _=this._getValuesForStore(u);return this._schemaParametersStore.setValues(_),(0,M.of)({success:!0,rowsAffected:1})}innerInsert(o){const u=this._getValuesForStore(o);return this._schemaParametersStore.setValues(u),(0,M.of)({success:!0,rowsAffected:1,primaryAttributes:[]})}innerDelete(o){return(0,M.of)({success:!0,rowsAffected:1})}innerGetSchema(){const o=[],u=this.initialConfig.parameters;return u&&Object.entries(u).forEach(([_,b])=>{const y=new d.w({name:_,caption:b.caption,dataValueType:(0,c.getDataValueTypeByName)(b.dataValueTypeName),attributeType:s.DataSchemaAttributeType.OwnAttribute,path:_,isRequired:!!b.isRequired,referenceSchemaName:b.referenceSchemaName,isMasked:!1,isFormatValidated:!0});y.addDefaultValidators(),o.push(y)}),(0,M.of)(new x.I({name:this.initialConfig.schemaName,type:s.DataSchemaType.ClientUnit,attributes:o}))}innerGetLookupDataSchema(o){return(0,M.of)(null)}innerGetDefaultValues(){return(0,M.of)({})}innerCanEdit(o){return this._getCanSuccessfullyExecuteOperationResult()}innerCanDelete(o){return this._getCanSuccessfullyExecuteOperationResult()}innerCanCreate(o){return this._getCanSuccessfullyExecuteOperationResult()}}},77325:(J,$,a)=>{a.d($,{DI:()=>s,tq:()=>l,Y7:()=>v,Mp:()=>M,Ts:()=>I,SP:()=>F,mj:()=>L.m});class s{convert(o){const{name:u,path:_,caption:b,dataValueType:y}=o||{};return{name:u,path:_||u,caption:b,dataValueType:y}}}var c=a(59131);class M extends s{convert(o){const{aggregationConfig:u}=o||{};return{...super.convert(o),type:"aggregation",aggregationConfig:{filter:u?.filter,aggregationFunction:u?.aggregationFunction,sortByColumn:u?.sortByColumn,sortByDirection:u?.sortByDirection}}}static{this.\u0275fac=(()=>{let o;return function(_){return(o||(o=c.\u0275\u0275getInheritedFactory(M)))(_||M)}})()}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:M,factory:M.\u0275fac,providedIn:"root"})}}class I extends s{convert(o){return{...super.convert(o),type:"default"}}static{this.\u0275fac=(()=>{let o;return function(_){return(o||(o=c.\u0275\u0275getInheritedFactory(I)))(_||I)}})()}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:I,factory:I.\u0275fac,providedIn:"root"})}}class F extends s{convert(o){const{functionConfig:u}=o||{};return{...super.convert(o),type:"function",functionConfig:u}}static{this.\u0275fac=(()=>{let o;return function(_){return(o||(o=c.\u0275\u0275getInheritedFactory(F)))(_||F)}})()}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:F,factory:F.\u0275fac,providedIn:"root"})}}var L=a(54665),A=a(21018),x=a(62278),d=a(37015);class l{constructor(o){this._intentStatuses=d.d4,this._intentModes=d.$E,this._columnLookupValuesService=o.get(A.ColumnLookupValuesService)}convertToDataSourceModel(o){return(0,x.combineLatest)([this._columnLookupValuesService.getColumnLookupValues(d.ww),this._columnLookupValuesService.getColumnLookupValues(d.vx),(0,d.L9)()]).pipe((0,x.map)(([u,_,b])=>{const y=this._intentStatuses.get(o.Status),S=u.find(T=>T.value===y),R=this._intentModes.get(o.Mode)??this._intentModes.get(d.aA.Chat),B=_.find(T=>T.value===R),D=b.find(T=>T.displayValue===o.Type);return{Id:o.UId,Code:o.Code,Description:o.Description,Prompt:o.Prompt,Type:D,Name:o.Title,Status:S,PackageUId:o.PackageUId,Mode:B}}))}convertToModel(o){const u={};return Object.entries(o).forEach(([_,b])=>{_==="Name"&&(_="Title"),_==="Id"&&(_="UId"),_==="Status"&&(b=[...this._intentStatuses].filter(([,y])=>y===o.Status.value).map(([y])=>y).shift()),_==="Mode"&&(b=[...this._intentModes].filter(([,y])=>y===o.Mode.value).map(([y])=>y).shift()),_==="Type"&&(b=Object.values(d.d1).filter(y=>y.value===o.Type.value).map(y=>y.displayValue).shift()),u[_]=b}),u}static{this.\u0275fac=function(u){return new(u||l)(c.\u0275\u0275inject(c.Injector))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac,providedIn:"root"})}}class v{convertToDataSourceModel(o){return(0,x.of)({Id:o.UId,Intent:o.Intent,Code:o.Code,Name:o.Name,Description:o.Description,SourceCollection:o.SourceCollection,DataValueTypeUId:o.DataValueTypeUId})}convertToModel(o){const u={};return Object.entries(o).forEach(([_,b])=>{_==="Id"&&(_="UId"),u[_]=b}),u}static{this.\u0275fac=function(u){return new(u||v)}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac,providedIn:"root"})}}},54665:(J,$,a)=>{a.d($,{m:()=>v});var s=a(38495),c=a.n(s),M=a(35266),I=a.n(M),F=a(36486),L=a.n(F),A=a(59131),x=a.n(A);const d="PrimaryValue",l="DisplayValue";class v{constructor(o){this._queryExecutor=o}_getInFilter(o){const u=new s.MacrosFunctionExpression({macrosType:s.QueryMacrosType.PrimaryColumn});return new s.InFilter(s.ComparisonType.Equal,u,o.map(_=>new s.ParameterExpression({value:_})))}_getEsq(o,u){const _=new s.EntitySchemaQuery(o);_.addMacrosFunctionColumn(s.QueryMacrosType.PrimaryColumn,d),_.addMacrosFunctionColumn(s.QueryMacrosType.PrimaryDisplayColumn,l);const b=this._getInFilter(u);return _.filters.add(b),_}_getSchemaLookupData(o,u){const _={};for(let b=0;b<u.length;b++){const y=u[b],[S,R]=o[b];_[S]={};for(const B of R){const D=y.find(T=>T[d]===B);_[S][B]=D?D[l]:null}}return _}load(o){const u=Object.entries(o),_=u.map(([b,y])=>this._getEsq(b,y));return this._queryExecutor.executeBatchSelectQuery(_).pipe((0,F.map)(b=>this._getSchemaLookupData(u,b)))}static{this.\u0275fac=function(u){return new(u||v)(A.\u0275\u0275inject(M.QueryExecutor))}}static{this.\u0275prov=A.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac,providedIn:"root"})}}},81680:(J,$,a)=>{a.d($,{L:()=>M});var s=a(59131),c=a.n(s);const M=new s.InjectionToken("A factory of data schema to data source attribute converter")},25060:(J,$,a)=>{a.d($,{m:()=>M});var s=a(59131),c=a.n(s);const M=new s.InjectionToken("A factory of entity schema column appender")},24285:(J,$,a)=>{a.d($,{b:()=>c});var s=a(28930);class c extends s.dY{constructor(){super(...arguments),this.type="crt.WebServiceDataSource"}innerLoad(I,F,L){throw new Error("Method not implemented.")}innerSave(I,F){throw new Error("Method not implemented.")}innerInsert(I){throw new Error("Method not implemented.")}innerDelete(I){throw new Error("Method not implemented.")}innerGetSchema(){throw new Error("Method not implemented.")}innerGetLookupDataSchema(I){throw new Error("Method not implemented.")}innerGetDefaultValues(){throw new Error("Method not implemented.")}innerCanDelete(I){throw new Error("Method not implemented.")}innerCanEdit(I){throw new Error("Method not implemented.")}innerCanCreate(I){throw new Error("Method not implemented.")}}},11848:(J,$,a)=>{a.d($,{DF:()=>s,MQ:()=>c,iL:()=>M,F1:()=>A.F,MJ:()=>I,I4:()=>L,HQ:()=>F});var s;(function(x){x[x.None=0]="None",x[x.Count=1]="Count",x[x.Sum=2]="Sum",x[x.Avg=3]="Avg",x[x.Min=4]="Min",x[x.Max=5]="Max",x[x.TopOne=6]="TopOne"})(s||(s={}));var c;(function(x){x.Create="create",x.Update="update",x.Delete="delete"})(c||(c={}));var M;(function(x){x.Begin="begin",x.End="end"})(M||(M={}));var I;(function(x){x.AllSections="BaseGridSectionTemplate",x.AllCards="BasePageTemplate",x.AllMiniCards="BaseMiniPageTemplate",x.AllLookupSelectionWindows="BaseLookupPageTemplate"})(I||(I={}));var F;(function(x){x.Paused="Paused",x.Active="Active"})(F||(F={}));var L;(function(x){x.DebouncingBusinessRules="DebouncingBusinessRules",x.RunningBusinessRules="RunningBusinessRules",x.ProcessingAttributeChangeRequest="ProcessingAttributeChangeRequest",x.AttributeLoading="AttributeLoading"})(L||(L={}));var A=a(41821)},41821:(J,$,a)=>{a.d($,{F:()=>s});var s;(function(c){c.ForTheSelectedPage="ForTheSelectedPage",c.RegardlessOfThePage="RegardlessOfThePage",c.ForTheSelectedRecords="ForTheSelectedRecords"})(s||(s={}))},82757:(J,$,a)=>{a.d($,{v:()=>c,p:()=>M});var s=a(59131);class c{static{this.\u0275fac=function(L){return new(L||c)}}static{this.\u0275prov=s.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac})}}const M=new s.InjectionToken("A factory of expression interpreter")},42745:(J,$,a)=>{a.d($,{LZ:()=>L,q:()=>x,a:()=>v,Bg:()=>l,n8:()=>n,Cw:()=>t,T7:()=>e,U8:()=>P,Fj:()=>f,XW:()=>O,qD:()=>C,jE:()=>R,c7:()=>D,Xd:()=>B,$9:()=>b,iW:()=>_,gK:()=>j,_:()=>U,JO:()=>T,Qu:()=>u,V5:()=>r,S5:()=>i});var s=a(73308),c=a(5960),M=a(59131),I=a(38495),F=a(31996);let L=class extends I.BaseRequestHandler{constructor(g){super(),this._ngZone=g}_validateRequest(g){const{$context:p,collectionAttributeName:V}=g;if(!p)throw new Error('The "$context" request property is not specified.');if(!V)throw new Error('The "collectionAttributeName" request property is not specified.');const N=p._attributeConfigs[V];if(!(("viewModelConfig"in N||"viewModelName"in N)&&N.isCollection))throw new Error(`There is no view model collection for the specified "${V}" attribute.`)}_canCancelPrimaryDataChanges(g,p){var V=this;return(0,s.A)(function*(){if(!p)return!0;const N=yield V._getPrimaryAttributeValue(g);return p.includes(N)})()}_getPrimaryAttributeValue(g){return(0,s.A)(function*(){const p=yield g.getPrimaryModelName(),V=yield g.getPrimaryDataSchema(),N=g.getViewModelAttributePath(p,V.primaryAttributeName);return g[N]})()}_resetFormApiModel(g){this._ngZone.run((0,s.A)(function*(){const p=yield g.getPrimaryModelName();g.getBoundDataSourceAttributeControls(p)?.forEach(N=>{(0,F.og)(N)})}))}_cancelPrimaryDataChanges(g){var p=this;return(0,s.A)(function*(){try{const V={type:"crt.CancelPrimaryDataChangesRequest",$context:g};return yield p.handlerChain.process(V)}catch(V){return[{success:!1,errorInfo:V?.message}]}})()}handle(g){var p=this;return(0,s.A)(function*(){p._validateRequest(g);const{$context:V,collectionAttributeName:N,primaryAttributeValues:h}=g??{},E=yield V.attributes[N],w=E.getChangedItems(),K=[];for(const q of w)(yield p._canCancelPrimaryDataChanges(q,h))&&K.push(p._cancelPrimaryDataChanges(q));for(const q of E)w.includes(q)||p._resetFormApiModel(q);return(yield Promise.all(K)).flat()})()}};L=(0,c.__decorate)([(0,I.CrtRequestHandler)({type:"crt.CancelCollectionPrimaryDataHandler",requestType:"crt.CancelCollectionPrimaryDataChangesRequest"}),(0,c.__metadata)("design:paramtypes",[M.NgZone])],L);var A=a(21018);let x=class extends I.BaseRequestHandler{_validateRequest(g){const{$context:p}=g;if(!p)throw new Error('The "$context" request property is not specified.')}_cancelCurrentDataChanges(g){var p=this;return(0,s.A)(function*(){const V=g.getPrimaryModelMode();if(V===A.ModelMode.Create){const N=yield g.getPrimaryModelName();return g.getModelByName(N).getDataSource().scope===I.DataSourceScope.ViewElement&&g.markPrimaryModelFor(A.ModelMode.Delete),Promise.resolve({success:!0})}return V===A.ModelMode.Delete&&g.markPrimaryModelFor(A.ModelMode.Update),(yield g.IsChanged)?p._reloadCurrentDataChanges(g):Promise.resolve({success:!0})})()}_reloadCurrentDataChanges(g){var p=this;return(0,s.A)(function*(){try{return yield p._loadPrimaryData(g),yield p._onSuccessCancelPrimaryData(g),{success:!0}}catch(V){const N=V?.message;return p._onFailCancelPrimaryData(g,N),{success:!1,errorInfo:N}}})()}_loadPrimaryData(g){var p=this;return(0,s.A)(function*(){const V=yield g.getPrimaryModelName(),N=yield g.getPrimaryDataSchema(),h=g.getViewModelAttributePath(V,N.primaryAttributeName);yield p.handlerChain.process({type:"crt.LoadDataRequest",$context:g,dataSourceName:V,parameters:[{type:I.ModelParameterType.PrimaryColumnValue,value:h}]})})()}_onFailCancelPrimaryData(g,p){g.formApiModel.setErrors({cancel:{message:p}})}_onSuccessCancelPrimaryData(g){return(0,s.A)(function*(){const p=yield g.getPrimaryModelName();g.getBoundDataSourceAttributeControls(p)?.forEach(N=>{(0,F.og)(N)})})()}_cancelNestedDataChanges(g){var p=this;return(0,s.A)(function*(){const V=[],N=Object.entries(g._attributeConfigs);for(const[E,w]of N)if(!(!("viewModelConfig"in w)&&!("viewModelName"in w)))if(w.isCollection)V.push(p._cancelPrimaryDataSafely(()=>p._cancelCollectionPrimaryDataChanges(g,E)));else{const K=yield g[E];V.push(p._cancelPrimaryDataSafely(()=>p._cancelPrimaryDataChanges(K)))}return(yield Promise.all(V)).flat()})()}_cancelPrimaryDataChanges(g){var p=this;return(0,s.A)(function*(){const V={type:"crt.CancelPrimaryDataChangesRequest",$context:g};return yield p.handlerChain.process(V)})()}_cancelCollectionPrimaryDataChanges(g,p){var V=this;return(0,s.A)(function*(){const N={type:"crt.CancelCollectionPrimaryDataChangesRequest",$context:g,collectionAttributeName:p};return yield V.handlerChain.process(N)})()}_cancelPrimaryDataSafely(g){return g().catch(p=>[{success:!1,errorInfo:p?.message}])}handle(g){var p=this;return(0,s.A)(function*(){p._validateRequest(g);const V=g.$context,N=yield p._cancelNestedDataChanges(V);return[yield p._cancelCurrentDataChanges(V),...N]})()}};x=(0,c.__decorate)([(0,I.CrtRequestHandler)({type:"crt.CancelPrimaryDataChangesHandler",requestType:"crt.CancelPrimaryDataChangesRequest"})],x);var d=a(62278);let l=class extends I.BaseRequest{constructor(){super(...arguments),this.type="crt.ChangeViewModelAttributeValueRequest"}};l=(0,c.__decorate)([(0,I.CrtRequest)({type:"crt.ChangeViewModelAttributeValueRequest"})],l);let v=class extends I.BaseRequestHandler{handle(g){return(0,s.A)(function*(){const{$context:p,attributeName:V,attributeValue:N}=g||{};if(!p||!V)return;const h=p;return yield(0,d.lastValueFrom)(h.setValue({[V]:N}),{defaultValue:null}),N})()}};v=(0,c.__decorate)([(0,I.CrtRequestHandler)({type:"crt.ChangeViewModelAttributeValueHandler",requestType:"crt.ChangeViewModelAttributeValueRequest"})],v);let j=class extends I.BaseRequestHandler{_validateRequest(g){const{$context:p,collectionAttributeName:V}=g;if(!p)throw new Error('The "$context" request property is not specified.');if(!V)throw new Error('The "collectionAttributeName" request property is not specified.');const N=p._attributeConfigs[V];if(!(("viewModelConfig"in N||"viewModelName"in N)&&N.isCollection))throw new Error(`There is no view model collection for the specified "${V}" attribute.`)}_canSavePrimaryData(g,p){var V=this;return(0,s.A)(function*(){if(!p)return!0;const N=yield V._getPrimaryAttributeValue(g);return p.includes(N)})()}_getPrimaryAttributeValue(g){return(0,s.A)(function*(){const p=yield g.getPrimaryModelName(),V=yield g.getPrimaryDataSchema(),N=g.getViewModelAttributePath(p,V.primaryAttributeName);return g[N]})()}_savePrimaryData(g){var p=this;return(0,s.A)(function*(){try{const V={type:"crt.SavePrimaryDataRequest",$context:g};return yield p.handlerChain.process(V)}catch(V){return[{success:!1,rowsAffected:0,errorInfo:V?.message}]}})()}handle(g){var p=this;return(0,s.A)(function*(){p._validateRequest(g);const{$context:V,collectionAttributeName:N,primaryAttributeValues:h}=g??{},w=V.attributes[N].getChangedItems(),K=[];for(const z of w)(yield p._canSavePrimaryData(z,h))&&K.push(yield p._savePrimaryData(z));return K.flat()})()}};j=(0,c.__decorate)([(0,I.CrtRequestHandler)({type:"crt.SaveCollectionPrimaryDataHandler",requestType:"crt.SaveCollectionPrimaryDataRequest"})],j);var o=a(37644);let u=class extends I.BaseRequestHandler{constructor(g,p,V){super(),this._baseViewModelProcessValidationResultService=g,this.modelSaveOrderSorterService=p,this._featureValues=V}_validateRequest(g){const{$context:p}=g;if(!p)throw new Error('The "$context" request property is not specified.')}_saveModel(g,p){var V=this;return(0,s.A)(function*(){const N=g.dataSchemas[p],h=g.getViewModelAttributePath(p,N.primaryAttributeName);try{const E=yield V._saveData(g,p,h);return E.success&&V._onSuccessSaveRootData(g,p,E),E}catch(E){const w=E?.message;return V._createFailedSaveResult(w)}})()}_validateModel(g,p){var V=this;return(0,s.A)(function*(){if(!(yield g.isValid(p))){const h=yield g.validate(p),E=yield V._baseViewModelProcessValidationResultService.getValidationErrorMessage(g,h);return V._createFailedSaveResult(E)}return null})()}_getModels(g){var p=this;return(0,s.A)(function*(){const V=yield g.getPrimaryModelName();let N=(0,F.$9)(g);return N=N.filter(h=>g.getModelMode(h)!==A.ModelMode.Init),V&&!N.includes(V)&&N.unshift(V),p._featureValues.AllowMultipleDataSources&&(N=p.modelSaveOrderSorterService.sort(g,N)),N})()}_canSaveDataResult(g,p){var V=this;return(0,s.A)(function*(){const N=g.dataSchemas[p],h=g.getViewModelAttributePath(p,N.primaryAttributeName),E=yield V._canSaveData(g,p,h);if(E&&!E?.result)return V._createFailedSaveResult(E.message)})()}_checkPdsGroupValidationResults(g,p){var V=this;return(0,s.A)(function*(){const N=yield Promise.all(p.map(E=>V._validateModel(g,E)));if(N.some(E=>E&&!E.success))return N;const h=yield Promise.all(p.map(E=>V._canSaveDataResult(g,E)));return h.some(E=>E&&!E.success)?h:[]})()}_saveModelChanges(g,p){var V=this;return(0,s.A)(function*(){let N;return(yield V._shouldSkipUnchangedDependentPageModel(g,p))||(N=yield V._saveModel(g,p)),N})()}_saveRootData(g){var p=this;return(0,s.A)(function*(){const V=yield p._getModels(g),N=yield g.getPrimaryModelName();let h=[N,...V.filter(z=>(0,F.V0)(g._getModelDependencies(z),N))];p._featureValues.AllowMultipleDataSources||(h=[]);const E=V.filter(z=>!h.includes(z));let w=yield p._checkPdsGroupValidationResults(g,h);if(!w.length)for(const z of h)w.push(yield p._saveModelChanges(g,z));for(const z of E){const q=yield p._validateModel(g,z),k=yield p._canSaveDataResult(g,z);!q&&!k?w.push(yield p._saveModelChanges(g,z)):w.push(q||k)}w=w.filter(Boolean);const K=w.filter(z=>!z.success).map(z=>z.errorInfo);return K.length&&p._onFailSaveRootData(g,K.join(", ")),w})()}_shouldSkipUnchangedDependentPageModel(g,p){var V=this;return(0,s.A)(function*(){if(!V._featureValues.AllowMultipleDataSources)return!1;const N=g.getModelByName(p);if(N?.getDataSource()?.isForceUpdateUnchangedData)return!1;const E=yield g.getPrimaryModelName(),w=(0,F.V0)(g._getModelDependencies(p),E),K=N?._isChanged;return w&&!K})()}_canSaveData(g,p,V){return(0,s.A)(function*(){const h={primaryColumnValue:yield g[V]};return g.canSave(p,h)})()}_saveData(g,p,V){var N=this;return(0,s.A)(function*(){const h={type:"crt.SaveDataRequest",$context:g,parameters:[{type:I.ModelParameterType.PrimaryColumnValue,value:V}],dataSourceName:p};return yield N.handlerChain.process(h)})()}_onFailSaveRootData(g,p){g.formApiModel.setErrors({save:{message:p}})}_updateAttributesOnSaveResult(g,p,V){if(V?.primaryAttributes?.length)for(const N of V.primaryAttributes)for(const[h,E]of Object.entries(N)){const w=g.getViewModelAttributePath(p,h);g[w]=E}}_onSuccessSaveRootData(g,p,V){this._updateAttributesOnSaveResult(g,p,V),g.getBoundDataSourceAttributeControls(p)?.forEach(h=>{(0,F.og)(h)})}_saveNestedData(g,p){var V=this;return(0,s.A)(function*(){const N=[],h=Object.entries(g._attributeConfigs);for(const[w,K]of h)if(!(!("viewModelConfig"in K)&&!("viewModelName"in K)))if(K.isCollection)N.push(V._saveDataSafely(()=>V._saveInnerViewModelCollection(g,w,p)));else{const z=yield g[w];N.push(V._saveDataSafely(()=>V._saveInnerViewModel(z)))}return(yield Promise.all(N)).flat()})()}_saveInnerViewModel(g){var p=this;return(0,s.A)(function*(){const V={type:"crt.SavePrimaryDataRequest",$context:g};return yield p.handlerChain.process(V)})()}_saveInnerViewModelCollection(g,p,V){var N=this;return(0,s.A)(function*(){const h={type:"crt.SaveCollectionPrimaryDataRequest",$context:g,collectionAttributeName:p,scopes:V};return yield N.handlerChain.process(h)})()}_saveDataSafely(g){return g().catch(p=>[this._createFailedSaveResult(p?.message)])}_createFailedSaveResult(g){return{success:!1,rowsAffected:0,errorInfo:g}}handle(g){var p=this;return(0,s.A)(function*(){p._validateRequest(g);const V=g.$context,N=yield p._saveRootData(V);if(N.some(E=>!E.success))return N;const h=yield p._saveNestedData(V,g.scopes);return[...N,...h]})()}};u=(0,c.__decorate)([(0,I.CrtRequestHandler)({type:"crt.SavePrimaryDataHandler",requestType:"crt.SavePrimaryDataRequest"}),(0,c.__param)(2,(0,M.Inject)(A.FEATURE_VALUES)),(0,c.__param)(2,(0,I.CrtInject)(A.FEATURE_VALUES)),(0,c.__metadata)("design:paramtypes",[o.iQ,o.Xz,A.FeatureValues])],u);let _=class extends I.BaseRequest{};_=(0,c.__decorate)([(0,I.CrtRequest)({type:"crt.LoadLookupListRequest"})],_);let b=class extends I.BaseRequestHandler{handle(g){const p={control:g.valueAttributeName,items:g.itemsAttributeName},V=g.filterValue??null,N=[{type:I.ModelParameterType.PrimaryDisplayValueFilter,value:"@requestPayload.lookupFilterValue"},...g.parameters||[]],h={...g.payload,lookupFilterValue:V};return g.$context.loadLookupList(p,N,h),Promise.resolve()}};b=(0,c.__decorate)([(0,I.CrtRequestHandler)({type:"crt.LoadLookupListHandler",requestType:"crt.LoadLookupListRequest"})],b);var y=a(79772),S=a(32740);let R=class extends I.BaseRequestHandler{constructor(g,p){super(),this._translateService=g,this._featureValues=p}_isDynamicDS(g){const p=g.config||{};return!!(p.dataSourceConfig&&p.attributeName)}_loadDynamicDS(g){const p=g.$context,V=g.config;return(0,d.lastValueFrom)(p.load(V),{defaultValue:null})}_load(g){if(!g.dataSourceName)return;const p=g.$context;let V=g.parameters;V=this._addPrimaryDisplayValueFilterIfNeed(g,V);const N=g.config;return this._trySubscribeToLoadedData(g),(0,d.lastValueFrom)(p.load(g.dataSourceName,V,N),{defaultValue:null})}_trySubscribeToLoadedData(g){if(this._featureValues[S.kP]||!g?.showSuccessMessage)return;const p=g.$context,V=p._modelsMap.get(g.dataSourceName),N=V.affectedAttributes.map(z=>z.path),E=[...p._getDependentModelsForLoad(V,N),g.dataSourceName],w=new Set,K=p._modelLoaded$.subscribe(z=>{if(E.includes(z)&&w.add(z),w.size===E.length){K.unsubscribe();const q={$context:g.$context,type:"crt.NotificationRequest",message:this._translateService.instant("LoadDataRequest.SuccessMessage")};this.handlerChain.process(q)}})}_addPrimaryDisplayValueFilterIfNeed(g,p){return g.primaryDisplayFilterValue?(p=p||[],[...p,{type:I.ModelParameterType.PrimaryDisplayValueFilter,value:g.primaryDisplayFilterValue}]):p}handle(g){if(!g.$context)throw new Error("Property '$context' should be specified");return this._isDynamicDS(g)?this._loadDynamicDS(g):this._load(g)}};R=(0,c.__decorate)([(0,I.CrtRequestHandler)({type:"crt.LoadDataSourceHandler",requestType:"crt.LoadDataRequest"}),(0,c.__param)(1,(0,M.Inject)(A.FEATURE_VALUES)),(0,c.__param)(1,(0,I.CrtInject)(A.FEATURE_VALUES)),(0,c.__metadata)("design:paramtypes",[y.TranslateService,A.FeatureValues])],R);let B=class extends I.DataRequest{};B=(0,c.__decorate)([(0,I.CrtRequest)({type:"crt.LoadDefaultValuesRequest"})],B);let D=class extends I.BaseRequestHandler{handle(g){const p=g.$context;return(0,d.lastValueFrom)(p.loadDefaultValues(g.dataSourceName),{defaultValue:null})}};D=(0,c.__decorate)([(0,I.CrtRequestHandler)({type:"crt.LoadDefaultValuesHandler",requestType:"crt.LoadDefaultValuesRequest"})],D);let T=class extends I.DataRequest{};T=(0,c.__decorate)([(0,I.CrtRequest)({type:"crt.SaveDataRequest"})],T);let U=class extends I.BaseRequestHandler{handle(g){const p=g.$context,{dataSourceName:V,options:N,parameters:h}=g,E=p.save(V,h,N);return(0,d.lastValueFrom)(E,{defaultValue:null})}};U=(0,c.__decorate)([(0,I.CrtRequestHandler)({type:"crt.SaveDataHandler",requestType:"crt.SaveDataRequest"})],U);let f=class extends I.DataRequest{};f=(0,c.__decorate)([(0,I.CrtRequest)({type:"crt.DeleteDataRequest"})],f);let P=class extends I.BaseRequestHandler{handle(g){const p=g.$context;return(0,d.lastValueFrom)(p.delete(g.dataSourceName,g.parameters,g.config),{defaultValue:null})}};P=(0,c.__decorate)([(0,I.CrtRequestHandler)({type:"crt.DeleteDataHandler",requestType:"crt.DeleteDataRequest"})],P);let e=class extends I.DataRequest{};e=(0,c.__decorate)([(0,I.CrtRequest)({type:"crt.CopyDataRequest"})],e);let t=class extends I.BaseRequestHandler{handle(g){const p=g.$context,{dataSourceName:V,recordId:N,copiedValues:h}=g;return(0,d.lastValueFrom)(p.copy(V,N,h),{defaultValue:null})}};t=(0,c.__decorate)([(0,I.CrtRequestHandler)({type:"crt.CopyDataHandler",requestType:"crt.CopyDataRequest"})],t);let i=class extends I.DataRequest{};i=(0,c.__decorate)([(0,I.CrtRequest)({type:"crt.SortDataRequest"})],i);let r=class extends I.BaseRequestHandler{handle(g){const p=g.$context;return(0,d.lastValueFrom)(p.setSorting(g.dataSourceName,g.config),{defaultValue:null})}};r=(0,c.__decorate)([(0,I.CrtRequestHandler)({type:"crt.SortDataHandler",requestType:"crt.SortDataRequest"})],r);let n=class extends I.BaseRequestHandler{handle(g){var p=this;return(0,s.A)(function*(){const V=g.$context,N=V._injectionContext;V._injectionContext?.id&&p.handlerChain.clearContextedHandlersCache(N.id),yield p.next?.handle(g)})()}};n=(0,c.__decorate)([(0,I.CrtRequestHandler)({requestType:"crt.HandleViewModelDestroyRequest",type:"crt.ClearContextedHandlersCacheHandler"})],n);var m=a(493);let C=class extends I.DataRequest{};C=(0,c.__decorate)([(0,I.CrtRequest)({type:"crt.GetDataSourceLoadFiltersRequest"})],C);let O=class extends I.BaseRequestHandler{constructor(g){super(),this._entitySchemaQueryBuilder=g}handle(g){var p=this;return(0,s.A)(function*(){const V=g.$context;if(!V)throw new Error("Property '$context' should be specified");const N=g.dataSourceName;if(!N)throw new Error("Property 'dataSourceName' should be specified");const h=V.dataSchemas[N];if(!h)throw new Error(`Schema for data source with name ${N} not found`);const E=yield V.getDataSourceLoadParameters(N);return E.parameters.some(w=>w.type===I.ModelParameterType.Never)?null:(0,d.lastValueFrom)(p._entitySchemaQueryBuilder.build(h,[],E.parameters).pipe((0,d.map)(w=>w.getMetadata().filters)))})()}};O=(0,c.__decorate)([(0,I.CrtRequestHandler)({type:"crt.GetDataSourceLoadFiltersHandler",requestType:"crt.GetDataSourceLoadFiltersRequest"}),(0,c.__metadata)("design:paramtypes",[m.O])],O)},68678:(J,$,a)=>{a.d($,{C_:()=>I,Fj:()=>M,iB:()=>F});var s=a(59131),c=a.n(s);const M=new s.InjectionToken("SCOPE_NAME"),I=new s.InjectionToken("VIEW_EVENT_ZONE_NAME"),F=new s.InjectionToken("INJECTION_CONTEXT")},71777:(J,$,a)=>{a.d($,{X:()=>x,d:()=>A});var s=a(62278),c=a.n(s),M=a(36486),I=a.n(M),F=a(59131),L=a.n(F);class A{selectData(){return null}static{this.\u0275fac=function(v){return new(v||A)}}static{this.\u0275prov=F.\u0275\u0275defineInjectable({token:A,factory:A.\u0275fac,providedIn:"root"})}}class x extends A{constructor(){super(...arguments),this._elon={FirstName:"Elon",Account:{Name:"SpaceX",Ships:[{Id:"Falcon 9"},{Id:"Falcon Heavy"}],Employee:{Name:"Mask",Age:49}},Employees:["Elon"]}}selectData(){return(0,s.of)(this._elon).pipe((0,M.delay)(50))}static{this.\u0275fac=(()=>{let l;return function(j){return(l||(l=F.\u0275\u0275getInheritedFactory(x)))(j||x)}})()}static{this.\u0275prov=F.\u0275\u0275defineInjectable({token:x,factory:x.\u0275fac,providedIn:"root"})}}},65576:(J,$,a)=>{a.d($,{n:()=>s});var s;(function(c){c.ChangeAttributeValue="change-attribute-value",c.ModelDataLoaded="model-data-loaded-event",c.BeforeModelLoad="before-model-load",c.LoadDefaultValues="load-default-values",c.StartLoadModelAttributes="start-load-model-attributes",c.FinishLoadModelAttributes="finish-load-model-attributes",c.ViewEvent="view-event"})(s||(s={}))},28114:(J,$,a)=>{a.d($,{n:()=>y});var s=a(5960),c=a.n(s),M=a(59131),I=a.n(M),F=a(38495),L=a.n(F),A=a(96590),x=a.n(A),d=a(21018),l=a.n(d),v=a(62278),j=a.n(v),o=a(36486),u=a.n(o),_=a(57117),b=a(80246);let y=class ce{constructor(R,B,D,T){this.dataSourceFactory=R,this.entitySchemaRepository=B,this._featureValues=D,this._injector=T}_createModel(R=null,B=!1,D){const T=new b.K(D||this._injector,R);return T.disableSync=B,T.init()}_validateModelConfig(R){if(R.primaryDataSourceName&&!R.dataSources[R.primaryDataSourceName])throw new Error(`Data source "${R.primaryDataSourceName}" cannot be primary data source. Data source "${R.primaryDataSourceName}" not found in model config.`);if(R.primaryDataSourceName&&R.dataSources[R.primaryDataSourceName]?.scope===F.DataSourceScope.ViewElement)throw new Error(`Data source "${R.primaryDataSourceName}" with scope "viewElement" cannot be primary. Only data sources with scope "page" can be primary`)}_getEntitySchemesRequest(R){return R.map(([,B])=>B).filter(B=>B.type==="crt.EntityDataSource").map(B=>B.config).filter(B=>!!B.entitySchemaName).map(B=>{let D=[];return B.attributes&&(D=Object.entries(B.attributes).filter(([,T])=>T.type===F.DataSchemaAttributeType.ForwardReferenceAttribute).map(([,T])=>T.path)),{name:B.entitySchemaName,loadLookupColumns:!0,forwardReferencePaths:D}})}_generateFromConfig(R,B){let D,T;const U=B?.get(d.MeasurePerformanceService,null,{optional:!0});return U?(D=Object.entries(R?.dataSources||{}).filter(([f,P])=>P.type?!0:(console.warn(`Data source ${f} without type not supported.`),!1)),D.length===0?(0,v.of)([]):(this._validateModelConfig(R),T=D.map(([f,P])=>this.generateOne(P,f,B)),this.preInitializeDataSources(D).pipe(U.measure$("modelGenerator.generateFromConfig"),(0,v.switchMap)(()=>(0,v.forkJoin)(T))))):(D=Object.entries(R?.dataSources||{}).filter(([f,P])=>P.type?!0:(console.warn(`Data source ${f} without type not supported.`),!1)),D.length===0?(0,v.of)([]):(this._validateModelConfig(R),T=D.map(([f,P])=>this.generateOne(P,f,B)),this.preInitializeDataSources(D).pipe((0,v.switchMap)(()=>(0,v.forkJoin)(T)))))}preInitializeDataSources(R){if(this._featureValues["DataSource-DontUseOneRequestForEntitySchemes"])return(0,v.of)(null);const B=this._getEntitySchemesRequest(R);return this.entitySchemaRepository.getSchemes(B).pipe((0,o.catchError)(D=>(0,v.of)([])),(0,o.map)(D=>null))}generate(R,B){return this._generateFromConfig(R,B)}generateOne(R,B,D){const T=D?.get(d.MeasurePerformanceService,null,{optional:!0});return T?this.dataSourceFactory.create(B,R,D).pipe(T.measure$(`modelGenerator.generateOne.${B}`),(0,o.mergeMap)(U=>this._createModel(U,R.disableSync,D))):this.dataSourceFactory.create(B,R,D).pipe((0,o.mergeMap)(U=>this._createModel(U,R.disableSync,D)))}static{this.\u0275fac=function(B){return new(B||ce)(M.\u0275\u0275inject(_.LZ),M.\u0275\u0275inject(d.EntitySchemaRepository),M.\u0275\u0275inject(d.FEATURE_VALUES),M.\u0275\u0275inject(M.Injector))}}static{this.\u0275prov=M.\u0275\u0275defineInjectable({token:ce,factory:ce.\u0275fac})}};y=(0,s.__decorate)([(0,A.CrtHandlerChainAdapter)({requestType:"crt.ModelGenerator"}),(0,s.__metadata)("design:paramtypes",[_.LZ,d.EntitySchemaRepository,d.FeatureValues,M.Injector])],y)},81116:(J,$,a)=>{a.d($,{R:()=>_});var s=a(73308),c=a(38495),M=a.n(c),I=a(21018),F=a.n(I),L=a(78240),A=a.n(L),x=a(28399),d=a.n(x),l=a(62278),v=a.n(l),j=a(57117),o=a(59131),u=a.n(o);class _{constructor(y,S,R){this._sysSettingsService=y,this._dataSchemaRepository=S,this._featureValues=R,this._searchComparisonTypeSysSettingCode="StringColumnSearchComparisonType"}_getParameterValue(y,S,R){if(typeof S=="string"){if(S.startsWith("@requestPayload")){const B=S.replace("@requestPayload.","");return(0,x.get)(R,B)}if(S.startsWith("$"))return y.attributes[S.substring(1)];if(y.attributes[S])return y.attributes[S]}return S}_applyFilterMacros(y,S){let R=null;switch(typeof S){case"object":R=JSON.stringify((0,L.classToPlain)(S));break;case"string":R=S;break;default:return S}const B=/##ViewModelMacro\.\$([^#]+)##/g;let D=!1;return[...R.matchAll(B)].forEach(T=>{const U=T[1],f=(0,x.get)(y.attributes,U);let P=f?.toString();typeof f=="object"&&(D=!0,P=JSON.stringify(f)),R=R.replace(T[0],P)}),typeof S=="object"||D?JSON.parse(R):R}_createPrimaryDisplayColumnValueFilter(y){var S=this;return(0,s.A)(function*(){const R=S._searchComparisonTypeSysSettingCode,D=(yield S._sysSettingsService.getByCode(R))?.value===1?c.ComparisonType.Contain:c.ComparisonType.Start_with;return{type:c.ModelParameterType.PrimaryDisplayValueFilter,value:y,comparisonType:D}})()}_createColumnValueFilter(y,S,R){const B=S;return Promise.resolve({type:c.ModelParameterType.ColumnValue,value:{attributePath:B.attributePath,attributeValue:this._getParameterValue(y,B.attributeValue,R)}})}_getOwnLoadParameters(y,S){return y.getModelByName(S)?.getOwnLoadParameters()}_getDataSourceFilteringParameters(y,S){const B=y._dataSourcesInfos.get(S).getFilteringConfig();return y._checkFilteringAttributes(S,B),B.length===0?Promise.resolve([]):Promise.all(B.map(D=>y[D.name])).then(D=>D.map(T=>({type:c.ModelParameterType.Filter,value:T})))}_getDataSourceOwnFilteringParameters(y,S){return this._getOwnLoadParameters(y,S)?.parameters??[]}_getPrimaryAttributeName(y,S){var R=this;return(0,s.A)(function*(){if(!S)return null;let B=Object.values(y.dataSchemas).find(D=>D.name===S);return B||(B=yield(0,l.lastValueFrom)(R._dataSchemaRepository.get(S))),B?.primaryAttributeName})()}_getParameterRelationsConfigs(y){return y.relationsConfigs||[]}_createRelationParameter(y,S){const R={...y},B=this._getParameterRelationsConfigs(R);return R.relationsConfigs=[{dataSchemaName:S.dataSchemaName,attributePath:S.attributePath,relationPath:S.relationPath},...B],R}_validateAllowedRelations(y,S,R){const D=R?.relationPath?.split(".")?.shift(),T=y.dataSchemas[S],U=T?.findAttributeByName(D);if(T&&U&&T.primaryAttributeName!==D&&U.dataValueType!==c.DataValueType.Lookup&&!this._featureValues.DataSourceAllowRelationsByNonLookupColumn){const f="Filtration of data sources by page data is currently supported by lookup and primaryAttribute fields only",P=new Error(`${f}, please see the console for more details`);throw P.stack=`${f} , data source name: ${S}, relation config: ${JSON.stringify(R)}`,P}}_createRelationParameterWithAttributeValue(y,S,R,B){var D=this;return(0,s.A)(function*(){const T={...R},U=D._getParameterRelationsConfigs(T),f=y.dataSchemas[S],P=B.relationPath.split("."),e=P.shift(),t=f.findAttributeByName(e);if(f.primaryAttributeName!==e&&t.dataValueType!==c.DataValueType.Lookup&&D._featureValues.DataSourceAllowRelationsByNonLookupColumn)return T.type=c.ModelParameterType.ColumnValue,T.value={attributePath:B.attributePath,attributeValue:B.value},T.relationsConfigs=U,T;const i={dataSchemaName:B.dataSchemaName,attributePath:B.attributePath,relationPath:B.relationPath};T.value=B.value,T.type=c.ModelParameterType.PrimaryColumnValue,f.primaryAttributeName!==e&&(i.dataSchemaName=t.referenceSchemaName);const r=f.type!==c.DataSchemaType.Entity?i.dataSchemaName:B.dataSchemaName;return i.relationPath=P.length===0?yield D._getPrimaryAttributeName(y,r):P.join("."),T.relationsConfigs=[i,...U],T})()}_convertToRelationParameters(y,S,R,B){var D=this;return(0,s.A)(function*(){const T=[];D._validateAllowedRelations(y,S,B);for(const U of R){const f=B.useAttributeValue?yield D._createRelationParameterWithAttributeValue(y,S,U,B):D._createRelationParameter(U,B);T.push(f)}return T})()}getLoadParametersByRelation(y,S,R,B){const D=S.relationPath.split("."),T=D.shift(),U=y.dataSchemas[T],f={dataSchemaName:U.name,attributePath:S.attributePath,relationPath:D.join(".")},P=D.shift(),t=y._dataSourcesInfos.get(T).getMappedAttributeNames(P)?.[0]??null,i=y.getModelMode(T),r=B?.[T]?.[f.relationPath];if(y.getModelByName(R)?.getAllowCopyingRecords()&&r)f.value=r,f.useAttributeValue=!0;else{const m=y.getIsDirty(t)||i===I.ModelMode.Create||i===I.ModelMode.Copy||U.type!==c.DataSchemaType.Entity;if(t&&m){f.useAttributeValue=!0;const C=y.attributes[t];f.value=C?.value?C.value:C}}return this._getModelLoadParameters(y,T,null,null,!0,!1).then(m=>this._convertToRelationParameters(y,T,m,f))}_getRelationParameters(y,S,R){const B=y._modelDependencies[S]||[];if(B.length===0)return Promise.resolve([]);const D=B.map(T=>this.getLoadParametersByRelation(y,T,S,R));return Promise.all(D).then(T=>T.flat())}_getPagingConfigRowCount(y,S){return typeof S=="string"?(0,x.isNil)(y.attributes[S])?0:y.attributes[S]:S}_getPagingConfigRowsOffset(y,S,R,B){const D=y._dataSourcesInfos.get(B).collectionViewModelAttributeName,T=y.attributes[D]?.length??0;if(typeof S=="number")throw new Error("Rows offset parameter cannot be set to number");return!S&&R===c.DataSourceLoadType.LoadNext?T:!S&&R===c.DataSourceLoadType.Reload?0:(y.attributes[S]=(0,x.isNil)(y.attributes[S])?0:y.attributes[S],R===c.DataSourceLoadType.Reload?y.attributes[S]:y.attributes[S]+T)}_getModelPagingConfig(y,S,R,B){if(!S){const D=this._getOwnLoadParameters(y,B);return Promise.resolve(D?.options?.pagingConfig??null)}return Promise.resolve({rowCount:this._getPagingConfigRowCount(y,S.rowCount),rowsOffset:this._getPagingConfigRowsOffset(y,S.rowsOffset,R,B)})}_mergeSorting(y,S){return(0,x.unionBy)(y??[],S??[],"columnName")??null}_getModelSortingConfig(y,S,R){const D=this._getOwnLoadParameters(y,R)?.options?.sortingConfig,T=S?.attributeName;return!T||!y.attributes[T]?D?Promise.resolve(D):Promise.resolve(null):Promise.all(y.attributes[T].map(function(){var U=(0,s.A)(function*(f){return{columnName:yield f.columnName,direction:yield f.direction}});return function(f){return U.apply(this,arguments)}}())).then(U=>({columns:this._mergeSorting(U,D?.columns)}))}_updateLastEventLoadParameters(y,S,R,B){R&&R.length!==0?y._lastEventLoadParameters.set(S,R):B!==!0&&y._lastEventLoadParameters.set(S,[{type:c.ModelParameterType.Empty,value:""}])}_getModelLoadParameters(y,S,R,B,D,T,U){const f=this.getModelParameters(y,R,B).then(P=>(T!==!0&&this._updateLastEventLoadParameters(y,S,P,D),D!==!0?P:y._lastEventLoadParameters.get(S)||[{type:c.ModelParameterType.Never,value:""}]));return Promise.all([f,this._getDataSourceFilteringParameters(y,S),this._getDataSourceOwnFilteringParameters(y,S),this._getRelationParameters(y,S,U)]).then(([P,e,t,i])=>[...P,...t,...e,...i])}getModelParameters(y,S,R){if(R?.parameters&&(S=[...S,...R.parameters]),!S||S.length===0)return Promise.resolve([]);const B=S.map(D=>{switch(D.type){case c.ModelParameterType.PrimaryColumnValue:return Promise.resolve({type:D.type,value:this._getParameterValue(y,D.value,R)});case c.ModelParameterType.Filter:return Promise.resolve({type:D.type,value:this._applyFilterMacros(y,D.value)});case c.ModelParameterType.PrimaryDisplayValueFilter:return this._createPrimaryDisplayColumnValueFilter(this._getParameterValue(y,D.value,R));case c.ModelParameterType.ColumnValue:return this._createColumnValueFilter(y,D.value,R)}});return Promise.all(B)}getModelLoadParameters(y,S,R,B=c.DataSourceLoadType.Load,{payload:D,useLastLoadParameters:T,doNotUpdateLastLoadParameters:U,modelLoadConfiguration:f}={}){const P=S.name,e=B??c.DataSourceLoadType.Load,t=e===c.DataSourceLoadType.Load?null:S.getPagingConfig(),i=S.getSortingConfig();return Promise.all([this._getModelLoadParameters(y,P,R,D,T,U,f),this._getModelPagingConfig(y,t,e,P),this._getModelSortingConfig(y,i,P)])}static{this.\u0275fac=function(S){return new(S||_)(o.\u0275\u0275inject(c.SysSettingsService),o.\u0275\u0275inject(j.J_),o.\u0275\u0275inject(I.FEATURE_VALUES))}}static{this.\u0275prov=o.\u0275\u0275defineInjectable({token:_,factory:_.\u0275fac,providedIn:"root"})}}},59910:(J,$,a)=>{a.d($,{g:()=>ie});var s=a(5960),c=a(40297),M=a(56711),I=a(38495),F=a(96590),L=a(20442),A=a(21018),x=a(8206),d=a(57117),l=a(42745),v=a(68678),j=a(71777),o=a(28114),u=a(53035),_=a(77430),b=a(37644),y=a(99499),S=a(66882);const te={"hr-HR":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Molimo odaberite vrijednost iz popisa","SelectionWindowMessage":"Molimo odaberite vrijednost iz popisa ili pretra\u017Eite koriste\u0107i prozor za pretra\u017Eivanje"},"Required":{"Message":"Unesite vrijednost"},"MaxLength":{"Message":"Prema\u0161ena maksimalna duljina teksta ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimalna duljina teksta nije dosegnuta ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Neispravan format datuma i vremena"},"DatePickerSyntax":{"Message":"Neispravan format datuma"},"TimePickerSyntax":{"Message":"Neispravan format vremena"},"RegExp":{"Message":"Neispravan format vrijednosti"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Kod mora zapo\u010Deti prefiksom {{schemaNamePrefix}}.","OnlySchemaNamePrefixMessage":"Unesite barem jedan znak."},"SchemaNameAllowedSymbols":{"Message":"Koristite simbole: a-z, A-Z, 0-9, donja crta ili crtica. Samo slova mogu biti prva."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Stupac uklonjen","ValidationErrorMessageSingleErrorField":"Polje: {0}. Gre\u0161ka: {1}","ValidationErrorMessageSeveralErrorFields":"Polja: {0}. Gre\u0161ka: {1}","RefreshModelDataConflict":"Creatio ima nove podatke za trenutnu stranicu. Kako biste ih vidjeli, spremite ili poni\u0161tite svoje promjene i osvje\u017Eite stranicu.","WarningModelsWithCircularDependencies":"Neki modeli imaju cikli\u010Dke ovisnosti i nisu u\u010Ditani","LoadingModelErrorMessage":"Do\u0161lo je do gre\u0161ke tijekom izvr\u0161avanja upita"}}'),"hu-HU":JSON.parse('{"Validators":{"Autocomplete":{"Message":"K\xE9rj\xFCk, v\xE1lassza ki az \xE9rt\xE9ket a list\xE1b\xF3l","SelectionWindowMessage":"K\xE9rj\xFCk, v\xE1lasszon \xE9rt\xE9ket a list\xE1b\xF3l, vagy keressen a keres\u0151ablak seg\xEDts\xE9g\xE9vel"},"Required":{"Message":"Adj meg egy \xE9rt\xE9ket"},"MaxLength":{"Message":"A maxim\xE1lis sz\xF6veghossz t\xFAll\xE9pve ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Nem \xE9rte el a minim\xE1lis sz\xF6veghosszt ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"\xC9rv\xE9nytelen d\xE1tum- \xE9s id\u0151form\xE1tum"},"DatePickerSyntax":{"Message":"\xC9rv\xE9nytelen d\xE1tumform\xE1tum"},"TimePickerSyntax":{"Message":"\xC9rv\xE9nytelen id\u0151form\xE1tum"},"RegExp":{"Message":"\xC9rv\xE9nytelen \xE9rt\xE9kform\xE1tum"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Code must start with the {{schemaNamePrefix}} prefix.","OnlySchemaNamePrefixMessage":"Enter at least one more symbol."},"SchemaNameAllowedSymbols":{"Message":"Use symbols: a-z, A-Z, 0-9, underscore or dash. Only letters can be first."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Oszlop elt\xE1vol\xEDtva","ValidationErrorMessageSingleErrorField":"Mez\u0151: {0}. Hiba: {1}","ValidationErrorMessageSeveralErrorFields":"Mez\u0151k: {0}. Hiba: {1}","RefreshModelDataConflict":"A Creatio \xFAj adatokkal rendelkezik az aktu\xE1lis oldalhoz. A megtekint\xE9s\xE9hez mentse vagy vonja vissza a m\xF3dos\xEDt\xE1sokat, \xE9s friss\xEDtse az oldalt.","WarningModelsWithCircularDependencies":"Egyes modellek k\xF6rk\xF6r\xF6s f\xFCgg\u0151s\xE9ggel rendelkeznek, \xE9s nincsenek bet\xF6ltve","LoadingModelErrorMessage":"Error occurred during the query execution"}}'),"zh-CN":JSON.parse('{"Validators":{"Autocomplete":{"Message":"\u8BF7\u4ECE\u5217\u8868\u4E2D\u9009\u62E9\u503C","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"\u8F93\u5165\u503C"},"MaxLength":{"Message":"\u8D85\u8FC7\u6587\u672C\u957F\u5EA6\u9650\u5236({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"\u672A\u8FBE\u6587\u672C\u6700\u5C0F\u9650\u5236({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"\u65E5\u671F\u548C\u65F6\u95F4\u683C\u5F0F\u65E0\u6548"},"DatePickerSyntax":{"Message":"\u65E5\u671F\u683C\u5F0F\u65E0\u6548"},"TimePickerSyntax":{"Message":"\u65F6\u95F4\u683C\u5F0F\u65E0\u6548"},"RegExp":{"Message":"Invalid value format"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Code must start with the {{schemaNamePrefix}} prefix.","OnlySchemaNamePrefixMessage":"Enter at least one more symbol."},"SchemaNameAllowedSymbols":{"Message":"Use symbols: a-z, A-Z, 0-9, underscore or dash. Only letters can be first."}},"BaseViewModel":{"DataSourceAttributeRemoved":"\u5217\u5DF2\u79FB\u9664","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio \u5F53\u524D\u9875\u9762\u6570\u636E\u5DF2\u66F4\u6539\u3002\u8BF7\u4FDD\u5B58\u6216\u53D6\u6D88\u540E\uFF0C\u518D\u5237\u65B0\u672C\u9875\u9762\u4EE5\u67E5\u770B","WarningModelsWithCircularDependencies":"\u6709\u4E9B\u6A21\u578B\u6709\u5FAA\u73AF\u4F9D\u8D56\u5173\u7CFB\u5E76\u4E14\u6CA1\u6709\u88AB\u52A0\u8F7D","LoadingModelErrorMessage":"Error occurred during the query execution"}}'),"uk-UA":JSON.parse('{"BaseViewModel":{"RefreshModelDataConflict":"Creatio \u043C\u0430\u0454 \u043D\u043E\u0432\u0456 \u0434\u0430\u043D\u0456 \u0434\u043B\u044F \u043F\u043E\u0442\u043E\u0447\u043D\u043E\u0457 \u0441\u0442\u043E\u0440\u0456\u043D\u043A\u0438. \u0429\u043E\u0431 \u043F\u0435\u0440\u0435\u0433\u043B\u044F\u043D\u0443\u0442\u0438 \u0457\u0457, \u0437\u0431\u0435\u0440\u0435\u0436\u0456\u0442\u044C \u0430\u0431\u043E \u0441\u043A\u0430\u0441\u0443\u0439\u0442\u0435 \u0432\u0430\u0448\u0456 \u0437\u043C\u0456\u043D\u0438 \u0456 \u043E\u043D\u043E\u0432\u0456\u0442\u044C \u0441\u0442\u043E\u0440\u0456\u043D\u043A\u0443.","WarningModelsWithCircularDependencies":"\u0414\u0435\u044F\u043A\u0456 \u043C\u043E\u0434\u0435\u043B\u0456 \u043C\u0430\u044E\u0442\u044C \u0446\u0438\u043A\u043B\u0456\u0447\u043D\u0456 \u0437\u0430\u043B\u0435\u0436\u043D\u043E\u0441\u0442\u0456 \u0456 \u043D\u0435 \u0431\u0443\u043B\u0438 \u0437\u0430\u0432\u0430\u043D\u0442\u0430\u0436\u0435\u043D\u0456","DataSourceAttributeRemoved":"\u041A\u043E\u043B\u043E\u043D\u043A\u0443 \u0432\u0438\u0434\u0430\u043B\u0435\u043D\u043E","ValidationErrorMessageSingleErrorField":"\u041F\u043E\u043B\u0435: {0}. \u041F\u043E\u043C\u0438\u043B\u043A\u0430: {1}","ValidationErrorMessageSeveralErrorFields":"\u041F\u043E\u043B\u044F: {0}. \u041F\u043E\u043C\u0438\u043B\u043A\u0430: {1}","LoadingModelErrorMessage":"\u0421\u0442\u0430\u043B\u0430\u0441\u044F \u043F\u043E\u043C\u0438\u043B\u043A\u0430 \u043F\u0456\u0434 \u0447\u0430\u0441 \u0432\u0438\u043A\u043E\u043D\u0430\u043D\u043D\u044F \u0437\u0430\u043F\u0438\u0442\u0443"},"Validators":{"Autocomplete":{"Message":"\u0411\u0443\u0434\u044C \u043B\u0430\u0441\u043A\u0430, \u043E\u0431\u0435\u0440\u0456\u0442\u044C \u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F \u0437\u0456 \u0441\u043F\u0438\u0441\u043A\u0443","SelectionWindowMessage":"\u0411\u0443\u0434\u044C \u043B\u0430\u0441\u043A\u0430, \u0432\u0438\u0431\u0435\u0440\u0456\u0442\u044C \u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F \u0437\u0456 \u0441\u043F\u0438\u0441\u043A\u0443 \u0430\u0431\u043E \u0441\u043A\u043E\u0440\u0438\u0441\u0442\u0430\u0439\u0442\u0435\u0441\u044F \u043F\u043E\u0448\u0443\u043A\u043E\u043C \u0437\u0430 \u0434\u043E\u043F\u043E\u043C\u043E\u0433\u043E\u044E \u0432\u0456\u043A\u043D\u0430 \u0434\u043E\u0432\u0456\u0434\u043D\u0438\u043A\u0430"},"Required":{"Message":"\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"},"MaxLength":{"Message":"\u041F\u0435\u0440\u0435\u0432\u0438\u0449\u0435\u043D\u043E \u0434\u043E\u043F\u0443\u0441\u0442\u0438\u043C\u0443 \u0434\u043E\u0432\u0436\u0438\u043D\u0443 \u0442\u0435\u043A\u0441\u0442\u0443 ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"\u041D\u0435 \u0434\u043E\u0441\u044F\u0433\u043D\u0443\u0442\u043E \u0434\u043E\u043F\u0443\u0441\u0442\u0438\u043C\u043E\u0457 \u0434\u043E\u0432\u0436\u0438\u043D\u0438 \u0442\u0435\u043A\u0441\u0442\u0443 ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 \u0434\u0430\u0442\u0438 \u0456 \u0447\u0430\u0441\u0443"},"DatePickerSyntax":{"Message":"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 \u0434\u0430\u0442\u0438"},"TimePickerSyntax":{"Message":"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 \u0447\u0430\u0441\u0443"},"RegExp":{"Message":"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 \u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"\u041A\u043E\u0434 \u043C\u0430\u0454 \u043F\u043E\u0447\u0438\u043D\u0430\u0442\u0438\u0441\u044F \u0437 \u043F\u0440\u0435\u0444\u0456\u043A\u0441\u0443 {{schemaNamePrefix}}.","OnlySchemaNamePrefixMessage":"\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u043F\u0440\u0438\u043D\u0430\u0439\u043C\u043D\u0456 \u043E\u0434\u0438\u043D \u0441\u0438\u043C\u0432\u043E\u043B."},"SchemaNameAllowedSymbols":{"Message":"\u0412\u0438\u043A\u043E\u0440\u0438\u0441\u0442\u043E\u0432\u0443\u0439\u0442\u0435 \u0441\u0438\u043C\u0432\u043E\u043B\u0438: a-z, A-Z, 0-9, \u043F\u0456\u0434\u043A\u0440\u0435\u0441\u043B\u0435\u043D\u043D\u044F \u0430\u0431\u043E \u0442\u0438\u0440\u0435. \u0421\u043F\u043E\u0447\u0430\u0442\u043A\u0443 \u043C\u043E\u0436\u0443\u0442\u044C \u0431\u0443\u0442\u0438 \u043B\u0438\u0448\u0435 \u043B\u0456\u0442\u0435\u0440\u0438."}},"LoadDataRequest":{"SuccessMessage":"\u0414\u0430\u043D\u0456 \u043E\u043D\u043E\u0432\u043B\u0435\u043D\u043E"}}'),"sq-AL":JSON.parse('{"Validators":{"Autocomplete":{"Message":"T\xEB lutem p\xEBrzgjidh vler\xEBn nga lista","SelectionWindowMessage":"T\xEB lutem p\xEBrzgjidh vler\xEB nga lista ose k\xEBrko duke p\xEBrdorur dritaren e k\xEBrkimit"},"Required":{"Message":"Vendos vler\xEBn"},"MaxLength":{"Message":"\xCBsht\xEB tejkaluar gjat\xEBsia maksimale e tekstit ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Gjat\xEBsia minimale e tekstit nuk \xEBsht\xEB arritur ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Format i pavlefsh\xEBm i dat\xEBs dhe or\xEBs"},"DatePickerSyntax":{"Message":"Format i pavlefsh\xEBm i dat\xEBs"},"TimePickerSyntax":{"Message":"Format i pavlefsh\xEBm i or\xEBs"},"RegExp":{"Message":"Formati i vler\xEBs i pavlefsh\xEBm"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Kodi duhet t\xEB filloj\xEB me prefiksin {{schemaNamePrefix}}.","OnlySchemaNamePrefixMessage":"Vendos t\xEB pakt\xEBn nj\xEB simbol m\xEB shum\xEB."},"SchemaNameAllowedSymbols":{"Message":"P\xEBrdor simbolet: a-z, A-Z, 0-9, n\xEBnvij\xEBzim ose vij\xEBzim. Vet\xEBm shkronja mund t\xEB vendoset n\xEB fillim."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Kolonat u hoq\xEBn","ValidationErrorMessageSingleErrorField":"Fusha: {0}. Gabim: {1}","ValidationErrorMessageSeveralErrorFields":"Fushat: {0}. Gabim: {1}","RefreshModelDataConflict":"Creatio ka t\xEB dh\xEBna t\xEB reja p\xEBr faqen aktuale. P\xEBr t\xEB pare, ruajtur apo anuluar ndryshimet e tua dhe p\xEBr t\xEB rifreskuar faqen.","WarningModelsWithCircularDependencies":"Disa modele kan\xEB var\xEBsi ciklike dhe nuk jan\xEB ngarkuar","LoadingModelErrorMessage":"Error occurred during the query execution"}}'),"en-GB":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Please select value from the list"},"Required":{"Message":"Enter a value"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}"}}'),"bg-BG":JSON.parse('{"Validators":{"Autocomplete":{"Message":"\u041C\u043E\u043B\u044F, \u0438\u0437\u0431\u0435\u0440\u0438 \u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442 \u043E\u0442 \u0441\u043F\u0438\u0441\u044A\u043A\u0430","SelectionWindowMessage":"\u041C\u043E\u043B\u044F, \u0438\u0437\u0431\u0435\u0440\u0438 \u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442 \u043E\u0442 \u0441\u043F\u0438\u0441\u044A\u043A\u0430 \u0438\u043B\u0438 \u043F\u043E\u0442\u044A\u0440\u0441\u0438 \u0441 \u043F\u043E\u043C\u043E\u0449\u0442\u0430 \u043D\u0430 \u043F\u0440\u043E\u0437\u043E\u0440\u0435\u0446\u0430 \u0437\u0430 \u0441\u043F\u0440\u0430\u0432\u043A\u0430"},"Required":{"Message":"\u0412\u044A\u0432\u0435\u0434\u0438 \u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"},"MaxLength":{"Message":"\u041F\u0440\u0435\u0432\u0438\u0448\u0435\u043D\u0430 \u0435 \u043C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u043D\u0430\u0442\u0430 \u0434\u044A\u043B\u0436\u0438\u043D\u0430 \u043D\u0430 \u0442\u0435\u043A\u0441\u0442\u0430 ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"\u041C\u0438\u043D\u0438\u043C\u0430\u043B\u043D\u0430\u0442\u0430 \u0434\u044A\u043B\u0436\u0438\u043D\u0430 \u043D\u0430 \u0442\u0435\u043A\u0441\u0442\u0430 \u043D\u0435 \u0435 \u0434\u043E\u0441\u0442\u0438\u0433\u043D\u0430\u0442\u0430 ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0444\u043E\u0440\u043C\u0430\u0442 \u0437\u0430 \u0434\u0430\u0442\u0430 \u0438 \u0447\u0430\u0441"},"DatePickerSyntax":{"Message":"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0444\u043E\u0440\u043C\u0430\u0442 \u043D\u0430 \u0434\u0430\u0442\u0430\u0442\u0430"},"TimePickerSyntax":{"Message":"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0444\u043E\u0440\u043C\u0430\u0442 \u043D\u0430 \u0447\u0430\u0441\u0430"},"RegExp":{"Message":"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0444\u043E\u0440\u043C\u0430\u0442 \u043D\u0430 \u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442\u0442\u0430"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"\u041A\u043E\u0434\u044A\u0442 \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u0432\u0430 \u0441 \u043F\u0440\u0435\u0444\u0438\u043A\u0441\u0430 {{schemaNamePrefix}}.","OnlySchemaNamePrefixMessage":"\u0412\u044A\u0432\u0435\u0434\u0438 \u043F\u043E\u043D\u0435 \u043E\u0449\u0435 \u0435\u0434\u0438\u043D \u0441\u0438\u043C\u0432\u043E\u043B."},"SchemaNameAllowedSymbols":{"Message":"\u0418\u0437\u043F\u043E\u043B\u0437\u0432\u0430\u0439 \u0441\u0438\u043C\u0432\u043E\u043B\u0438: a-z, A-Z, 0-9, \u0434\u043E\u043B\u043D\u0430 \u0447\u0435\u0440\u0442\u0430 \u0438\u043B\u0438 \u0442\u0438\u0440\u0435. \u041F\u044A\u0440\u0432\u0438 \u043C\u043E\u0433\u0430\u0442 \u0434\u0430 \u0431\u044A\u0434\u0430\u0442 \u0441\u0430\u043C\u043E \u0431\u0443\u043A\u0432\u0438."}},"BaseViewModel":{"DataSourceAttributeRemoved":"\u041A\u043E\u043B\u043E\u043D\u0430\u0442\u0430 \u0435 \u043F\u0440\u0435\u043C\u0430\u0445\u043D\u0430\u0442\u0430","ValidationErrorMessageSingleErrorField":"\u041F\u043E\u043B\u0435: {0}. \u0413\u0440\u0435\u0448\u043A\u0430: {1}","ValidationErrorMessageSeveralErrorFields":"\u041F\u043E\u043B\u0435\u0442\u0430: {0}. \u0413\u0440\u0435\u0448\u043A\u0430: {1}","RefreshModelDataConflict":"Creatio \u0438\u043C\u0430 \u043D\u043E\u0432\u0438 \u0434\u0430\u043D\u043D\u0438 \u0437\u0430 \u0442\u0435\u043A\u0443\u0449\u0430\u0442\u0430 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0430. \u0417\u0430 \u0434\u0430 \u0433\u043E \u0432\u0438\u0434\u0438\u0448, \u0437\u0430\u043F\u0430\u0437\u0438 \u0438\u043B\u0438 \u0430\u043D\u0443\u043B\u0438\u0440\u0430\u0439 \u043F\u0440\u043E\u043C\u0435\u043D\u0438\u0442\u0435 \u0441\u0438 \u0438 \u043E\u043F\u0440\u0435\u0441\u043D\u0438 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0430\u0442\u0430.","WarningModelsWithCircularDependencies":"\u041D\u044F\u043A\u043E\u0438 \u043C\u043E\u0434\u0435\u043B\u0438 \u0438\u043C\u0430\u0442 \u043A\u0440\u044A\u0433\u043E\u0432\u0438 \u0437\u0430\u0432\u0438\u0441\u0438\u043C\u043E\u0441\u0442\u0438 \u0438 \u043D\u0435 \u0441\u0430 \u0437\u0430\u0440\u0435\u0434\u0435\u043D\u0438","LoadingModelErrorMessage":"\u0412\u044A\u0437\u043D\u0438\u043A\u043D\u0430 \u0433\u0440\u0435\u0448\u043A\u0430 \u043F\u043E \u0432\u0440\u0435\u043C\u0435 \u043D\u0430 \u0438\u0437\u043F\u044A\u043B\u043D\u0435\u043D\u0438\u0435 \u043D\u0430 \u0437\u0430\u044F\u0432\u043A\u0430\u0442\u0430"}}'),"zh-TW":JSON.parse('{"Validators":{"Autocomplete":{"Message":"\u8ACB\u5F9E\u6E05\u55AE\u4E2D\u9078\u64C7\u503C","SelectionWindowMessage":"\u8ACB\u5F9E\u5217\u8868\u4E2D\u9078\u64C7\u503C\u6216\u4F7F\u7528\u67E5\u8A62\u503C\u8996\u7A97\u9032\u884C\u641C\u7D22\u3002"},"Required":{"Message":"\u8F93\u5165\u503C"},"MaxLength":{"Message":"\u8D85\u8FC7\u6587\u672C\u957F\u5EA6\u9650\u5236({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"\u672A\u8FBE\u6587\u672C\u6700\u5C0F\u9650\u5236({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"\u65E5\u671F\u548C\u65F6\u95F4\u683C\u5F0F\u65E0\u6548"},"DatePickerSyntax":{"Message":"\u65E5\u671F\u683C\u5F0F\u65E0\u6548"},"TimePickerSyntax":{"Message":"\u65F6\u95F4\u683C\u5F0F\u65E0\u6548"},"RegExp":{"Message":"\u7121\u6548\u503C\u683C\u5F0F"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"\u4EE3\u78BC\u5FC5\u9808\u4EE5{{schemaNamePrefix}} \u524D\u7DB4\u958B\u59CB","OnlySchemaNamePrefixMessage":"\u6700\u5C11\u8F38\u51651\u500B\u7B26\u865F"},"SchemaNameAllowedSymbols":{"Message":"\u4F7F\u7528\u7B26\u865F\uFF1Aa-z\u3001A-Z\u30010-9\u3001\u5E95\u7DDA\u6216\u7834\u6298\u865F\u3002\u9996\u5B57\u7B26\u50C5\u53EF\u70BA\u5B57\u6BCD\u3002"}},"BaseViewModel":{"DataSourceAttributeRemoved":"\u5217\u5DF2\u79FB\u9664","ValidationErrorMessageSingleErrorField":"\u6B04\u4F4D: {0}. \u932F\u8AA4: {1}","ValidationErrorMessageSeveralErrorFields":"\u6B04\u4F4D: {0}. \u932F\u8AA4: {1}","RefreshModelDataConflict":"Creatio \u5F53\u524D\u9875\u9762\u6570\u636E\u5DF2\u66F4\u6539\u3002\u8BF7\u4FDD\u5B58\u6216\u53D6\u6D88\u540E\uFF0C\u518D\u5237\u65B0\u672C\u9875\u9762\u4EE5\u67E5\u770B","WarningModelsWithCircularDependencies":"\u6709\u4E9B\u6A21\u578B\u6709\u5FAA\u73AF\u4F9D\u8D56\u5173\u7CFB\u5E76\u4E14\u6CA1\u6709\u88AB\u52A0\u8F7D","LoadingModelErrorMessage":"Error occurred during the query execution"}}'),"no-NO":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Vennligst velg verdi fra listen"},"Required":{"Message":"Angi en verdi"},"MaxLength":{"Message":"Maksimal tekstlengde er overskredet ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minste tekstlengde ikke n\xE5dd ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Ugyldig dato og klokkeslett format"},"DatePickerSyntax":{"Message":"Ugyldig datoformat"},"TimePickerSyntax":{"Message":"Ugyldig tidsformat"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Kolonne fjernet","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}"}}'),"ko-KR":JSON.parse('{"Validators":{"Autocomplete":{"Message":"\uBAA9\uB85D\uC5D0\uC11C \uAC12\uC744 \uC120\uD0DD\uD558\uC2ED\uC2DC\uC624.","SelectionWindowMessage":"\uBAA9\uB85D\uC5D0\uC11C \uAC12\uC744 \uC120\uD0DD\uD558\uAC70\uB098 \uC870\uD68C \uCC3D\uC744 \uC0AC\uC6A9\uD558\uC5EC \uAC80\uC0C9\uD558\uC2ED\uC2DC\uC624"},"Required":{"Message":"\uAC12\uC744 \uC785\uB825\uD569\uB2C8\uB2E4"},"MaxLength":{"Message":"\uCD5C\uB300 \uD14D\uC2A4\uD2B8 \uAE38\uC774 \uCD08\uACFC({actualLength}/{maxLength})"},"MinLength":{"Message":"\uCD5C\uC18C \uD14D\uC2A4\uD2B8 \uAE38\uC774({{actualLength}/{{minLength}})\uC5D0 \uB3C4\uB2EC\uD558\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4."},"DatetimePickerSyntax":{"Message":"\uC798\uBABB\uB41C \uB0A0\uC9DC \uBC0F \uC2DC\uAC04 \uD615\uC2DD"},"DatePickerSyntax":{"Message":"\uC798\uBABB\uB41C \uB0A0\uC9DC \uD615\uC2DD"},"TimePickerSyntax":{"Message":"\uC798\uBABB\uB41C \uC2DC\uAC04 \uD615\uC2DD"},"RegExp":{"Message":"\uC798\uBABB\uB41C \uAC12 \uD615\uC2DD"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Code must start with the {{schemaNamePrefix}} prefix.","OnlySchemaNamePrefixMessage":"Enter at least one more symbol."},"SchemaNameAllowedSymbols":{"Message":"Use symbols: a-z, A-Z, 0-9, underscore or dash. Only letters can be first."}},"BaseViewModel":{"DataSourceAttributeRemoved":"\uC5F4 \uC81C\uAC70","ValidationErrorMessageSingleErrorField":"\uD544\uB4DC: {0}. \uC624\uB958: {1}","ValidationErrorMessageSeveralErrorFields":"\uD544\uB4DC: {0}. \uC624\uB958: {1}","RefreshModelDataConflict":"Creatio\uC5D0\uB294 \uD604\uC7AC \uD398\uC774\uC9C0\uC5D0 \uB300\uD55C \uC0C8 \uB370\uC774\uD130\uAC00 \uC788\uC2B5\uB2C8\uB2E4. \uC774 \uB370\uC774\uD130\uB97C \uBCF4\uB824\uBA74 \uBCC0\uACBD \uC0AC\uD56D\uC744 \uC800\uC7A5\uD558\uAC70\uB098 \uCDE8\uC18C\uD558\uACE0 \uD398\uC774\uC9C0\uB97C \uC0C8\uB85C \uACE0\uCE69\uB2C8\uB2E4.","WarningModelsWithCircularDependencies":"\uC77C\uBD80 \uBAA8\uB378\uC5D0 \uC6D0\uD615 \uC885\uC18D\uC131\uC774 \uC788\uC5B4 \uB85C\uB4DC\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4","LoadingModelErrorMessage":"Error occurred during the query execution"}}'),"ja-JP":JSON.parse('{"Validators":{"Autocomplete":{"Message":"\u30EA\u30B9\u30C8\u304B\u3089\u9805\u76EE\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044","SelectionWindowMessage":"\u30EA\u30B9\u30C8\u304B\u3089\u5024\u3092\u9078\u629E\u3059\u308B\u304B\u3001\u691C\u7D22\u7A93\u3088\u308A\u691C\u7D22\u3057\u3066\u304F\u3060\u3055\u3044"},"Required":{"Message":"\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044"},"MaxLength":{"Message":"\u6700\u5927\u6587\u5B57\u6570\u3092\u8D85\u3048\u307E\u3057\u305F ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"\u6700\u5C0F\u6587\u5B57\u6570\u306B\u9054\u3057\u3066\u3044\u307E\u305B\u3093 ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"\u65E5\u4ED8\u3068\u6642\u523B\u306E\u5F62\u5F0F\u304C\u6B63\u3057\u304F\u3042\u308A\u307E\u305B\u3093"},"DatePickerSyntax":{"Message":"\u7121\u52B9\u306A\u65E5\u4ED8\u30D5\u30A9\u30FC\u30DE\u30C3\u30C8"},"TimePickerSyntax":{"Message":"\u7121\u52B9\u306A\u6642\u9593\u5F62\u5F0F\u3067\u3059"},"RegExp":{"Message":"\u5024\u306E\u5F62\u5F0F\u304C\u7121\u52B9\u3067\u3059"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Code must start with the {{schemaNamePrefix}} prefix.","OnlySchemaNamePrefixMessage":"Enter at least one more symbol."},"SchemaNameAllowedSymbols":{"Message":"Use symbols: a-z, A-Z, 0-9, underscore or dash. Only letters can be first."}},"BaseViewModel":{"DataSourceAttributeRemoved":"\u5217\u304C\u524A\u9664\u3055\u308C\u307E\u3057\u305F","ValidationErrorMessageSingleErrorField":"\u30D5\u30A3\u30FC\u30EB\u30C9: {0}. \u30A8\u30E9\u30FC: {1}","ValidationErrorMessageSeveralErrorFields":"\u30D5\u30A3\u30FC\u30EB\u30C9: {0}. \u30A8\u30E9\u30FC: {1}","RefreshModelDataConflict":"Creatio\u306B\u306F\u73FE\u5728\u306E\u30DA\u30FC\u30B8\u306B\u65B0\u3057\u3044\u30C7\u30FC\u30BF\u304C\u3042\u308A\u307E\u3059\u3002 \u5909\u66F4\u3092\u8868\u793A\u3059\u308B\u306B\u306F\u3001\u4FDD\u5B58\u307E\u305F\u306F\u30AD\u30E3\u30F3\u30BB\u30EB\u3057\u3066\u30DA\u30FC\u30B8\u3092\u66F4\u65B0\u3057\u3066\u304F\u3060\u3055\u3044\u3002","WarningModelsWithCircularDependencies":"\u4E00\u90E8\u306E\u30E2\u30C7\u30EB\u306B\u306F\u5FAA\u74B0\u4F9D\u5B58\u95A2\u4FC2\u304C\u3042\u308A\u3001\u8AAD\u307F\u8FBC\u307E\u308C\u3066\u3044\u307E\u305B\u3093","LoadingModelErrorMessage":"Error occurred during the query execution"}}'),"fr-CA":JSON.parse(`{"Validators":{"Autocomplete":{"Message":"Merci de s\xE9lectionner la valeur dans la liste"},"Required":{"Message":"Saisir une valeur"},"MaxLength":{"Message":"Longueur maximale du texte d\xE9pass\xE9e ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Longueur de texte minimale non atteinte ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Format de date et d'heure non valide"},"DatePickerSyntax":{"Message":"Format de date invalide"},"TimePickerSyntax":{"Message":"Format d'heure non valide"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed"}}`),zh:JSON.parse('{"Validators":{"Autocomplete":{"Message":"Please select value from the list"},"Required":{"Message":"Enter a value"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed"}}'),"vi-VN":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Vui l\xF2ng ch\u1ECDn gi\xE1 tr\u1ECB t\u1EEB danh s\xE1ch","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"Nh\u1EADp m\u1ED9t gi\xE1 tr\u1ECB"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"},"RegExp":{"Message":"Invalid value format"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Code must start with the {{schemaNamePrefix}} prefix.","OnlySchemaNamePrefixMessage":"Enter at least one more symbol."},"SchemaNameAllowedSymbols":{"Message":"Use symbols: a-z, A-Z, 0-9, underscore or dash. Only letters can be first."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio has new data for the current page. To view it, save or cancel your changes and refresh the page.","WarningModelsWithCircularDependencies":"Some models have circular dependencies and have not been loaded","LoadingModelErrorMessage":"Error occurred during the query execution"}}'),"tr-TR":JSON.parse('{"Validators":{"Autocomplete":{"Message":"L\xFCtfen listeden de\u011Fer se\xE7in","SelectionWindowMessage":"L\xFCtfen listeden de\u011Fer se\xE7in veya arama penceresini kullanarak aray\u0131n"},"Required":{"Message":"De\u011Fer girin"},"MaxLength":{"Message":"Maksimum metin uzunlu\u011Fu a\u015F\u0131ld\u0131 ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum metin uzunlu\u011Funa ula\u015F\u0131lamad\u0131 ({{ActuAlghength}}/{{MinLength}})"},"DatetimePickerSyntax":{"Message":"Ge\xE7ersiz Tarih ve Saat Bi\xE7imi"},"DatePickerSyntax":{"Message":"Ge\xE7ersiz tarih bi\xE7imi"},"TimePickerSyntax":{"Message":"Ge\xE7ersiz Zaman Bi\xE7imi"},"RegExp":{"Message":"Ge\xE7ersiz de\u011Fer bi\xE7imi"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Kod {{schemanameprefix}} \xF6neki ile ba\u015Flamal\u0131d\u0131r.","OnlySchemaNamePrefixMessage":"En az bir sembol daha girin."},"SchemaNameAllowedSymbols":{"Message":"Sembolleri kullan\u0131n: A-Z, A-Z, 0-9, alt \xE7izgi veya \xE7izgi.\u0130lk \xF6nce sadece harfler olabilir."}},"BaseViewModel":{"DataSourceAttributeRemoved":"S\xFCtun kald\u0131r\u0131ld\u0131","ValidationErrorMessageSingleErrorField":"Alan: {0}.Hata: {1}","ValidationErrorMessageSeveralErrorFields":"Alanlar: {0}.Hata: {1}","RefreshModelDataConflict":"Creatio, ge\xE7erli sayfa i\xE7in yeni verilere sahiptir.G\xF6r\xFCnt\xFClemek i\xE7in de\u011Fi\u015Fikliklerinizi kaydedin veya iptal edin ve sayfay\u0131 yenileyin.","WarningModelsWithCircularDependencies":"Baz\u0131 modellerin dairesel ba\u011F\u0131ml\u0131l\u0131klar\u0131 vard\u0131r ve y\xFCklenmemi\u015Ftir","LoadingModelErrorMessage":"Sorgu y\xFCr\xFCtme s\u0131ras\u0131nda hata olu\u015Ftu"}}'),"th-TH":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Please select value from the list","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"\u0E1B\u0E49\u0E2D\u0E19\u0E04\u0E48\u0E32"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"},"RegExp":{"Message":"Invalid value format"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Code must start with the {{schemaNamePrefix}} prefix.","OnlySchemaNamePrefixMessage":"Enter at least one more symbol."},"SchemaNameAllowedSymbols":{"Message":"Use symbols: a-z, A-Z, 0-9, underscore or dash. Only letters can be first."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio has new data for the current page. To view it, save or cancel your changes and refresh the page.","WarningModelsWithCircularDependencies":"Some models have circular dependencies and have not been loaded","LoadingModelErrorMessage":"Error occurred during the query execution"}}'),"sv-SE":JSON.parse('{"Validators":{"Autocomplete":{"Message":"V\xE4nligen v\xE4lj v\xE4rde ur listan","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"Ange ett v\xE4rde"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"},"RegExp":{"Message":"Invalid value format"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Code must start with the {{schemaNamePrefix}} prefix.","OnlySchemaNamePrefixMessage":"Enter at least one more symbol."},"SchemaNameAllowedSymbols":{"Message":"Use symbols: a-z, A-Z, 0-9, underscore or dash. Only letters can be first."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio has new data for the current page. To view it, save or cancel your changes and refresh the page.","WarningModelsWithCircularDependencies":"Some models have circular dependencies and have not been loaded","LoadingModelErrorMessage":"Error occurred during the query execution"}}'),"ro-RO":JSON.parse('{"Validators":{"Autocomplete":{"Message":"V\u0103 rug\u0103m s\u0103 selecta\u021Bi valoarea din list\u0103","SelectionWindowMessage":"V\u0103 rug\u0103m s\u0103 selecta\u0163i valoarea din list\u0103 sau s\u0103 c\u0103uta\u0163i folosind fereastra lookup-ului"},"Required":{"Message":"Introdu o valoare"},"MaxLength":{"Message":"Lungimea maxim\u0103 a textului a fost dep\u0103\u0219it\u0103 ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Lungimea minim\u0103 a textului nu a fost atins\u0103 ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Format dat\u0103 \u0219i or\u0103 invalid"},"DatePickerSyntax":{"Message":"Format dat\u0103 invalid"},"TimePickerSyntax":{"Message":"Format orar invalid"},"RegExp":{"Message":"Format valoare invalid"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Codul trebuie s\u0103 \xEEnceap\u0103 cu {{schemaNamePrefix}}  prefix.","OnlySchemaNamePrefixMessage":"Introduce\u021Bi cel pu\u021Bin \xEEnc\u0103 un simbol."},"SchemaNameAllowedSymbols":{"Message":"Folosi\u021Bi simbolurile: a-z, A-Z, 0-9, underscore sau dash. Doar litere pot fi primul."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Coloan\u0103 eliminat\u0103","ValidationErrorMessageSingleErrorField":"C\xE2mp: {0}. Eroare: {1}","ValidationErrorMessageSeveralErrorFields":"C\xE2mpuri: {0}. Eroare: {1}","RefreshModelDataConflict":"Creatio are date noi pentru pagina curent\u0103. Pentru a o vizualiza, salva\u021Bi sau anula\u021Bi modific\u0103rile \u0219i re\xEEmprosp\u0103ta\u021Bi pagina.","WarningModelsWithCircularDependencies":"Unele modele au dependen\u021Be circulare \u0219i nu au fost \xEEnc\u0103rcate","LoadingModelErrorMessage":"A ap\u0103rut o eroare \xEEn timpul execut\u0103rii interog\u0103rii"}}'),"pt-PT":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Selecione um valor da lista","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"Insira um valor"},"MaxLength":{"Message":"Limite m\xE1ximo de texto excedido ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Limite m\xEDnimo de texto n\xE3o alcan\xE7ado ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Formado de data e hora inv\xE1lido"},"DatePickerSyntax":{"Message":"Formato de data inv\xE1lido"},"TimePickerSyntax":{"Message":"Formato de hora inv\xE1lido"},"RegExp":{"Message":"Invalid value format"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Code must start with the {{schemaNamePrefix}} prefix.","OnlySchemaNamePrefixMessage":"Enter at least one more symbol."},"SchemaNameAllowedSymbols":{"Message":"Use symbols: a-z, A-Z, 0-9, underscore or dash. Only letters can be first."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Coluna removida","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio has new data for the current page. To view it, save or cancel your changes and refresh the page.","WarningModelsWithCircularDependencies":"Some models have circular dependencies and have not been loaded","LoadingModelErrorMessage":"Error occurred during the query execution"}}'),"pt-BR":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Favor, selecionar um valor da lista","SelectionWindowMessage":"Selecionar o valor na lista ou pesquisar utilizando a janela de pesquisas"},"Required":{"Message":"Inserir um valor"},"MaxLength":{"Message":"Comprimento m\xE1ximo de texto excedido ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Comprimento m\xEDnimo do texto n\xE3o atingido ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Formato de data e hora inv\xE1lido"},"DatePickerSyntax":{"Message":"Formato de data inv\xE1lido"},"TimePickerSyntax":{"Message":"Formato de hora inv\xE1lido"},"RegExp":{"Message":"Formato de valor inv\xE1lido"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"O c\xF3digo deve come\xE7ar com o prefixo \\"{{schemaNamePrefix}}\\"","OnlySchemaNamePrefixMessage":"Inserir ao menos mais um s\xEDmbolo."},"SchemaNameAllowedSymbols":{"Message":"Usar os s\xEDmbolos: a-z, A-Z, 0-9, sublinhados ou tra\xE7os. Apenas letras podem vir primeiramente."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Coluna removida","ValidationErrorMessageSingleErrorField":"Campo: {0}. Erro: {1}","ValidationErrorMessageSeveralErrorFields":"Campos: {0}. Erro: {1}","RefreshModelDataConflict":"Creatio tem novos dados para a p\xE1gina atual. Para visualiz\xE1-los, salvar ou cancelar as suas altera\xE7\xF5es e atualizar a p\xE1gina.","WarningModelsWithCircularDependencies":"Alguns modelos t\xEAm depend\xEAncias circulares e n\xE3o foram carregadas","LoadingModelErrorMessage":"Ocorreu um erro durante a execu\xE7\xE3o da query"}}'),"pl-PL":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Wybierz warto\u015B\u0107 z listy","SelectionWindowMessage":"Prosz\u0119 wybra\u0107 warto\u015B\u0107 z listy lub wyszuka\u0107 za pomoc\u0105 okna wyszukiwania"},"Required":{"Message":"Wpisz warto\u015B\u0107"},"MaxLength":{"Message":"Przekroczono maksymaln\u0105 d\u0142ugo\u015B\u0107 tekstu ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimalna d\u0142ugo\u015B\u0107 tekstu nie zosta\u0142a osi\u0105gni\u0119ta ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Nieprawid\u0142owy format daty i godziny"},"DatePickerSyntax":{"Message":"Nieprawid\u0142owy format daty"},"TimePickerSyntax":{"Message":"Nieprawid\u0142owy format czasu"},"RegExp":{"Message":"Nieprawid\u0142owy format warto\u015Bci"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Kod musi zaczyna\u0107 si\u0119 od prefiksu \\"{{schemaNamePrefix}}\\"","OnlySchemaNamePrefixMessage":"Wprowad\u017A co najmniej jeden dodatkowy symbol."},"SchemaNameAllowedSymbols":{"Message":"U\u017Cyj symboli: a-z, A-Z, 0-9, podkre\u015Blenie lub my\u015Blnik. Tylko litery mog\u0105 by\u0107 pierwsze."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Kolumna usuni\u0119ta","ValidationErrorMessageSingleErrorField":"Pola: {0}. B\u0142\u0105d: {1}","ValidationErrorMessageSeveralErrorFields":"Pola: {0}. B\u0142\u0105d: {1}","RefreshModelDataConflict":"Creatio ma nowe dane dla bie\u017C\u0105cej strony. Aby je wy\u015Bwietli\u0107, zapisz lub anuluj zmiany i od\u015Bwie\u017C stron\u0119.","WarningModelsWithCircularDependencies":"Niekt\xF3re modele maj\u0105 cykliczne zale\u017Cno\u015Bci i nie zosta\u0142y za\u0142adowane","LoadingModelErrorMessage":"Wyst\u0105pi\u0142 b\u0142\u0105d podczas wykonywania zapytania"}}'),no:JSON.parse('{"Validators":{"Autocomplete":{"Message":"Please select value from the list"},"Required":{"Message":"Enter a value"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed"}}'),"nl-NL":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Selecteer een waarde uit de lijst","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"Voer een waarde in"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"},"RegExp":{"Message":"Invalid value format"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"De code moet beginnen met het prefix {{schemaNamePrefix}}.","OnlySchemaNamePrefixMessage":"Voer minstens nog \xE9\xE9n symbool in."},"SchemaNameAllowedSymbols":{"Message":"Gebruik symbolen: a-z, A-Z, 0-9, underscore of dash. Alleen letters kunnen eerst komen."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio has new data for the current page. To view it, save or cancel your changes and refresh the page.","WarningModelsWithCircularDependencies":"Some models have circular dependencies and have not been loaded","LoadingModelErrorMessage":"Error occurred during the query execution"}}'),"lv-LV":JSON.parse('{"Validators":{"Autocomplete":{"Message":"L\u016Bdzu, izv\u0113lieties v\u0113rt\u012Bbu no saraksta","SelectionWindowMessage":"L\u016Bdzu, izv\u0113lieties v\u0113rt\u012Bbu no saraksta vai mekl\u0113jiet, izmantojot logu"},"Required":{"Message":"Ievadiet v\u0113rt\u012Bbu"},"MaxLength":{"Message":"P\u0101rsniegts maksim\u0101lais teksta garums ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minim\u0101lais teksta garums nav sasniegts ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Neder\u012Bgs datuma un laika form\u0101ts"},"DatePickerSyntax":{"Message":"Neder\u012Bgs datu form\u0101ts"},"TimePickerSyntax":{"Message":"Neder\u012Bgs laika form\u0101ts"},"RegExp":{"Message":"Neder\u012Bgs v\u0113rt\u012Bbu form\u0101ts"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Kodam j\u0101s\u0101kas ar \\"{{schemaNamePrefix}}\\" prefiksu.","OnlySchemaNamePrefixMessage":"Ievadiet vismaz vienu simbolu."},"SchemaNameAllowedSymbols":{"Message":"Izmantojiet simbolus: a-z, A-Z, 0-9, pasv\u012Btrojums vai domuz\u012Bme. Tikai burti var b\u016Bt pirmie."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Kolonna no\u0146emta","ValidationErrorMessageSingleErrorField":"Lauka: {0}. K\u013C\u016Bda: {1}","ValidationErrorMessageSeveralErrorFields":"Lauki: {0}. K\u013C\u016Bda: {1}","RefreshModelDataConflict":"Creatio ir jauni dati pa\u0161reiz\u0113jai lapai. Lai tos apskat\u012Btu, saglab\u0101jiet vai atceliet savas izmai\u0146as un atjaunojiet lapu.","WarningModelsWithCircularDependencies":"Da\u017Eiem mode\u013Ciem ir apa\u013Cas atkar\u012Bbas un tie nav iel\u0101d\u0113ti","LoadingModelErrorMessage":"K\u013C\u016Bda notika vaic\u0101juma izpildes laik\u0101"}}'),"kk-KZ":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Please select value from the list"},"Required":{"Message":"Enter a value"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}"}}'),"it-IT":JSON.parse(`{"Validators":{"Autocomplete":{"Message":"Seleziona il valore dalla lista","SelectionWindowMessage":"Seleziona il valore dalla lista o cercalo usando la finestra di lookup"},"Required":{"Message":"Inserisci un valore"},"MaxLength":{"Message":"Lunghezza massima del testo superata ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Lunghezza minima del testo non raggiunta ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Formato data e ora non valido"},"DatePickerSyntax":{"Message":"Formato data non valido"},"TimePickerSyntax":{"Message":"Formato orario non valido"},"RegExp":{"Message":"Formato valore non valido"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Il codice deve iniziare con il prefisso {{schemaNamePrefix}}.","OnlySchemaNamePrefixMessage":"Inserisci almeno un altro simbolo."},"SchemaNameAllowedSymbols":{"Message":"Usa i simboli: a-z, A-Z, 0-9, trattino basso o trattino. Solo le lettere possono essere le prime."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Colonna rimossa","ValidationErrorMessageSingleErrorField":"Campo: {0}. Errore: {1}","ValidationErrorMessageSeveralErrorFields":"Campi: {0}. Errore: {1}","RefreshModelDataConflict":"Creatio ha nuovi dati per la pagina corrente. Per visualizzarli, salva o annulla le modifiche e aggiorna la pagina.","WarningModelsWithCircularDependencies":"Alcuni modelli hanno dipendenze circolari e non sono stati caricati","LoadingModelErrorMessage":"Errore durante l'esecuzione della query"}}`),"id-ID":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Silakan pilih nilai dari daftar","SelectionWindowMessage":"Pilih nilai dari daftar atau cari menggunakan jendela pencarian"},"Required":{"Message":"Masukkan nilai"},"MaxLength":{"Message":"Panjang teks maksimum terlampaui ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Panjang teks minimum tidak tercapai ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Format tanggal dan waktu tidak valid"},"DatePickerSyntax":{"Message":"Format tanggal tidak valid"},"TimePickerSyntax":{"Message":"Format waktu tidak valid"},"RegExp":{"Message":"Format nilai tidak valid"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Kode harus dimulai dengan awalan {{schemaNamePrefix}}.","OnlySchemaNamePrefixMessage":"Masukkan minimal satu simbol lagi."},"SchemaNameAllowedSymbols":{"Message":"Gunakan simbol: a-z, A-Z, 0-9, garis bawah atau tanda hubung. Hanya huruf yang bisa menjadi yang pertama."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Kolom dihapus","ValidationErrorMessageSingleErrorField":"Bidang {0}. Kesalahan: {1}","ValidationErrorMessageSeveralErrorFields":"Bidang {0}. Kesalahan: {1}","RefreshModelDataConflict":"Creatio memiliki data baru untuk halaman saat ini. Untuk melihatnya, simpan atau batalkan perubahan Anda dan perbarui halaman.","WarningModelsWithCircularDependencies":"Beberapa model memiliki referensi melingkar dan belum dimuat","LoadingModelErrorMessage":"Error occurred during the query execution"}}'),"he-IL":JSON.parse('{"Validators":{"Autocomplete":{"Message":"\u05D0\u05E0\u05D0 \u05D1\u05D7\u05E8 \u05E2\u05E8\u05DA \u05DE\u05D4\u05E8\u05E9\u05D9\u05DE\u05D4","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"\u05D4\u05D6\u05DF \u05E2\u05E8\u05DA"},"MaxLength":{"Message":"\u05D7\u05E8\u05D9\u05D2\u05D4 \u05DE\u05D0\u05D5\u05E8\u05DA \u05D4\u05D8\u05E7\u05E1\u05D8 \u05D4\u05DE\u05E8\u05D1\u05D9 ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"\u05DC\u05D0 \u05D4\u05D5\u05E9\u05D2 \u05D0\u05D5\u05E8\u05DA \u05D4\u05D8\u05E7\u05E1\u05D8 \u05D4\u05DE\u05D9\u05E0\u05D9\u05DE\u05DC\u05D9 ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"\u05E4\u05D5\u05E8\u05DE\u05D8 \u05EA\u05D0\u05E8\u05D9\u05DA \u05D5\u05E9\u05E2\u05D4 \u05DC\u05D0 \u05D7\u05D5\u05E7\u05D9"},"DatePickerSyntax":{"Message":"\u05E4\u05D5\u05E8\u05DE\u05D8 \u05EA\u05D0\u05E8\u05D9\u05DA \u05DC\u05D0 \u05E0\u05DB\u05D5\u05DF"},"TimePickerSyntax":{"Message":"\u05E4\u05D5\u05E8\u05DE\u05D8 \u05D6\u05DE\u05DF \u05DC\u05D0 \u05D7\u05D5\u05E7\u05D9"},"RegExp":{"Message":"Invalid value format"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"\u05D4\u05E7\u05D5\u05D3 \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05EA\u05D7\u05D9\u05DC \u05E2\u05DD \u05D4\u05E7\u05D9\u05D3\u05D5\u05DE\u05EA {{schemaNamePrefix}}.","OnlySchemaNamePrefixMessage":"\u05D4\u05D6\u05DF \u05DC\u05E4\u05D7\u05D5\u05EA \u05EA\u05D5 \u05E0\u05D5\u05E1\u05E3 \u05D0\u05D7\u05D3."},"SchemaNameAllowedSymbols":{"Message":"\u05D4\u05E9\u05EA\u05DE\u05E9 \u05D1\u05E1\u05DE\u05DC\u05D9\u05DD: a-z, A-Z, 0-9, \u05E7\u05D5 \u05EA\u05D7\u05EA\u05D9 \u05D0\u05D5 \u05DE\u05E7\u05E3. \u05E8\u05E7 \u05D0\u05D5\u05EA\u05D9\u05D5\u05EA \u05D9\u05DB\u05D5\u05DC\u05D5\u05EA \u05DC\u05D4\u05D9\u05D5\u05EA \u05E8\u05D0\u05E9\u05D5\u05E0\u05D5\u05EA."}},"BaseViewModel":{"DataSourceAttributeRemoved":"\u05D4\u05E2\u05DE\u05D5\u05D3\u05D4 \u05D4\u05D5\u05E1\u05E8\u05D4","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio has new data for the current page. To view it, save or cancel your changes and refresh the page.","WarningModelsWithCircularDependencies":"Some models have circular dependencies and have not been loaded","LoadingModelErrorMessage":"\u05D0\u05D9\u05E8\u05E2\u05D4 \u05E9\u05D2\u05D9\u05D0\u05D4 \u05D1\u05DE\u05D4\u05DC\u05DA \u05D1\u05D9\u05E6\u05D5\u05E2 \u05D4\u05E9\u05D0\u05D9\u05DC\u05EA\u05D4"}}'),"fr-FR":JSON.parse(`{"Validators":{"Autocomplete":{"Message":"Merci de s\xE9lectionner la valeur dans la liste","SelectionWindowMessage":"Merci de s\xE9lectionner une valeur dans la liste ou rechercher \xE0 l'aide de la fen\xEAtre de recherche"},"Required":{"Message":"Saisir une valeur"},"MaxLength":{"Message":"Longueur maximale du texte d\xE9pass\xE9e ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Longueur de texte minimale non atteinte ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Format de date et d'heure non valide"},"DatePickerSyntax":{"Message":"Format de date invalide"},"TimePickerSyntax":{"Message":"Format d'heure non valide"},"RegExp":{"Message":"Format de valeur invalide"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Le code doit commencer par le pr\xE9fixe \\"{{schemaNamePrefix}}\\"","OnlySchemaNamePrefixMessage":"Entrez au moins un symbole de plus."},"SchemaNameAllowedSymbols":{"Message":"Utilisez des symboles : a-z, A-Z, 0-9, tiret bas ou tiret. Seules les lettres peuvent \xEAtre en premier."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Colonne supprim\xE9e","ValidationErrorMessageSingleErrorField":"Champ: {0}. Erreur: {1}","ValidationErrorMessageSeveralErrorFields":"Champs : {0}. Erreur: {1}","RefreshModelDataConflict":"Creatio a de nouvelles donn\xE9es pour la page en cours. Pour les visualiser, enregistrez ou annulez vos modifications et actualisez la page.","WarningModelsWithCircularDependencies":"Certains mod\xE8les disposent de d\xE9pendances circulaires et n'ont pas \xE9t\xE9 charg\xE9s","LoadingModelErrorMessage":"Une erreur s'est produite lors de l'ex\xE9cution de la requ\xEAte"}}`),"fa-IR":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Please select value from the list"},"Required":{"Message":"\u06CC\u06A9 \u0645\u0642\u062F\u0627\u0631 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}"}}'),"es-ES":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Seleccione un valor de la lista","SelectionWindowMessage":"Por favor, seleccione el valor de la lista o busque usando la ventana de b\xFAsqueda"},"Required":{"Message":"Ingrese valor"},"MaxLength":{"Message":"Se super\xF3 la longitud m\xE1xima del texto ({{actualLength}} / {{maxLength}})"},"MinLength":{"Message":"No se alcanz\xF3 la longitud m\xEDnima del texto ({{actualLength}} / {{minLength}})"},"DatetimePickerSyntax":{"Message":"Formato de fecha y hora inv\xE1lido"},"DatePickerSyntax":{"Message":"Formato de fecha inv\xE1lido"},"TimePickerSyntax":{"Message":"Formato de hora inv\xE1lido"},"RegExp":{"Message":"Formato de valor inv\xE1lido"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"El c\xF3digo debe comenzar con el prefijo \\"{{schemaNamePrefix}}\\".","OnlySchemaNamePrefixMessage":"Ingrese al menos un s\xEDmbolo m\xE1s."},"SchemaNameAllowedSymbols":{"Message":"Use s\xEDmbolos: a-z, A-Z, 0-9, guion bajo o guion. Solo las letras pueden ser las primeras."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Columna eliminada","ValidationErrorMessageSingleErrorField":"Campo: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Campos: {0}. Error: {1}","RefreshModelDataConflict":"Creatio tiene nuevos datos para la p\xE1gina actual. Para verlo, guarde o cancele los cambios y actualice la p\xE1gina.","WarningModelsWithCircularDependencies":"Algunos modelos tienen dependencias circulares y no han sido cargados","LoadingModelErrorMessage":"Se produjo un error durante la ejecuci\xF3n de la consulta"}}'),"de-DE":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Bitte w\xE4hlen Sie einen Wert aus der Liste","SelectionWindowMessage":"Bitte w\xE4hlen Sie den Wert aus der Liste oder suchen Sie im Suchfenster"},"Required":{"Message":"Wert eingeben"},"MaxLength":{"Message":"Maximale Textl\xE4nge \xFCberschritten ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimale Textl\xE4nge nicht erreicht ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Ung\xFCltiges Datums- und Zeitformat"},"DatePickerSyntax":{"Message":"Ung\xFCltiges Datumsformat"},"TimePickerSyntax":{"Message":"Ung\xFCltiges Zeitformat"},"RegExp":{"Message":"Ung\xFCltiges Wertformat"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Code muss mit dem {{schemaNamePrefix}} Pr\xE4fix beginnen.","OnlySchemaNamePrefixMessage":"Geben Sie mindestens ein weiteres Zeichen ein."},"SchemaNameAllowedSymbols":{"Message":"Symbole verwenden: a-z, A-Z, 0-9, Unterstrich oder Bindestrich. Das erste Zeichen muss ein Buchstabe sein."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Spalte entfernt","ValidationErrorMessageSingleErrorField":"Felder: {0}. Fehler: {1}","ValidationErrorMessageSeveralErrorFields":"Felder: {0}. Fehler: {1}","RefreshModelDataConflict":"Creatio hat neue Daten f\xFCr die aktuelle Seite. Um sie anzuzeigen, speichern oder l\xF6schen Sie Ihre \xC4nderungen und aktualisieren Sie die Seite.","WarningModelsWithCircularDependencies":"Einige Modelle haben zirkul\xE4re Abh\xE4ngigkeiten und wurden nicht geladen","LoadingModelErrorMessage":"Fehler bei der Ausf\xFChrung der Abfrage"}}'),"cs-CZ":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Vyberte pros\xEDm hodnotu ze seznamu","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"Zadejte hodnotu"},"MaxLength":{"Message":"Byla p\u0159ekro\u010Dena maxim\xE1ln\xED d\xE9lka textu ({{Aktu\xE1ln\xEDD\xE9lka}}/{{Maxim\xE1ln\xEDD\xE9lka}})"},"MinLength":{"Message":"Nebyla dosa\u017Eena minim\xE1ln\xED d\xE9lka textu ({{Aktu\xE1ln\xEDD\xE9lka}}/{{Minim\xE1ln\xEDD\xE9lka}})"},"DatetimePickerSyntax":{"Message":"Neplatn\xFD form\xE1t data a \u010Dasu"},"DatePickerSyntax":{"Message":"Neplatn\xFD form\xE1t data"},"TimePickerSyntax":{"Message":"Neplatn\xFD form\xE1t \u010Dasu"},"RegExp":{"Message":"Invalid value format"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Code must start with the {{schemaNamePrefix}} prefix.","OnlySchemaNamePrefixMessage":"Enter at least one more symbol."},"SchemaNameAllowedSymbols":{"Message":"Use symbols: a-z, A-Z, 0-9, underscore or dash. Only letters can be first."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio has new data for the current page. To view it, save or cancel your changes and refresh the page.","WarningModelsWithCircularDependencies":"Some models have circular dependencies and have not been loaded","LoadingModelErrorMessage":"Error occurred during the query execution"}}'),"ar-SA":JSON.parse('{"Validators":{"Autocomplete":{"Message":"\u064A\u0631\u062C\u0649 \u062A\u062D\u062F\u064A\u062F \u0642\u064A\u0645\u0629 \u0645\u0646 \u0627\u0644\u0642\u0627\u0626\u0645\u0629","SelectionWindowMessage":"\u064A\u0631\u062C\u0649 \u062A\u062D\u062F\u064A\u062F \u0642\u064A\u0645\u0629 \u0645\u0646 \u0627\u0644\u0642\u0627\u0626\u0645\u0629 \u0623\u0648 \u0627\u0644\u0628\u062D\u062B \u0628\u0627\u0633\u062A\u062E\u062F\u0627\u0645 \u0646\u0627\u0641\u0630\u0629 \u0627\u0644\u0628\u062D\u062B"},"Required":{"Message":"\u0627\u062F\u062E\u0644 \u0642\u064A\u0645\u0629"},"MaxLength":{"Message":"\u062A\u062C\u0627\u0648\u0632 \u0627\u0644\u062D\u062F \u0627\u0644\u0623\u0642\u0635\u0649 \u0644\u0637\u0648\u0644 \u0627\u0644\u0646\u0635 ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"\u0644\u0645 \u064A\u062A\u0645 \u0628\u0644\u0648\u063A \u0627\u0644\u062D\u062F \u0627\u0644\u0623\u062F\u0646\u0649 \u0644\u0637\u0648\u0644 \u0627\u0644\u0646\u0635 ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"\u062A\u0646\u0633\u064A\u0642 \u0627\u0644\u062A\u0627\u0631\u064A\u062E \u0648\u0627\u0644\u0648\u0642\u062A \u063A\u064A\u0631 \u0635\u0627\u0644\u062D"},"DatePickerSyntax":{"Message":"\u062A\u0646\u0633\u064A\u0642 \u0627\u0644\u062A\u0627\u0631\u064A\u062E \u063A\u064A\u0631 \u0635\u0627\u0644\u062D"},"TimePickerSyntax":{"Message":"\u062A\u0646\u0633\u064A\u0642 \u0627\u0644\u0648\u0642\u062A \u063A\u064A\u0631 \u0635\u0627\u0644\u062D"},"RegExp":{"Message":"\u062A\u0646\u0633\u064A\u0642 \u0627\u0644\u0642\u064A\u0645\u0629 \u063A\u064A\u0631 \u0635\u0627\u0644\u062D"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"\u064A\u062C\u0628 \u0623\u0646 \u064A\u0628\u062F\u0623 \u0627\u0644\u0631\u0645\u0632 \u0628\u0628\u0627\u062F\u0626\u0629 {{schemaNamePrefix}}.","OnlySchemaNamePrefixMessage":"\u0623\u062F\u062E\u0644 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644 \u0631\u0645\u0632 \u0625\u0636\u0627\u0641\u064A \u0648\u0627\u062D\u062F."},"SchemaNameAllowedSymbols":{"Message":"\u0627\u0633\u062A\u062E\u062F\u0645 \u0627\u0644\u0631\u0645\u0648\u0632: a-z\u060C \u0623\u0648 A-Z \u0623\u0648 0-9 (_) \u0623\u0648 (-). \u0648\u064A\u0645\u0643\u0646 \u0641\u0642\u0637 \u0644\u0644\u062D\u0631\u0648\u0641 \u0623\u0646 \u062A\u0643\u0648\u0646 \u0623\u0648\u0644\u064B\u0627."}},"BaseViewModel":{"DataSourceAttributeRemoved":"\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0639\u0645\u0648\u062F","ValidationErrorMessageSingleErrorField":"\u0627\u0644\u062D\u0642\u0644: {0}. \u0627\u0644\u062E\u0637\u0623: {1}","ValidationErrorMessageSeveralErrorFields":"\u0627\u0644\u062D\u0642\u0648\u0644: {0}. \u0627\u0644\u062E\u0637\u0623: {1}","RefreshModelDataConflict":"\u0644\u062F\u0649 Creatio \u0628\u064A\u0627\u0646\u0627\u062A \u062C\u062F\u064A\u062F\u0629 \u0644\u0644\u0635\u0641\u062D\u0629 \u0627\u0644\u062D\u0627\u0644\u064A\u0629. \u0644\u0639\u0631\u0636\u0647\u0627\u060C \u064A\u062C\u0628 \u062D\u0641\u0638 \u0623\u0648 \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062A\u063A\u064A\u064A\u0631\u0627\u062A \u0627\u0644\u062E\u0627\u0635\u0629 \u0628\u0643 \u0648\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0635\u0641\u062D\u0629.","WarningModelsWithCircularDependencies":"\u0628\u0639\u0636 \u0627\u0644\u0646\u0645\u0627\u0630\u062C \u0644\u0647\u0627 \u062A\u0628\u0639\u064A\u0627\u062A \u062F\u0627\u0626\u0631\u064A\u0629 \u0648\u0644\u0645 \u064A\u062A\u0645 \u062A\u062D\u0645\u064A\u0644\u0647\u0627","LoadingModelErrorMessage":"Error occurred during the query execution"}}'),"en-US":JSON.parse(`{"Validators":{"Autocomplete":{"Message":"Please select value from the list","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"Enter a value"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"},"RegExp":{"Message":"Invalid value format"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Code must start with the {{schemaNamePrefix}} prefix.","OnlySchemaNamePrefixMessage":"Enter at least one more symbol."},"SchemaNameAllowedSymbols":{"Message":"Use symbols: a-z, A-Z, 0-9, underscore or dash. Only letters can be first."},"UniqueCodeColumnValue":{"Message":"The value '{{controlValue}}' already exists in the 'Code' column."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio has new data for the current page. To view it, save or cancel your changes and refresh the page.","WarningModelsWithCircularDependencies":"Some models have circular dependencies and have not been loaded","LoadingModelErrorMessage":"Error occurred during the query execution"},"LoadDataRequest":{"SuccessMessage":"Data has been refreshed"}}`),"ru-RU":JSON.parse(`{"Validators":{"Autocomplete":{"Message":"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0438\u0437 \u0441\u043F\u0438\u0441\u043A\u0430","SelectionWindowMessage":"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0438\u0437 \u0441\u043F\u0438\u0441\u043A\u0430 \u0438\u043B\u0438 \u043E\u043A\u043D\u0430 \u0432\u044B\u0431\u043E\u0440\u0430"},"Required":{"Message":"\u041D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0443\u043A\u0430\u0437\u0430\u0442\u044C \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"},"MaxLength":{"Message":"\u041F\u0440\u0435\u0432\u044B\u0448\u0435\u043D\u0430 \u0434\u043E\u043F\u0443\u0441\u0442\u0438\u043C\u0430\u044F \u0434\u043B\u0438\u043D\u0430 \u0442\u0435\u043A\u0441\u0442\u0430 ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"\u041D\u0435 \u0434\u043E\u0441\u0442\u0438\u0433\u043D\u0443\u0442\u0430 \u0434\u043E\u043F\u0443\u0441\u0442\u0438\u043C\u0430\u044F \u0434\u043B\u0438\u043D\u0430 \u0442\u0435\u043A\u0441\u0442\u0430 ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 \u0434\u0430\u0442\u044B \u0438 \u0432\u0440\u0435\u043C\u0435\u043D\u0438"},"DatePickerSyntax":{"Message":"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 \u0434\u0430\u0442\u044B"},"TimePickerSyntax":{"Message":"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 \u0432\u0440\u0435\u043C\u0435\u043D\u0438"},"RegExp":{"Message":"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"\u041A\u043E\u0434 \u0434\u043E\u043B\u0436\u0435\u043D \u043D\u0430\u0447\u0438\u043D\u0430\u0442\u044C\u0441\u044F \u0441 \u043F\u0440\u0435\u0444\u0438\u043A\u0441\u0430 {{schemaNamePrefix}}.","OnlySchemaNamePrefixMessage":"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0445\u043E\u0442\u044F \u0431\u044B \u0435\u0449\u0435 \u043E\u0434\u0438\u043D \u0441\u0438\u043C\u0432\u043E\u043B."},"SchemaNameAllowedSymbols":{"Message":"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 a-z, A-Z, 0-9, \u043D\u0438\u0436\u043D\u0435\u0435 \u043F\u043E\u0434\u0447\u0435\u0440\u043A\u0438\u0432\u0430\u043D\u0438\u0435 \u0438\u043B\u0438 \u0442\u0438\u0440\u0435. \u0422\u043E\u043B\u044C\u043A\u043E \u0431\u0443\u043A\u0432\u044B \u043C\u043E\u0433\u0443\u0442 \u0431\u044B\u0442\u044C \u043F\u0435\u0440\u0432\u044B\u043C\u0438."},"UniqueCodeColumnValue":{"Message":"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 '{{controlValue}}' \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0432 \u043A\u043E\u043B\u043E\u043D\u043A\u0435 '\u041A\u043E\u0434'."}},"BaseViewModel":{"DataSourceAttributeRemoved":"\u041A\u043E\u043B\u043E\u043D\u043A\u0430 \u0443\u0434\u0430\u043B\u0435\u043D\u0430","ValidationErrorMessageSingleErrorField":"\u041F\u043E\u043B\u0435: {0}. \u041E\u0448\u0438\u0431\u043A\u0430: {1}","ValidationErrorMessageSeveralErrorFields":"\u041F\u043E\u043B\u044F: {0}. \u041E\u0448\u0438\u0431\u043A\u0430: {1}","RefreshModelDataConflict":"\u0412 \u0441\u0438\u0441\u0442\u0435\u043C\u0435 \u0435\u0441\u0442\u044C \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 \u0434\u043B\u044F \u0442\u0435\u043A\u0443\u0449\u0435\u0439 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u044B. \u0427\u0442\u043E\u0431\u044B \u0438\u0445 \u043E\u0442\u043E\u0431\u0440\u0430\u0437\u0438\u0442\u044C. \u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u0435 \u0438\u043B\u0438 \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u0435 \u0432\u043D\u0435\u0441\u0435\u043D\u043D\u044B\u0435 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0438 \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443.","WarningModelsWithCircularDependencies":"\u041D\u0435\u043A\u043E\u0442\u043E\u0440\u044B\u0435 \u043C\u043E\u0434\u0435\u043B\u0438 \u0438\u043C\u0435\u044E\u0442 \u0446\u0438\u043A\u043B\u0438\u0447\u0435\u0441\u043A\u0438\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u043C\u043E\u0441\u0442\u0438 \u0438 \u043D\u0435 \u0431\u044B\u043B\u0438 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u044B","LoadingModelErrorMessage":"\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u0438 \u0437\u0430\u043F\u0440\u043E\u0441\u0430"},"LoadDataRequest":{"SuccessMessage":"\u0414\u0430\u043D\u043D\u044B\u0435 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u044B"}}`)};var ne=a(59131);let ie=class ke{static{this.\u0275fac=function(oe){return new(oe||ke)}}static{this.\u0275mod=ne.\u0275\u0275defineNgModule({type:ke})}static{this.\u0275inj=ne.\u0275\u0275defineInjector({providers:[d.LZ,d._h,o.n,b.ff,I.FeatureService,{provide:b.dX,useClass:y.C},{provide:S.k,useClass:S.e},{provide:j.d,useClass:j.X},A.USER_INFO_PROVIDER,d.J_,A.ResourceFinderService,b.e3,{provide:u.LL,useClass:b.Z$},{provide:v.C_,useValue:A.DefaultZones.Root},{provide:A.CRT_NAVIGATION_LOCK_TOKEN,useValue:A.CrtNoopNavigationLock.instance},_.b,b.iQ,b.Xz,d.DC,d.yf],imports:[c.CommonModule,M.ReactiveFormsModule,b.qG,F.CrtLibTranslateModule.forRoot({i18n:te}),L.BusinessRulesModule,x.ExpressionEngineModule]})}};ie=(0,s.__decorate)([(0,I.CrtModule)({includes:[x.ExpressionEngineModule],requestHandlers:[l.LZ,l.q,l.$9,l.jE,l.c7,l._,l.gK,l.Qu,l.U8,l.Cw,l.V5,l.XW],validators:[u.j8,u.zX,u.tU,u.VZ,u.xh,u.Qu,u.YS,u.X9,u.Kz,u.Fg]})],ie),function(){(typeof ngJitMode>"u"||ngJitMode)&&ne.\u0275\u0275setNgModuleScope(ie,{imports:[c.CommonModule,M.ReactiveFormsModule,b.qG,F.CrtLibTranslateModule,L.BusinessRulesModule,x.ExpressionEngineModule]})}()},80246:(J,$,a)=>{a.d($,{K:()=>T});var s=a(5960),c=a.n(s),M=a(38495),I=a.n(M),F=a(96590),L=a.n(F),A=a(21018),x=a.n(A),d=a(28399),l=a.n(d),v=a(62278),j=a.n(v),o=a(36486),u=a.n(o),_=a(57117),b=a(11848),y=a(49159),S=a(46416),R=a(86036);const B={[A.ModelMode.Init]:[A.ModelMode.Create,A.ModelMode.Copy,A.ModelMode.Update,A.ModelMode.Delete],[A.ModelMode.Copy]:[A.ModelMode.Delete,A.ModelMode.Update],[A.ModelMode.Create]:[A.ModelMode.Copy,A.ModelMode.Delete,A.ModelMode.Update],[A.ModelMode.Delete]:[A.ModelMode.Copy,A.ModelMode.Create,A.ModelMode.Update,A.ModelMode.Init],[A.ModelMode.Update]:[A.ModelMode.Delete],[A.ModelMode.Unknown]:[]};function D(U){const f={success:!1,rowsAffected:0,errorInfo:""};return typeof U=="string"?Object.assign(f,{errorInfo:U}):U instanceof Error?Object.assign(f,{errorInfo:U.message}):Object.assign(f,typeof U=="object"?U:{errorInfo:U})}class T{get _children(){return this._children$.value}static get instance(){return this._instance||(this._instance=new T(null,null)),this._instance}constructor(f,P){this._injector=f,this.dataSource=P,this._lookupDataSourceName="lookupDataSource",this._id=(0,M.generateGuid)(),this._modeChanges=new v.Subject,this._destroyed$=new v.Subject,this._children$=new v.BehaviorSubject([]),this._childrenDirty$=new v.BehaviorSubject(!1),this._childrenModes$=new v.BehaviorSubject([]),this._isCollectionModel=!1,this._isCollectionItemModel=!1,this._mode=A.ModelMode.Init,this._isInitialized=!1,this._isLoaded=!1,this._dirtyAttributes=new Set,this._newLoadingRequestArrived=new v.Subject,this._attributesMap=[],this._selfDirty$=new v.BehaviorSubject(!1),this._isLoading=!1,this._destroyed=!1,this._dirty$=(0,v.combineLatest)([this._selfDirty$,this._childrenDirty$,this._childrenModes$]).pipe((0,o.map)(([e,t,i])=>e||t||i.includes(A.ModelMode.Copy)||i.includes(A.ModelMode.Create)),(0,o.distinctUntilChanged)()),this._loadedData=new Set,this._injector&&(this._dataSourceFactory=this._injector.get(_.LZ),this._lifecycleHookNotificationService=this._injector.get(S.bg,null,{optional:!0}),this._measurePerformanceService=this._injector.get(A.MeasurePerformanceService,null,{optional:!0}))}static create(f){return(0,v.from)(this.instance._create({type:"crt.EntityDataSource",config:{entitySchemaName:f}},""))}get name(){return this.dataSource?this.dataSource.dataSourceName:""}get mode(){return this._isCollectionModel?A.ModelMode.Unknown:this._mode}get _modeChanges$(){return this._modeChanges.asObservable()}get _isChanged(){return!!this._dirtyAttributes?.size}set _isCollection(f){this._isCollectionModel=f,this._isCollectionModel&&(this._mode=A.ModelMode.Unknown)}get isLoaded(){return this._isLoaded}get event$(){return y.q.instance.event$.pipe((0,o.filter)(()=>this._isInitialized),(0,o.filter)(()=>!this._isCollectionItemModel),(0,o.filter)(({dataSchemaName:f})=>f===this._dataSchemaName),(0,o.tap)(({type:f,modelId:P,payload:e})=>this._updateLoadedData(f,P,e)),(0,o.filter)(({modelId:f})=>f!==this._id&&!this._isChild(f)),(0,o.map)(f=>({event:f,ownPrimaryAttributesValues:f.payload?.primaryAttributesValues?.filter(P=>{const e=R.H.serializeRecordPrimaryAttributesValues(P);return this._loadedData.has(e)})})),(0,o.filter)(({event:f,ownPrimaryAttributesValues:P})=>f.type===b.MQ.Update||f.type===b.MQ.Delete?!P||P.length!==0:!0),(0,o.map)(({event:f,ownPrimaryAttributesValues:P})=>({event:f,primaryAttributesValues:f.type===b.MQ.Create?f.payload.primaryAttributesValues:P})),(0,o.map)(({event:f,primaryAttributesValues:P})=>({modelId:f.modelId,dataSchemaName:f.dataSchemaName,type:f.type,payload:{...f.payload,primaryAttributesValues:P}})),(0,o.takeUntil)(this._destroyed$))}get dataSchemaName(){return this._dataSchemaName}get allowSync(){return!this._disableSync}get disableSync(){return this._disableSync}set disableSync(f){this._disableSync=f}get isLoading(){return this._isLoading}get hasErrors(){return this.dataSource?this.dataSource.hasErrors:!0}get hasCriticalErrors(){return this.dataSource?this.dataSource.hasCriticalErrors:!0}get affectedAttributes(){return this.dataSource?this.dataSource.affectedAttributes:[]}get isAggregate(){return this.dataSource?this.dataSource.isAggregate:!1}get isCollectionItemModel(){return this._isCollectionItemModel}get isInitialized(){return this._isInitialized}_isChild(f){return this._children.some(P=>P?._id===f)}_subscribeChildrenModeChanges(){this._children$.pipe((0,o.map)(f=>f.map(P=>(0,v.merge)((0,v.of)(P.mode),P._modeChanges$))),(0,o.switchMap)(f=>f?.length?(0,v.combineLatest)(f):(0,v.of)([])),(0,o.tap)(f=>this._childrenModes$.next(f)),(0,o.takeUntil)(this._destroyed$)).subscribe()}_subscribeChildrenDirtyChanges(){this._children$.pipe((0,o.map)(f=>f.map(P=>P._dirty$)),(0,o.switchMap)(f=>f?.length?(0,v.combineLatest)(f):(0,v.of)([])),(0,o.map)(f=>f.some(P=>P)),(0,o.tap)(f=>this._childrenDirty$.next(f)),(0,o.takeUntil)(this._destroyed$)).subscribe()}_updateLoadedData(f,P,e){this._isCollectionModel&&f===b.MQ.Create&&this._isChild(P)&&e.primaryAttributesValues.forEach(t=>{const i=R.H.serializeRecordPrimaryAttributesValues(t);this._loadedData.add(i)})}_setMode(f){if(this._mode===f)return;if(!B[this._mode]?.includes(f))throw Error(`Unable to mark model with '${this._mode}' mode for '${f}'.`);const e=this._mode;this._mode=f,f===A.ModelMode.Delete&&this._selfDirty$.next(e!==A.ModelMode.Create)}_markForNotCollection(f){this._isCollectionModel||this.markFor(f)}_registerPrimaryAttributeValues(f){f.forEach(P=>{this._loadedData.add(R.H.serializeRecordPrimaryAttributesValues(P))})}_getDependentAttributesNames(f){return this._attributesMap.filter(P=>f.includes(P.name)).filter(P=>P.dependentAttributes.length!==0).map(P=>P.dependentAttributes).flat()}_getDefaultLoadAttributes(){return this.getSchema().pipe((0,o.map)(f=>f.getPrimaryLoadAttributes()))}_checkAttributesInDataSchema(f){return this.getSchema().pipe((0,o.tap)(P=>{const e=f.filter(t=>P.findAttributeByName(t)==null);if(e.length>0)throw new Error(`data has unknown attributes names: ${e.join(", ")}`)}))}_createDataSource(f,P,e=null){const t=e??P.dataSourceConfig;return this._dataSourceFactory.create(f,t)}_notifyEventByParameters(f,P){return this.getSchema().pipe((0,o.map)(e=>R.H.getPrimaryAttributeValuesFromParameters(e,f)),(0,o.mergeMap)(e=>this._notifyDataChange(e,P)))}_notifyDataChange(f,P){return this.getSchema().pipe((0,o.map)(e=>R.H.getModelPrimaryAttributeValues(e,f)),(0,o.tap)(e=>{y.q.instance.notify({modelId:this._id,dataSchemaName:this._dataSchemaName,type:P,payload:{primaryAttributesValues:e}})}),(0,o.map)(()=>null))}_mapSaveResult(f,P,e){return this.getSchema().pipe((0,o.map)(t=>({result:f,actionType:b.MQ.Update,data:R.H.getPrimaryAttributeValues(t,P,e)})))}_mapInsertResult(f){return{data:f.primaryAttributes??[],result:f,actionType:b.MQ.Create}}_getLoadAttributes(f){if(f&&f.length!==0){let P=null;if(f.every(t=>(0,d.isString)(t)))return P=this._getDependentAttributesNames(f),(0,v.of)([...f,...P]);{const t=f.map(i=>i.name);return P=this._getDependentAttributesNames(t),this.getSchema().pipe((0,o.map)(i=>(P=P.map(r=>i.findAttributeByName(r)).map(r=>({name:r.name,path:r.path,caption:r.caption,dataValueType:r.dataValueType,aggregationConfig:r.aggregationConfig})),[...f,...P])))}}return this._getDefaultLoadAttributes()}_getChangedAttributesValues(f){return this._persistedState?Object.entries({...this._persistedState,...f}).filter(([P])=>this._dirtyAttributes.has(P)).reduce((P,[e,t])=>Object.assign(P,{[e]:t}),{}):f}_load(f,P,e,t=A.ModelMode.Update){const i={attributes:f,parameters:P,options:e,mode:t},r=(0,d.cloneDeep)(this._lastRequestPayload),n=(0,d.isEqual)((0,d.omit)(i,"options.loadType"),(0,d.omit)(r,"options.loadType"));return this._loadingRequest&&n?this._loadingRequest:(this._lastRequestPayload&&!n&&(this._newLoadingRequestArrived.next(null),this._newLoadingRequestArrived=new v.Subject),this._lastRequestPayload=i,this._loadingRequest=this._getLoadAttributes(f).pipe((0,F.switchMapWithout)(()=>this._onBeforeLoad(i,r)),(0,o.switchMap)(m=>this.dataSource.load(m,P,e)),(0,o.takeUntil)(this._newLoadingRequestArrived),(0,o.tap)(()=>this._markForNotCollection(t)),(0,F.mergeMapWith)(()=>this.getSchema()),(0,o.tap)(([m,C])=>{this._registerPrimaryAttributeValues(R.H.getModelPrimaryAttributeValues(C,m))}),(0,o.tap)(()=>this._persistedState={}),(0,o.map)(([m,C])=>R.H.processImageData(C,m,f)),(0,o.tap)(()=>this._isLoaded=!0),(0,F.switchMapWithout)(()=>this._onAfterLoad(i,r)),(0,o.catchError)(m=>(this._isLoaded=!1,(0,v.throwError)(()=>m))),(0,o.tap)(()=>{this._markAsPristine(),this._loadingRequest=null}),(0,o.share)()),this._loadingRequest)}_updateAttributesDependencies(){this._attributesMap.forEach(P=>P.dependentAttributes=[]),this._attributesMap.filter(P=>P.attributeType!==M.DataSchemaAttributeType.OwnAttribute).forEach(P=>{const e=P.path.split(".");if(e.length===1)return;const t=e.shift(),i=this._attributesMap.find(r=>r.path===t);i?.dependentAttributes.push(P.name)})}_buildAttributesMap(f){const P=f.attributes??[];this._attributesMap=P.map(e=>({name:e.name,path:e.path,attributeType:e.attributeType,dependentAttributes:[],isSchemaAttribute:!0})),this._updateAttributesDependencies()}_loadDependentDataForCreate(f){return this.getSchema().pipe((0,o.map)(P=>P.attributes.filter(e=>e.dataValueType===M.DataValueType.Lookup).filter(e=>e.name in f).map(e=>e.name)),(0,o.switchMap)(P=>{if(P.length===0)return(0,v.of)([]);const e=P.map(t=>this.reloadDependentData(t,f[t]));return(0,v.forkJoin)(e)}),(0,o.map)(P=>{let e={};return P.forEach(t=>{e={...e,...t[0]||{}}}),{...e,...f}}))}_getDependentAttributesInfo(f){return this.getSchema().pipe((0,o.map)(P=>f.map(e=>{const t=P.findAttributeByName(e),i=t?.path??e,r=t?.name??e,n=t?.aggregationConfig??null,m=t?.dataValueType??null,C=t?.attributeType??null,O=i.split(".");O.shift();const W=O.length===1?O[0]:r;let g;return C===M.DataSchemaAttributeType.AggregationAttribute?g=M.DataSchemaAttributeType.AggregationAttribute:g=O.length===1?M.DataSchemaAttributeType.OwnAttribute:M.DataSchemaAttributeType.ForwardReferenceAttribute,{alias:W,attributeName:r,config:{path:O.join("."),aggregationConfig:n,dataValueType:m,type:g},type:g}})))}_markAsPristine(){this._selfDirty$.next(!1)}_onBeforeLoad(f,P){return this._lifecycleHookNotificationService?.onBeforeLoad?(0,v.from)(this._lifecycleHookNotificationService.onBeforeLoad({model:this,payload:{attributes:f?.attributes,options:f?.options,parameters:f?.parameters},previousPayload:{attributes:P?.attributes,options:P?.options,parameters:P?.parameters}})).pipe((0,o.map)(e=>{if(e===!1)throw Error('Loading is disallowed by a "OnBeforeLoad" model lifecycle event')})):(0,v.of)(void 0)}_onAfterLoad(f,P){return this._lifecycleHookNotificationService?.onAfterLoad?(0,v.from)(this._lifecycleHookNotificationService.onAfterLoad({model:this,payload:{attributes:f?.attributes,options:f?.options,parameters:f?.parameters},previousPayload:{attributes:P?.attributes,options:P?.options,parameters:P?.parameters}})):(0,v.of)(void 0)}_onBeforeInsert(f){return this._lifecycleHookNotificationService?.onBeforeInsert?this.getSchema().pipe((0,o.map)(P=>R.H.getModelPrimaryAttributeValues(P,[f])),(0,o.map)(P=>P.pop()),(0,o.switchMap)(P=>this._lifecycleHookNotificationService.onBeforeInsert({model:this,payload:{data:f,primaryAttributesValues:P}})),(0,o.map)(P=>{if(P===!1)throw Error('Inserting is disallowed by a "OnBeforeInsert" model lifecycle event')})):(0,v.of)(void 0)}_innerInsert(f){return this.dataSource.insert(f).pipe((0,o.map)(P=>this._mapInsertResult(P)),(0,o.tap)(()=>this._persistedState={}),(0,o.tap)(()=>this._markAsPristine()),(0,o.tap)(()=>this._markForNotCollection(A.ModelMode.Update)),(0,F.mergeMapWith)(()=>this.getSchema()),(0,o.tap)(([,P])=>{this._registerPrimaryAttributeValues(R.H.getModelPrimaryAttributeValues(P,[f]))}),(0,o.map)(([P])=>P),(0,F.mergeMapWithout)(({data:P,actionType:e})=>this._notifyDataChange(P,e)),(0,o.map)(({result:P})=>P))}_onAfterInsert(f){return this._lifecycleHookNotificationService?.onAfterInsert?(0,v.from)(this._lifecycleHookNotificationService.onAfterInsert({model:this,payload:{data:f}})):(0,v.of)(void 0)}_onBeforeUpdate(f,P){return this._lifecycleHookNotificationService?.onBeforeUpdate?(0,v.from)(this._lifecycleHookNotificationService.onBeforeUpdate({model:this,payload:{data:f,parameters:P}})).pipe((0,o.map)(e=>{if(e===!1)throw Error('Updating is disallowed by a "OnBeforeUpdate" model lifecycle event')})):(0,v.of)(void 0)}_innerUpdate(f,P){return this.dataSource.save(P,f).pipe((0,o.mergeMap)(e=>this._mapSaveResult(e,f,P)),(0,F.mergeMapWithout)(()=>this._notifyEventByParameters(P,b.MQ.Update)),(0,o.map)(({result:e})=>e),(0,o.tap)(()=>this.setLoadedState()))}_onAfterUpdate(f,P){return this._lifecycleHookNotificationService?.onAfterUpdate?(0,v.from)(this._lifecycleHookNotificationService.onAfterUpdate({model:this,payload:{data:f,parameters:P}})):(0,v.of)(void 0)}_onBeforeDelete(f){return this._lifecycleHookNotificationService?.onBeforeDelete?(0,v.from)(this._lifecycleHookNotificationService.onBeforeDelete({model:this,payload:{parameters:f}})).pipe((0,o.map)(P=>{if(P===!1)throw Error('Deleting is disallowed by a "OnBeforeDelete" model lifecycle event')})):(0,v.of)(void 0)}_innerDelete(f){return this.dataSource.delete(f).pipe((0,o.tap)(()=>this._markAsPristine()),(0,o.tap)(()=>this._markForNotCollection(A.ModelMode.Init)),(0,F.mergeMapWithout)(()=>this._notifyEventByParameters(f,b.MQ.Delete)))}_onAfterDelete(f){return this._lifecycleHookNotificationService?.onAfterDelete?(0,v.from)(this._lifecycleHookNotificationService.onAfterDelete({model:this,payload:{parameters:f}})):(0,v.of)(void 0)}init(){return this.getSchema().pipe((0,o.tap)(f=>this._dataSchemaName=f.name),(0,o.tap)(f=>this._buildAttributesMap(f)),(0,o.map)(()=>this),(0,o.tap)(()=>this._isInitialized=!this.hasCriticalErrors),(0,o.tap)(()=>{this._subscribeChildrenModeChanges(),this._subscribeChildrenDirtyChanges()}),(0,o.take)(1))}getSchema(){if(!this.dataSource)return(0,v.of)(null);if(this.hasCriticalErrors)return(0,v.of)(this.dataSource.getEmptySchema());const f=this.dataSource.getSchema();return this._measurePerformanceService?f.pipe(this._measurePerformanceService.measure$(`model.getSchema.${this.name}`)):f}getDataSource(){return this.dataSource}load(f){if(this._destroyed)return(0,v.of)([]);this._isLoading=!0;const P=f?.attributes,e=f?.parameters||[],t=R.H.getDataSourceLoadOptions(f?.options);return this._load(P,e,t).pipe((0,o.tap)(()=>this._isLoading=!1),(0,o.catchError)(i=>(this._isLoading=!1,(0,v.throwError)(()=>i))))}updateDependentAttributes(f){this._attributesMap=this._attributesMap.filter(t=>t.isSchemaAttribute);const P=this._attributesMap.map(t=>t.name),e=f.filter(t=>!P.includes(t.path)).map(t=>({name:t.path,path:t.path,attributeType:t.type??M.DataSchemaAttributeType.ForwardReferenceAttribute,dependentAttributes:[],isSchemaAttribute:!1}));this._attributesMap.push(...e),this._updateAttributesDependencies()}canReloadDependentData(f){return this._getDependentAttributesNames([f]).length!==0}getDependentAttributesNames(f){return this._getDependentAttributesNames([f])}reloadDependentData(f,P){const e=this._getDependentAttributesNames([f]);if(e.length===0)return(0,v.of)([]);if(P==null)return(0,v.of)([Object.fromEntries(e.map(r=>[r,null]))]);const t=[{type:M.ModelParameterType.PrimaryColumnValue,value:P}],i=new Map;return(0,v.forkJoin)([this._getDependentAttributesInfo(e),this.dataSource.getLookupDataSchema(f)]).pipe((0,o.switchMap)(([r,n])=>{const m=r.filter(O=>O.type!==M.DataSchemaAttributeType.OwnAttribute).map(O=>[O.alias,O.config]),C={type:n.dataSourceConfig.type,config:{...n.dataSourceConfig.config,attributes:Object.fromEntries(m)}};return r.forEach(O=>{i.set(O.alias,O.attributeName)}),this._createDataSource(`${this.name}_reloadData`,n,C)}),(0,o.switchMap)(r=>r.load([...i.keys()],t,{throttled:!0})),(0,o.map)(r=>r.map(n=>{const m={};return i.forEach((C,O)=>{m[C]=n[O]}),m})))}create(f={}){return this._isLoading=!0,this.getSchema().pipe((0,o.map)(P=>R.H.getOwnColumnsValues(P,f)),(0,o.switchMap)(P=>(0,v.forkJoin)([(0,v.of)(P),this.dataSource.getDefaultValues()])),(0,o.tap)(()=>this._markForNotCollection(A.ModelMode.Create)),(0,o.map)(([P,e])=>(this._persistedState={...e,...P},this._persistedState)),(0,o.switchMap)(P=>this._loadDependentDataForCreate(P)),(0,o.tap)(()=>this._isLoading=!1))}copy(f,P={}){return this._isLoading=!0,this.getSchema().pipe((0,o.map)(e=>({schema:e,attributes:e.attributes.filter(t=>t.attributeType===M.DataSchemaAttributeType.OwnAttribute&&t.isValueCloneable).map(t=>t.name),parameters:typeof f=="string"?[{type:M.ModelParameterType.PrimaryColumnValue,value:f}]:e.getPrimaryAttributesNames().filter(t=>f[t]).map(t=>({type:M.ModelParameterType.PrimaryColumnValue,value:{[t]:f[t]}}))})),(0,o.mergeMap)(({schema:e,attributes:t,parameters:i})=>this._load(t,i,{},A.ModelMode.Copy).pipe((0,o.tap)(()=>{this._isLoaded=!1}),(0,o.tap)(r=>{if(r.length>1)throw new Error("More than one record loaded for copy");if(r.length===0)throw new Error("No records loaded for copy")}),(0,o.map)(r=>R.H.removeNotRequestedData(t,{...r[0]})),(0,o.map)(r=>{e.getPrimaryAttributesNames().forEach(m=>delete r[m]);const n=R.H.getOwnColumnsValues(e,P);return{...r,...n}}),(0,o.switchMap)(r=>this.dataSource.getDefaultValues().pipe((0,o.map)(n=>({...n,...r})))),(0,o.tap)(r=>{this._persistedState={...r}}),(0,o.switchMap)(r=>this._loadDependentDataForCreate(r)),(0,o.tap)(()=>{this._isLoaded=!0,this._isLoading=!1}),(0,o.catchError)(r=>(this._isLoading=!1,this._markForNotCollection(A.ModelMode.Update),(0,v.throwError)(()=>new Error(r)))))))}insert(f){return this.getSchema().pipe((0,o.map)(e=>({dataSchema:e,data:{...this._persistedState??{},...f}})),(0,o.map)(({data:e,dataSchema:t})=>R.H.getOwnColumnsValues(t,e))).pipe((0,F.switchMapWithout)(e=>this._onBeforeInsert(e)),(0,F.switchMapWith)(e=>this._innerInsert(e)),(0,F.switchMapWithout)(([e])=>this._onAfterInsert(e)),(0,o.map)(([,e])=>e),(0,o.tap)(()=>{this._isLoaded=!0}),(0,o.catchError)(e=>(0,v.of)(D(e))))}update(f,P){return this.getSchema().pipe((0,o.map)(t=>R.H.getOwnColumnsValues(t,f)),(0,o.map)(t=>this._getChangedAttributesValues(t))).pipe((0,F.switchMapWithout)(t=>this._onBeforeUpdate(t,P)),(0,F.switchMapWith)(t=>this._innerUpdate(t,P)),(0,F.switchMapWithout)(([t])=>this._onAfterUpdate(t,P)),(0,o.map)(([,t])=>t),(0,o.catchError)(t=>(0,v.of)(D(t))))}insertOrUpdate(f,P){return this._mode===A.ModelMode.Update?this.update(f,P):this.insert(f)}delete(f){return this._onBeforeDelete(f).pipe((0,o.switchMap)(()=>this._innerDelete(f)),(0,F.switchMapWithout)(()=>this._onAfterDelete(f)),(0,o.catchError)(P=>(0,v.of)(D(P))))}setValue(f){const P=Object.keys(f);return this._checkAttributesInDataSchema(P).pipe((0,o.tap)(()=>{P.length>0&&(this._dirtyAttributes=new Set([...this._dirtyAttributes,...P]),this._persistedState={...this._persistedState??{},...f})}),(0,o.map)(()=>null))}_getPersistedState(){return{...this._persistedState??{}}}markFor(f){this.mode!==f&&(this._setMode(f),this._modeChanges.next(f))}resetMode(){this._mode!==A.ModelMode.Init&&(this._mode=A.ModelMode.Init,this._modeChanges.next(this._mode))}loadLookupList(f,P,e={}){if(!this.dataSource)throw Error("DataSource is null");return this.dataSource.getLookupDataSchema(f).pipe((0,o.switchMap)(t=>{const i=t.getPrimaryLoadAttributes();return this._createDataSource(this._lookupDataSourceName,t).pipe((0,o.switchMap)(r=>r.load(i,P,e)),(0,o.map)(r=>({primaryAttributeName:t.primaryAttributeName,primaryDisplayAttributeName:t.primaryDisplayAttributeName,data:r})))}))}canDelete(f){return(0,v.lastValueFrom)(this.dataSource.canDelete(f),{defaultValue:null})}canSave(f){switch(this._mode){case A.ModelMode.Init:return Promise.resolve({result:!1});case A.ModelMode.Create:case A.ModelMode.Copy:return(0,v.lastValueFrom)(this.dataSource.canCreate(f),{defaultValue:null});case A.ModelMode.Update:return(0,v.lastValueFrom)(this.dataSource.canEdit(f),{defaultValue:null});case A.ModelMode.Delete:return this.canDelete(f);default:throw Error(`Unable to verify the possibility of operation executing: the '${this._mode}' is not supported.`)}}attributeChanged(f,P){P||this._selfDirty$.next(!0),this._dirtyAttributes.add(f)}setLoadedState(){this._dirtyAttributes=new Set,this._markAsPristine()}createCollectionItemModel(f){const P=new T(this._injector,this.dataSource);return P._isCollectionItemModel=!0,P._isLoaded=!0,P._isInitialized=!0,P._persistedState={},P._dataSchemaName=this._dataSchemaName,P._attributesMap=this._attributesMap,f!=null&&(P._setMode(f),P._selfDirty$.next(!1)),this._children.push(P),P}childrenChange(){this._children$.next(this._children)}removeChild(f){const P=f?._id,e=this._children.findIndex(t=>t?._id===P);e!==-1&&this._children.splice(e,1)}_getAsyncResult(f){return(0,v.firstValueFrom)(f)}getLastError(){return this.dataSource?this.dataSource.getLastError():new Error("DataSource is null")}destroy(){this._isInitialized=!1,this._destroyed$.next(),this._destroyed$.complete(),this._selfDirty$.complete(),this._children$.complete(),this._childrenDirty$.complete(),this._childrenModes$.complete(),this._destroyed=!0}getOwnLoadParameters(){return this.dataSource.getOwnLoadParameters()}getAllowCopyingRecords(){return this.dataSource.getAllowCopyingRecords()}}(0,s.__decorate)([(0,M.ImplementUsingHandlerChain)({requestType:"crt.ModelGenerator",methodName:"generateOne"}),(0,s.__metadata)("design:type",Function)],T.prototype,"_create",void 0)},10161:(J,$,a)=>{a.d($,{L:()=>s});class s{constructor(M){this.injector=M}}},94655:(J,$,a)=>{a.d($,{_:()=>d});var s=a(5960),c=a.n(s),M=a(59131),I=a.n(M),F=a(38495),L=a.n(F),A=a(79772),x=a.n(A);let d=class extends F.BaseValidator{constructor(v){super(),this.injector=v}defaultValidationError(v){const j=this.injector?.get(A.TranslateService),o=v??{},u=j?.instant(this.i18nMessageKey,o);return{message:v?.message||u||""}}};d=(0,s.__decorate)([(0,F.CrtValidator)(),(0,s.__metadata)("design:paramtypes",[M.Injector])],d)},60824:(J,$,a)=>{a.d($,{i:()=>s});const s="calculated"},53035:(J,$,a)=>{a.d($,{LL:()=>v.L,_J:()=>j._,CI:()=>y,fq:()=>I,Ez:()=>x,UW:()=>A,n3:()=>M,SY:()=>d,sq:()=>b,OU:()=>R,I_:()=>D,j8:()=>B,DM:()=>T,zG:()=>U,tU:()=>e,zX:()=>f,xh:()=>i,VZ:()=>t,fJ:()=>V,Qu:()=>r,YS:()=>n,Kz:()=>O,X9:()=>C,Fg:()=>W,bs:()=>l,Dj:()=>p});var s=a(59131),c=a(28399);class M{constructor(h,E,w=!1){this.name=h,this._value=E,this._locked=w,this._isValueInitialized=!1,this._pendingValue=void 0,this._onChanged=new s.EventEmitter,this._hasInitialValue=!1,E!=null&&(this._isValueInitialized=!0,this._hasInitialValue=!0,this._initialValue=E)}get onChanged(){return this._onChanged}get value(){return this.getValue()}set value(h){this.setValue(h)}get initialValue(){return this._initialValue}set initialValue(h){this.setInitialValue(h)}get hasInitialValue(){return this._hasInitialValue}get isLocked(){return this._locked}emitValueChanged(h){this.onChanged.emit(h)}areValuesEqual(h,E){return(0,c.isEqual)(h,E)}getValue(){return this._value}setValue(h,E=!1){if(this._locked||(this._isValueInitialized=!0,this._pendingValue=h,this.areValuesEqual(this._value,h)))return;const w=(0,c.cloneDeep)(this._value);this._value=(0,c.cloneDeep)(h),!E&&this.emitValueChanged({name:this.name,value:h,oldValue:w})}resetValue(){this.hasInitialValue&&this.setValue(this.initialValue)}setInitialValue(h){this._hasInitialValue=!0,this._initialValue=h,this._isValueInitialized||this.setValue(h,!0)}setPending(h){const E=typeof this._pendingValue>"u"?this.value:this._pendingValue;this.value=h,this._pendingValue=E}resetPending(){this.value=this._pendingValue,this._pendingValue=void 0}}class I extends M{constructor(h,E,w,K,z=!1){super(h,E,z),this._validatorTypeResolver=w,this._injectionContext=K,this._onValidatorChanged=new s.EventEmitter}get onValidatorChanged(){return this._onValidatorChanged}_createValidatorInfo(){return{name:this.validatorTypeName,instance:this._validatorTypeResolver.getValidator(this.validatorTypeName,{injectionContext:this._injectionContext}),disabled:!0}}emitValueChanged(h){super.emitValueChanged(h),this.hasValidator&&this.updateValidator(h)&&this._onValidatorChanged.emit()}get hasValidator(){return!1}updateValidator(h){return!1}setValidatorInfo(h,E=!1){this.validatorInfo=h}initializeValidator(h,E=!1){if(!this.hasValidator||this._validatorTypeResolver==null)return[...h];let w=h.find(z=>z.name===this.validatorTypeName),K=!1;return w==null&&(w=this._createValidatorInfo(),K=!0),this.setValidatorInfo(w,E),K?[...h,w]:[...h]}}var F=a(5960),L=a(38495);class A{static{this._properties=new Map}static _get(h){if(!h)return I;if(this._properties.has(h))return this._properties.get(h);throw new Error(`CrtControlProperty with type ${h} doesn't registered`)}static register(h,E){this._properties.set(h,E)}static create(h){const E=this._get(h.typeName);return new E(h.name,h.value,h.validatorTypeResolver,h.injectionContext,h.locked===!0)}}function x(N){return function(h){(0,L.checkTypeNameFormat)(N.name,"PropertyName"),A.register(N.name,h)}}let d=class extends I{constructor(){super(...arguments),this.validatorTypeName="crt.Required"}get hasValidator(){return!0}updateValidator(h){return this.validatorInfo&&(this.validatorInfo.disabled=!h.value),!0}setValidatorInfo(h,E=!1){super.setValidatorInfo(h,E),this.initialValue=!h.disabled,this.setValue(!h.disabled,E)}};d=(0,F.__decorate)([x({name:"crt.Required"})],d);class l{}var v=a(10161),j=a(94655),o=a(56711),u=a(62278),_=a(36486);const b="DataValueType";class y extends M{get propertiesConfig(){return[{name:"visible",defaultValue:!0},{name:"displayColor"},{name:"required",typeName:"crt.Required",defaultValue:!1}]}get formControl(){return this._formControl||(this._formControl=new o.FormControl(this.value),this._subscribeOnFormControl(this._formControl)),this._formControl}set formControl(h){this._formControl=h,this._subscribeOnFormControl(this._formControl)}get properties(){return this._properties}get onPropertyChanged(){return this._onPropertyChanged}get visible(){return this.getPropertyByName("visible").getValue()}set visible(h){const E=this.getPropertyByName("visible");E.value=h}get required(){return this.getPropertyByName("required").getValue()}set required(h){const E=this.getPropertyByName("required");E.value=h}get displayColor(){return this.getPropertyByName("displayColor").getValue()}set displayColor(h){const E=this.getPropertyByName("displayColor");E.value=h}get isDirty(){return this.formControl.dirty}constructor(h=null,E=null,w=!1,K="",z=[],q,k,G,Z){super(K,h),this.validationState=E,this.disabled=w,this._subscription=new u.Subscription,this._onPropertyChanged=new s.EventEmitter,this._crtControlStateAdapter=q,this._validatorTypeResolver=k,this._injectionContext=Z,this._initProperties(z),this._subscribeOnPropertiesEvents(),this._initializeValidators(G??[],!0)}static create(h){return new y(h.value,null,!1,h.name,h.propertiesConfig??[],h.crtControlStateAdapter,h.validatorTypeResolver,h.validatorInfo,h.injectionContext)}_subscribeOnFormControl(h){this._formControlSubscription?.unsubscribe(),this._formControlSubscription=h.valueChanges.pipe((0,_.startWith)(h.value),(0,_.distinctUntilChanged)((E,w)=>this.areValuesEqual(E,w))).subscribe(E=>{this.setValue(E)})}_initProperties(h){const E=[...this.propertiesConfig,...h];this._properties=new Map,E.forEach(w=>{const K=A.create({typeName:w.typeName,name:w.name,value:w.defaultValue,locked:w.locked===!0,validatorTypeResolver:this._validatorTypeResolver,injectionContext:this._injectionContext});this._properties.set(w.name,K)})}_subscribeOnPropertyEvents(h){this._subscription.add(h.onChanged.subscribe(({name:E,value:w,oldValue:K})=>{this.onPropertyChanged.emit({name:E,value:w,oldValue:K})})),this._subscription.add(h.onValidatorChanged.subscribe(()=>{this._refreshValidators()}))}_subscribeOnPropertiesEvents(){this.properties.forEach(h=>{this._subscribeOnPropertyEvents(h)})}_initializeValidators(h,E=!1){this._validatorInfo=h,this._properties.forEach(w=>{this._validatorInfo=w.initializeValidator(this._validatorInfo,E)}),this._refreshValidators()}_getEnabledValidatorFns(h=!1){return this._validatorInfo.filter(E=>!E.disabled&&E.instance.isAsync===h).map(E=>this._crtControlStateAdapter.transform(E))??[]}_refreshValidators(){const h=this._getEnabledValidatorFns();this.formControl.setValidators(h);const E=this._getEnabledValidatorFns(!0);this.formControl.setAsyncValidators(E),this.formControl.updateValueAndValidity()}_updateValidator(h,E=!1){const w=this._validatorInfo.find(K=>K.name===h);if(!w)throw new Error(`Validator ${h} does not exist on ${this.name} attribute.`);w.disabled!==E&&(w.disabled=E,this._refreshValidators())}setValue(h,E){const w=this.formControl;this.areValuesEqual(h,w.value)||(w.dirty||w.markAsDirty(),w.setValue(h,{onlySelf:!!E})),super.setValue(h,E)}findPropertyByName(h){return this.properties.has(h)?this.properties.get(h):null}enableValidator(h){this._updateValidator(h,!1)}disableValidator(h){this._updateValidator(h,!0)}change(h){this.setValue(h)}getPropertyByName(h,E=!1){let w=this.findPropertyByName(h);return!w&&E&&(w=new I(h,null,this._validatorTypeResolver,this._injectionContext),this._properties.set(h,w),this._subscribeOnPropertyEvents(w)),w}hasPropertyValue(h){return!!this.getPropertyByName(h)}getPropertyValue(h){const E=this.getPropertyByName(h);return E?E.getValue():null}setPropertyValue(h,E,w=!1){this.getPropertyByName(h,!0).setValue(E,w)}setPropertyInitialValue(h,E){this.getPropertyByName(h,!0).setInitialValue(E)}getPropertyInitialValue(h){return this.getPropertyByName(h)?.initialValue}getValue(){return this._formControl?this._formControl.value:super.getValue()}destroy(){this._formControlSubscription?.unsubscribe(),this._subscription.unsubscribe()}getInvariabilityPropertyName(){const h=this.getPropertyValue(L.ViewElementProperty.Readonly),E=this.getPropertyValue(L.ViewElementProperty.Disabled);return h??E}toggle(h){const E=this.getInvariabilityPropertyName(),w=this.getPropertyByName(E);w&&(h?w.resetPending():w.setPending(!0))}}var S=a(21018);class R{get attributesMap(){return this._attributesMap}get mappedViewModelAttributes(){return this._mappedViewModelAttributes}get isCollection(){return this._isCollection}get collectionViewModelAttributeName(){return this._collectionViewModelAttributeName}constructor(h){this._attributesMap=new Map,this._mappedViewModelAttributes=new Set,this.attributes=[],this.includePrimaryAttributes=!0,this.name=h}static _getDataSourceInfo(h,E){if(!h.has(E)){const w=new R(E);return h.set(E,w),w}return h.get(E)}static _extractViewModelAttributeMapInfo(h){const E=h.split(".");return{dataSourceName:E.shift(),dataSourceAttributePath:E.join(".")}}static _getByDefaultAttribute(h,E,w,K=""){const z=E.modelConfig;if(!z||!z.path)return;const q=this._extractViewModelAttributeMapInfo(z.path);if(!q.dataSourceAttributePath){this._getByViewModelCollectionAttribute(h,E,w);return}if(K&&K!==q.dataSourceName)throw new Error(`Attribute '${h}' mapped on a few DataSources`);const k=this._getDataSourceInfo(w,q.dataSourceName),G=z.aggregationConfig?.aggregationFunction?(0,S.removeSpecialSymbols)(q.dataSourceAttributePath):q.dataSourceAttributePath;k.attributes.push({path:G,type:z.type,functionConfig:z.functionConfig,aggregationConfig:z.aggregationConfig}),k._mappedViewModelAttributes.add(h),k._attributesMap.set(h,q.dataSourceAttributePath)}static _getByInlineViewModelAttribute(h,E,w,K=""){const z=E.viewModelConfig||{};Object.entries(z.attributes||{}).forEach(([q,k])=>{const G=`${h}.${q}`;this._processViewModelAttribute(G,k,w,K)})}static _getByViewModelCollectionAttribute(h,E,w){const K=E.modelConfig;if(!K||!K.path)return;const q=this._extractViewModelAttributeMapInfo(K.path).dataSourceName,k=this._getDataSourceInfo(w,q);k._isCollection=!0,k._collectionViewModelAttributeName=h,k._pagingConfig=K.pagingConfig,k._sortingConfig=K.sortingConfig,k._filteringConfig=K.filterAttributes,k.includePrimaryAttributes=K.includePrimaryAttributes===void 0?!0:K.includePrimaryAttributes;const G=E?.viewModelConfig;Object.entries(G?.attributes||{}).forEach(([Z,Q])=>{this._processViewModelAttribute(`${h}.${Z}`,Q,w,q)})}static _processViewModelAttribute(h,E,w,K=""){"viewModelConfig"in E||"viewModelName"in E?E.isCollection?this._getByViewModelCollectionAttribute(h,E,w):this._getByInlineViewModelAttribute(h,E,w,K):"from"in E||this._getByDefaultAttribute(h,E,w,K)}static getFromViewModelConfig(h,E=[]){const w=new Map;return Object.entries(h?.attributes||{}).forEach(([K,z])=>{this._processViewModelAttribute(K,z,w)}),E.filter(K=>!w.has(K.name)).forEach(({name:K})=>{const z=new R(K);w.set(K,z)}),w}static getLookupListDataSourceInfo(h,E){const w=new R("");return w._isCollection=!0,w._collectionViewModelAttributeName=h,Object.entries(E).forEach(([K,z])=>{w.attributes.push({path:z}),w._mappedViewModelAttributes.add(K),w._attributesMap.set(K,z)}),w}_getRowModelDto(h){const E=h.length>0?h[0]:{},w={};return Object.entries(E).forEach(([K,z])=>{this.getMappedAttributeNames(K).forEach(k=>{const G=k.split(".");this.isCollection&&G.length>1&&G.shift(),(0,c.set)(w,G.join("."),z)})}),w}_getCollectionModelDto(h){const E=this._collectionViewModelAttributeName,w=h.map(K=>this._getRowModelDto([K]));return{[E]:w}}getMappedAttributes(){return Array.from(this._mappedViewModelAttributes.values())}getMappedAttributeNames(h){return Array.from(this._attributesMap.entries()).filter(([,E])=>E===h).map(([E])=>E)}getDataSourceAttributePath(h){return this._attributesMap.has(h)?this._attributesMap.get(h):""}getIsMapOnCollection(h){return this._isCollection&&this._collectionViewModelAttributeName===h}getPagingConfig(){return this._pagingConfig}getSortingConfig(){return this._sortingConfig}getFilteringConfig(){return this._filteringConfig||[]}getModelDto(h){return this._isCollection?this._getCollectionModelDto(h):this._getRowModelDto(h)}addNewAttribute(h,E,w){const K=new Map;K.set(this.name,this),R._getByDefaultAttribute(h,E,K,w)}getIsDataSourceAttributePathExists(h){return this.attributes.find(E=>E.path===h)!==void 0}}let B=class extends j._{constructor(){super(...arguments),this.i18nMessageKey="Validators.Required.Message",this.async=!1}validateLczValue(h){return h?!!h.find(E=>E.value&&E.value.trim()):!1}validate(h,E){const w=h.value;return(typeof w=="string"?!!(h&&h.value?.trim()):this.validateLczValue(w))?null:{required:this.defaultValidationError(E)}}};B=(0,F.__decorate)([(0,L.CrtValidator)({type:"crt.EmptyOrWhiteSpace"})],B);let D=class extends B{constructor(h,E){super(h),this.injector=h,this._userInfo=E}validateLczValue(h){return h?!!h.find(E=>E.cultureName===this._userInfo.cultureInfo.sysCultureName&&E.value&&E.value.trim()):!1}};D=(0,F.__decorate)([(0,L.CrtValidator)({type:"crt.EmptyOrWhiteLczSpace"}),(0,F.__metadata)("design:paramtypes",[s.Injector,S.UserInfo])],D);var T;(function(N){N.Attachments="efbf3a0d-d780-465a-8e4b-8c0765197cfb"})(T||(T={}));class U extends y{constructor(h){super(h.value,h.errors,h.disabled),this.formControl=h}}let f=class extends j._{constructor(){super(...arguments),this.i18nMessageKey="Validators.Max.Message",this.async=!1}validate(h,E){const K=o.Validators.max(E.max)(h);return K?{max:this.defaultValidationError({...E,...K.max})}:null}};f=(0,F.__decorate)([(0,L.CrtValidator)({type:"crt.Max"})],f);var P=a(31996);let e=class extends j._{constructor(){super(...arguments),this.i18nMessageKey="Validators.MaxLength.Message",this.async=!1}_maxLengthValidator(h,E){return P.Tb.hasValidLength(h)&&h.length>E.maxLength?{maxlength:this.defaultValidationError({...E,requiredLength:E.maxLength,actualLength:h.length})}:null}validate(h,E){const w=P.Tb.getControlValueAndTrimIfNeeded(h,E);return this._maxLengthValidator(w,E)}};e=(0,F.__decorate)([(0,L.CrtValidator)({type:"crt.MaxLength"})],e);let t=class extends j._{constructor(){super(...arguments),this.i18nMessageKey="Validators.Min.Message",this.async=!1}validate(h,E){const K=o.Validators.min(E.min)(h);return K?{min:this.defaultValidationError({...E,...K.min})}:null}};t=(0,F.__decorate)([(0,L.CrtValidator)({type:"crt.Min"})],t);let i=class extends j._{constructor(){super(...arguments),this.i18nMessageKey="Validators.MinLength.Message",this.async=!1}_minLengthValidator(h,E){return P.Tb.isEmptyInputValue(h)||!P.Tb.hasValidLength(h)?null:h.length<E.minLength?{minlength:this.defaultValidationError({...E,requiredLength:E.minLength,actualLength:h.length})}:null}validate(h,E){const w=P.Tb.getControlValueAndTrimIfNeeded(h,E);return this._minLengthValidator(w,E)}};i=(0,F.__decorate)([(0,L.CrtValidator)({type:"crt.MinLength"})],i);let r=class extends j._{constructor(){super(...arguments),this.i18nMessageKey="Validators.RegExp.Message",this.async=!1}validate(h,E){typeof E.regex=="string"&&(E.regex=new RegExp(E.regex));const w=E.regex.test(h.value);return this.i18nMessageKey=E.message||this.i18nMessageKey,w?null:{[E.errorCode]:this.defaultValidationError({...E})}}};r=(0,F.__decorate)([(0,L.CrtValidator)({type:"crt.RegExp"})],r);let n=class extends j._{constructor(){super(...arguments),this.i18nMessageKey="Validators.Required.Message",this.async=!1}_requiredValidator(h,E){return P.Tb.isEmptyInputValue(h)?{required:this.defaultValidationError(E)}:null}validate(h,E){const w=P.Tb.getControlValueAndTrimIfNeeded(h,E);return this._requiredValidator(w,E)}};n=(0,F.__decorate)([(0,L.CrtValidator)({type:"crt.Required"})],n);var m=a(73308);let C=class extends j._{constructor(h){super(h),this.injector=h,this._messageKey="Validators.SchemaNamePrefix.",this.async=!0,this._sysSettingsService=h.get(L.SysSettingsService)}_getSchemaNamePrefix(){var h=this;return(0,m.A)(function*(){return(yield h._sysSettingsService.getByCode("SchemaNamePrefix")).value})()}validate(h,E){var w=this;return(0,m.A)(function*(){if((0,c.isObject)(h.value))return null;const K=P.Tb.getControlValueAndTrimIfNeeded(h,{trimValue:!0}),z=yield w._getSchemaNamePrefix();if(z){const q=!K?.startsWith(z);if(q||K===z)return w.i18nMessageKey=q?w._messageKey+"NoSchemaNamePrefixMessage":w._messageKey+"OnlySchemaNamePrefixMessage",{namePrefixError:w.defaultValidationError({...E,schemaNamePrefix:z})}}return null})()}};C=(0,F.__decorate)([(0,L.CrtValidator)({type:"crt.SchemaNamePrefix"}),(0,F.__metadata)("design:paramtypes",[s.Injector])],C);let O=class extends r{constructor(){super(...arguments),this._params={regex:/^[a-zA-Z]+[a-zA-Z0-9-_]*$/,errorCode:"allowedSymbolsErrorCode"},this.i18nMessageKey="Validators.SchemaNameAllowedSymbols.Message",this.async=!1}validate(h){return super.validate(h,this._params)}};O=(0,F.__decorate)([(0,L.CrtValidator)({type:"crt.SchemaNameAllowedSymbols"})],O);let W=class extends j._{constructor(){super(...arguments),this.i18nMessageKey="Validators.UniqueCodeColumnValue.Message",this.async=!1,this._windowCodeList="_copilotCodeList"}validate(h,E){const w=h.value;if(!w)return null;const K=window[this._windowCodeList];return K&&K.filter(q=>q===w).length>1?{uniqueColumnValue:this.defaultValidationError({...E,controlValue:w})}:null}};W=(0,F.__decorate)([(0,L.CrtValidator)({type:"crt.UniqueCodeColumnValue"})],W);var g=a(61872);const p=/^[A-Za-z]+[A-Za-z0-9_]*$/;class V extends L.BaseValidator{constructor(h){super(),this.translateService=h,this.async=!1}validate(h){const E=g.T.getControlValueAndTrimIfNeeded(h);return E&&!p.test(E)?{invalidValueSyntax:{message:this.translateService.instant("SchemaDesigners.EntitySchemaDesigner.ColumnEditor.Validations.PatternNameCaption")}}:null}}},77430:(J,$,a)=>{a.d($,{b:()=>x});var s=a(38495),c=a(96590),M=a(60824),I=a(13669),F=a(55642),L=a(32149),A=a(40155);const x=c.FactoryProvider.create({token:A.x,mappings:[{predicate:s.DataValueType.Lookup,injectable:L.Z},{predicate:M.i,injectable:I.jB}],default:{injectable:F.K}})},48598:(J,$,a)=>{a.d($,{rq:()=>M,Nw:()=>g,N_:()=>L,Mf:()=>x,Fw:()=>l,KM:()=>W,JQ:()=>O,Hw:()=>G,WO:()=>ee,$d:()=>F,if:()=>I,Rr:()=>v,TZ:()=>d,Zw:()=>j,RM:()=>o,IH:()=>u,Xb:()=>_,ly:()=>b,pN:()=>S,Fq:()=>R,cJ:()=>k,g6:()=>B,nf:()=>p,MD:()=>D,Hz:()=>T,vB:()=>U,X1:()=>P,Fv:()=>V,nN:()=>e,c1:()=>f,d_:()=>t,Xr:()=>i,d:()=>r,qn:()=>n,_:()=>m,iP:()=>C,UI:()=>N,Ve:()=>q,Tt:()=>E,k7:()=>w,Ux:()=>z,_j:()=>h,Gw:()=>te,Q_:()=>ne,BI:()=>ie,SD:()=>de,Ts:()=>le,Vu:()=>oe,y9:()=>he,H3:()=>me,QY:()=>Z,vz:()=>Q,Si:()=>Y,kU:()=>X,S:()=>ae,h_:()=>re,Lp:()=>se,gM:()=>y,Y9:()=>$e,qK:()=>ge,oN:()=>pe,p7:()=>fe,e7:()=>We,Zq:()=>_e,jy:()=>ye,nm:()=>Me,n$:()=>Se,ks:()=>ve,Ol:()=>Ae,Cm:()=>Ee,SH:()=>Ce,gJ:()=>De,mR:()=>Pe,NX:()=>be,J1:()=>Re,G9:()=>ue,eJ:()=>Ve,RF:()=>Ie,vo:()=>Te,mi:()=>Oe,Yh:()=>xe,Ze:()=>Ne,Mg:()=>Le,c9:()=>Be,_G:()=>Fe,sE:()=>K,ev:()=>we,nS:()=>je,ap:()=>Ue,gf:()=>qe});var s=a(5960),c=a(38495);let M=class extends c.BaseRequest{};M=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.AddCommunicationOptionsRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.Add\u0421ommunicationOptionsRequest",propertiesPanelComponentTypeName:"crt.AddCommunicationOptionsRequestPropertiesPanel",position:740})],M);class I extends c.BaseRequest{}class F extends I{}let L=class extends F{};L=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.AddRecordsInStaticFoldersRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.AddRecordsInStaticFoldersRequest",propertiesPanelComponentTypeName:"crt.AddRecordsInStaticFoldersRequestPropertiesPanel",position:706,compatibleAPIs:{[c.PlatformAPIs.Selection]:!0}})],L);class A extends c.BaseRequest{}let x=class extends A{};x=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.AddTagsInRecordRequest"})],x);class d extends I{}let l=class extends d{};l=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.AddTagsInRecordsRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.AddTagsInRecordsRequest",propertiesPanelComponentTypeName:"crt.AddTagsInRecordsRequestPropertiesPanel",position:703,compatibleAPIs:{[c.PlatformAPIs.Selection]:!0}})],l);class v extends c.BaseRequest{}let j=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.CancelCollectionPrimaryDataChangesRequest"}};j=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.CancelCollectionPrimaryDataChangesRequest"})],j);let o=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.CancelPrimaryDataChangesRequest"}};o=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.CancelPrimaryDataChangesRequest"})],o);let u=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.CancelRecordChangesRequest"}};u=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.CancelRecordChangesRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.CancelRecordChangesRequest",position:500})],u);let _=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.CancelRecordsChangesRequest"}};_=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.CancelRecordsChangesRequest"})],_);let b=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.ClosePageRequest"}};b=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.ClosePageRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.ClosePageRequest",position:600})],b);let y=class extends c.DataRequest{};y=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.LoadDataRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.LoadDataRequest",propertiesPanelComponentTypeName:"crt.LoadDataRequestPropertiesPanel",position:500})],y);let S=class extends y{};S=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.ComboboxLoadDataRequest"})],S);let R=class extends c.BaseRequest{};R=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.ContinueInOtherPageRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.ContinueInOtherPageRequest",position:1e3})],R);let B=class extends c.BaseRequest{};B=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.CopilotActionRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.CopilotActionRequest",propertiesPanelComponentTypeName:"crt.CopilotActionRequestPropertiesPanelComponent",position:3001})],B);let D=class extends c.BaseRequest{};D=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.CreateCollectionItemsRequest"})],D);let T=class extends c.BaseRequest{};T=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.CreateRecordRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.CreateRecordRequest",propertiesPanelComponentTypeName:"crt.CreateRecordRequestPropertiesPanel",position:200})],T);let U=class extends c.BaseRequest{};U=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.DeleteClientUnitSchemaRequest"})],U);let f=class extends c.BaseRequest{};f=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.DeleteRecordRequest"})],f);let P=class extends f{};P=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.DeleteFileRequest"})],P);let e=class extends f{};e=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.DeleteOldTagRecordRequest"})],e);let t=class extends c.BaseRequest{};t=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.DeleteRecordsRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.DeleteRecordsRequest",propertiesPanelComponentTypeName:"crt.DeleteRecordsRequestPropertiesPanel",position:701,compatibleAPIs:{[c.PlatformAPIs.Selection]:!0}})],t);let i=class extends A{};i=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.DeleteTagInRecordRequest"})],i);let r=class extends c.BaseRequest{};r=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.DetailChangedRequest"})],r);let n=class extends c.BaseRequest{};n=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.EmailLinkClickRequest"})],n);let m=class extends c.BaseRequest{};m=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.ExportChartDataGridToExcelRequest"})],m);let C=class extends c.BaseRequest{};C=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.ExportDataGridToExcelRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.ExportDataGridToExcelRequest",propertiesPanelComponentTypeName:"crt.ExportDataGridToExcelRequestPropertiesPanel",position:800,compatibleAPIs:{[c.PlatformAPIs.Selection]:!0}})],C);class O extends c.BaseRequest{}class W extends O{}let g=class extends W{};g=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.AddFolderDataRequest"})],g);let p=class extends W{};p=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.CopyFolderDataRequest"})],p);let V=class extends O{};V=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.DeleteFolderDataRequest"})],V);let N=class extends O{};N=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.FolderTreeActiveFolderChangedRequest"})],N);let h=class extends O{};h=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.FolderTreeVisibleRequest"})],h);let E=class extends O{};E=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.FolderTreeMoveRequest"})],E);let w=class extends O{};w=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.FolderTreeRenameRequest"})],w);let K=class extends O{};K=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.ToggleFolderFavoriteRequest"})],K);let z=class extends O{};z=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.FolderTreeUpdateFiltersRequest"})],z);let q=class extends O{};q=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.FolderTreeExpandedItemsRequest"})],q);let k=class extends g{};k=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.ConvertToStaticFolderRequest"})],k);let G=class extends c.BaseRequest{};G=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.BaseImageListItemClickRequest"})],G);let Z=class extends c.BaseRequest{constructor(Ke,He){super(),this.event=Ke,this.$context=He,this.type="crt.HandleKeyboardHotkeysRequest"}};Z=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.HandleKeyboardHotkeysRequest"}),(0,s.__metadata)("design:paramtypes",[KeyboardEvent,Object])],Z);let Q=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.HandleModelEventRequest"}};Q=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.HandleModelEventRequest"})],Q);let Y=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.HandleViewModelDestroyRequest"}};Y=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.HandleViewModelDestroyRequest"})],Y);let X=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.HandleViewModelInitRequest"}};X=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.HandleViewModelInitRequest"})],X);let ae=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.HandleViewModelPauseRequest"}};ae=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.HandleViewModelPauseRequest"})],ae);let re=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.HandleViewModelResumeRequest"}};re=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.HandleViewModelResumeRequest"})],re);let se=class extends c.BaseRequest{};se=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.ImportDataRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.ImportDataRequest",propertiesPanelComponentTypeName:"crt.ImportDataRequestPropertiesPanel",position:750})],se);class ee extends c.BaseRequest{}let te=class extends ee{constructor(){super(...arguments),this.type="crt.HandleAfterModelDeleteRequest"}};te=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.HandleAfterModelDeleteRequest"})],te);let ne=class extends ee{constructor(){super(...arguments),this.type="crt.HandleAfterModelInsertRequest"}};ne=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.HandleAfterModelInsertRequest"})],ne);let ie=class extends ee{constructor(){super(...arguments),this.type="crt.HandleAfterModelLoadRequest"}};ie=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.HandleAfterModelLoadRequest"})],ie);let de=class extends ee{constructor(){super(...arguments),this.type="crt.HandleAfterModelUpdateRequest"}};de=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.HandleAfterModelUpdateRequest"})],de);let le=class extends ee{constructor(){super(...arguments),this.type="crt.HandleBeforeModelDeleteRequest"}};le=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.HandleBeforeModelDeleteRequest"})],le);let oe=class extends ee{constructor(){super(...arguments),this.type="crt.HandleBeforeModelInsertRequest"}};oe=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.HandleBeforeModelInsertRequest"})],oe);let he=class extends ee{constructor(){super(...arguments),this.type="crt.HandleBeforeModelLoadRequest"}};he=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.HandleBeforeModelLoadRequest"})],he);let me=class extends ee{constructor(){super(...arguments),this.type="crt.HandleBeforeModelUpdateRequest"}};me=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.HandleBeforeModelUpdateRequest"})],me);let pe=class extends c.BaseRequest{};pe=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.MoveSelectedItemsRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.MoveSelectedItemsRequest",propertiesPanelComponentTypeName:"crt.MoveSelectedItemsRequestPropertiesPanel",position:1e3,compatibleAPIs:{[c.PlatformAPIs.Selection]:!0}})],pe);var ge;(function(H){H.Root="root",H.Item="item",H.Const="const"})(ge||(ge={}));class $e{}let fe=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.NotificationRequest"}};fe=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.NotificationRequest"})],fe);let _e=class extends c.BaseRequest{};_e=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.OpenDuplicatesPageRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.OpenDuplicatesPageRequest",propertiesPanelComponentTypeName:"crt.OpenDuplicatesPageRequestPropertiesPanel",position:360})],_e);let ye=class extends c.BaseRequest{};ye=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.OpenOldTagMiniPageRequest"})],ye);let Me=class extends c.BaseRequest{};Me=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.OpenPageRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.OpenPageRequest",propertiesPanelComponentTypeName:"crt.OpenPageRequestPropertiesPanel",position:350})],Me);let Se=class extends c.BaseRequest{};Se=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.OpenPositionedPageRequest"})],Se);let ve=class extends c.BaseRequest{};ve=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.PhoneLinkClickRequest"})],ve);let Ae=class extends c.BaseRequest{};Ae=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.PrintablesRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.PrintablesRequest",propertiesPanelComponentTypeName:"crt.PrintablesRequestPropertiesPanel",position:3e3,compatibleAPIs:{[c.PlatformAPIs.Selection]:!0}})],Ae);let Ee=class extends c.BaseRequest{};Ee=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.RemoveCollectionItemsRequest"})],Ee);let Ce=class extends F{};Ce=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.RemoveRecordsInStaticFoldersRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.RemoveRecordsInStaticFoldersRequest",propertiesPanelComponentTypeName:"crt.RemoveRecordsInStaticFoldersRequestPropertiesPanel",position:705,compatibleAPIs:{[c.PlatformAPIs.Selection]:!0}})],Ce);let De=class extends d{};De=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.RemoveTagsInRecordsRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.RemoveTagsInRecordsRequest",propertiesPanelComponentTypeName:"crt.RemoveTagsInRecordsRequestPropertiesPanel",position:704,compatibleAPIs:{[c.PlatformAPIs.Selection]:!0}})],De);let Pe=class extends c.BaseRequest{};Pe=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.RunBusinessProcessRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.RunBusinessProcessRequest",propertiesPanelComponentTypeName:"crt.RunBusinessProcessRequestPropertiesPanel",position:700,compatibleAPIs:{[c.PlatformAPIs.Selection]:!0}})],Pe);let be=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.SaveCollectionPrimaryDataRequest"}};be=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.SaveCollectionPrimaryDataRequest"})],be);let Re=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.SavePrimaryDataRequest"}};Re=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.SavePrimaryDataRequest"})],Re);let ue=class extends c.BaseRequest{};ue=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.SaveRecordRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.SaveRecordRequest",propertiesPanelComponentTypeName:"crt.SaveRecordRequestPropertiesPanel",position:400})],ue);let Ve=class extends ue{};Ve=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.SaveRecordWithErrorRequest"})],Ve);let Ie=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.SaveRecordsRequest"}};Ie=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.SaveRecordsRequest"})],Ie);let Te=class extends v{};Te=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.SearchFilterColumnsGroupsRequest"})],Te);let Oe=class extends v{};Oe=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.SearchFilterRequest"})],Oe);let xe=class extends c.BaseRequest{constructor(){super(...arguments),this.multiple=!0,this.displayErrors=!1}};xe=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.SelectFileRequest"})],xe);let Ne=class extends c.BaseRequest{};Ne=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.SelectLookupPageRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.SelectLookupPageRequest",propertiesPanelComponentTypeName:"crt.SelectLookupPageRequestPropertiesPanel",scopes:["BaseLookupPageTemplate"],position:2e3})],Ne);let Le=class extends c.BaseRequest{};Le=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.SetRecordRightsRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.SetRecordRightsRequest",propertiesPanelComponentTypeName:"crt.SetRecordRightsRequestPropertiesPanel",position:800})],Le);let Be=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.SetTopRecordRequest"}};Be=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.SetTopRecordRequest"})],Be);let Fe=class extends c.BaseRequest{};Fe=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.ShowRelationshipsRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.ShowRelationshipsRequest",propertiesPanelComponentTypeName:"crt.ShowRelationshipsRequestPropertiesPanel",position:900})],Fe);let we=class extends c.BaseRequest{};we=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.UpdateRecordRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.UpdateRecordRequest",propertiesPanelComponentTypeName:"crt.UpdateRecordRequestPropertiesPanel",position:300})],we);let je=class extends c.BaseRequest{};je=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.UploadFileRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.UploadFileRequest",propertiesPanelComponentTypeName:"crt.UploadFileRequestPropertiesPanel",position:702})],je);let Ue=class extends c.BaseRequest{constructor(){super(...arguments),this.awaitResponse=!1}};Ue=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.UploadImageRequest"})],Ue);let qe=class extends c.BaseRequest{};qe=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.WorkplaceNavigationPanelCloseRequest"})],qe);let We=class extends c.BaseRequest{};We=(0,s.__decorate)([(0,c.CrtRequest)({type:"crt.OpenChangeLogRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.OpenChangeLogRequest",propertiesPanelComponentTypeName:"crt.OpenChangeLogRequestPropertiesPanel",position:370})],We)},13669:(J,$,a)=>{a.d($,{r:()=>F,CJ:()=>y,A:()=>_,a5:()=>b,UO:()=>D,Iu:()=>i,lg:()=>R,vV:()=>B,Fv:()=>A,Qj:()=>u,qG:()=>W,jB:()=>O,od:()=>t,wZ:()=>P,gd:()=>e});var s=a(62278),c=a(36486),M=a(65576);function I(g,p){if(!g||!p)return s.EMPTY;const V=p.events$.pipe((0,c.filter)(N=>N.type===M.n.ChangeAttributeValue),(0,c.filter)(N=>N.payload.attributeName===g),(0,c.switchMap)(()=>p[g]));return new s.Observable(N=>(g in p?(0,s.merge)((0,s.from)(p[g]),V):V).subscribe(N))}class F{}var L=a(59131);class A extends F{getChanges(p,V,N){const h=p.map(E=>I(E,N));return(0,s.combineLatest)(h)}static{this.\u0275fac=(()=>{let p;return function(N){return(p||(p=L.\u0275\u0275getInheritedFactory(A)))(N||A)}})()}static{this.\u0275prov=L.\u0275\u0275defineInjectable({token:A,factory:A.\u0275fac})}}var x=a(96590),d=a(82757);class l{constructor(p){this._converterExpressionInterpreter=p?.create("converter")}_getConverterFn(p,V,N){if(!p||!this._converterExpressionInterpreter)return(0,s.of)(N);const h={viewModel$:(0,s.of)(V),parent:null};return this._converterExpressionInterpreter.evaluate(p,h)}evaluate(p){const{args:V,expression:N,context:h,defaultEvaluationFn:E}=p;return this._getConverterFn(N,h,E).pipe((0,c.switchMap)(w=>{const K=w(V);return K instanceof Promise?K:Promise.resolve(K)}))}static{this.\u0275fac=function(V){return new(V||l)(L.\u0275\u0275inject(d.p,8))}}static{this.\u0275prov=L.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac})}}var v=a(38495);function j(g,p){if(!g||!p)return s.EMPTY;const V=new s.ReplaySubject(1),N=v.HandlerChainService.instance.subscribe(h=>{h.type===g&&V.next(h)},p);return p._subscriptions.add(N),V}const o=100;class u extends F{constructor(p){super(),this._converterEvaluator=p}_accumulateRequests(p,V,N){const h=new s.BehaviorSubject([]),E=this._accumulateRequestsCombinations(p,h,V,N).subscribe();return new s.Observable(w=>(h.complete(),E.unsubscribe(),this._findAcceptableRequestsCombination(h.value,V,N).pipe((0,c.switchMap)(K=>K?(0,s.merge)((0,s.of)(K),p):p)).subscribe(w)))}_accumulateRequestsCombinations(p,V,N,h){return p.pipe((0,c.map)(E=>[E,...V.value]),(0,c.switchMap)(E=>E.length<o?(0,s.of)(E):this._findAcceptableRequestsCombination(E,N,h).pipe((0,c.map)(w=>w?[w]:[]))),(0,c.tap)(E=>V.next(E)),(0,c.map)(()=>{}))}_findAcceptableRequestsCombination(p,V,N){if(!p.length)return(0,s.of)(null);const{filter:h,originalFrom:E}=V;return(0,s.from)(p).pipe((0,x.concatMapWith)(w=>this._converterEvaluator.evaluate({args:Array.isArray(E)?w:w[0],context:N,expression:h})),(0,c.first)(([,w])=>!!w,[null]),(0,c.map)(([w])=>w))}getChanges(p,V,N){const h=p.map(w=>j(w,N)),E=(0,s.combineLatest)(h);return V.filter?this._accumulateRequests(E,V,N):E}static{this.\u0275fac=function(V){return new(V||u)(L.\u0275\u0275inject(l))}}static{this.\u0275prov=L.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac})}}const _=new L.InjectionToken("Represents a factory of calculated attribute source changes providers"),b=x.FactoryProvider.create({token:_,mappings:[{predicate:g=>g.every(p=>v.RequestRegistryService.requestsRegistrationInfos.has(p)),injectable:u}],default:{injectable:A}});class y{}class S extends y{constructor(p){super(),this._converterEvaluator=p}getTrigger(p,V){return this.getTriggerInternal(p,V).pipe((0,x.concatMapWith)(N=>this._converterEvaluator.evaluate({args:N,expression:p?.filter,context:V,defaultEvaluationFn:()=>!0})),(0,c.filter)(([,N])=>!!N),(0,c.map)(()=>{}))}}class R extends S{constructor(p){super(p)}getTriggerInternal(p,V){return I(p?.attribute,V)}static{this.\u0275fac=function(V){return new(V||R)(L.\u0275\u0275inject(l))}}static{this.\u0275prov=L.\u0275\u0275defineInjectable({token:R,factory:R.\u0275fac})}}class B extends S{constructor(p){super(p)}getTriggerInternal(p,V){return new s.Observable(N=>j(p?.request,V).subscribe(N))}static{this.\u0275fac=function(V){return new(V||B)(L.\u0275\u0275inject(l))}}static{this.\u0275prov=L.\u0275\u0275defineInjectable({token:B,factory:B.\u0275fac})}}const D=new L.InjectionToken("Represents a factory of calculated attribute trigger providers");function T(g){let p=[];return typeof g=="string"&&(p=[g]),Array.isArray(g)&&(p=g),p.map(V=>typeof V=="string"&&V?.trim()).filter(Boolean)}function U(g){return(g??[]).filter(p=>e(p)||P(p))}function f(g){const p=g.map(h=>v.RequestRegistryService.requestsRegistrationInfos.has(h)),V=p.includes(!0),N=p.includes(!1);return V&&N}function P(g){return!!g&&"attribute"in g&&!!g.attribute}function e(g){return!!g&&"request"in g&&!!g.request}function t(g){const p=T(g.from),V=U(g.triggers),{from:N,filter:h,converter:E,change:w,triggersOptions:K}=g;return p.length===0&&V.length===0?(console.error(`Both 'from' and 'triggers' properties of calculated attribute cannot be empty: ${JSON.stringify(g)}.`),null):p.length===0&&!E?(console.error(`Converter is required in a calculated attribute if there are 'triggers' and no 'from': ${JSON.stringify(g)}.`),null):f(p)?(console.error(`Simultaneous specification of attributes and request in the "from" property of calculated attribute is not supported: ${JSON.stringify(g)}.`),null):(p.length===0&&h&&console.warn(`Filter is skipped in a calculated attribute if there are 'triggers' and no 'from': ${JSON.stringify(g)}.`),{from:p,originalFrom:N,filter:p.length?h:void 0,converter:E,triggers:V,triggersOptions:{debounce:K?.debounce??0},change:w})}const i=x.FactoryProvider.create({token:D,mappings:[{predicate:P,injectable:R},{predicate:e,injectable:B}]});var r=a(21018),n=a(28399);const m=g=>!0,C=g=>g;class O{constructor(p,V,N,h){this._converterEvaluator=p,this._attributeSourcesChangesProviderFactory=V,this._attributeTriggerProviderFactory=N,this._measurePerformanceService=h}_createCalculateAttributeValueFn(p,V){const{viewModel:N,attribute:h,generateOptions:E}=p,{originalFrom:w,filter:K,converter:z}=V,q=Array.isArray(w);return k=>k.pipe((0,c.map)(G=>q?G:G?.[0]),(0,x.concatMapWith)(G=>this._converterEvaluator.evaluate({args:G,expression:K,context:N,defaultEvaluationFn:m})),(0,c.filter)(([,G])=>!!G),(0,c.concatMap)(([G])=>this._converterEvaluator.evaluate({args:G,expression:z,context:N,defaultEvaluationFn:C})),(0,c.map)(G=>{const Z=N.attributes[h];return[(0,n.cloneDeep)(G),(0,n.cloneDeep)(Z)]}),(0,c.filter)(([G,Z])=>!(0,n.isEqual)(G,Z)),(0,c.tap)(([G,Z])=>{N.attributes[h]=G,E?.onChangeAttributeValue(h,G,Z)}),(0,c.map)(([G])=>G))}_createGetAttributeValueFn(p){const{viewModel:V,attributeName:N,attributeConfig:h,calculateAttributeFn:E}=p;let w;const K=this._getAttributeSourcesStream(h,V);return()=>{const z=N in V.attributes;return w?z?(0,s.of)(V.attributes[N]):w:(w=E(K).pipe((0,c.shareReplay)({bufferSize:1,refCount:!0})),V._subscriptions.add(w.subscribe()),w)}}_getAttributeSourcesStream(p,V){const N=this._getAttributeTriggers(p,V),h=this._getAttributeSourcesChanges(p,V);if(!N)return h;const E=p.triggersOptions.debounce;return h?(0,s.merge)(N.pipe((0,c.debounceTime)(E)),h).pipe((0,c.withLatestFrom)(h),(0,c.map)(([,w])=>w)):N.pipe((0,c.startWith)(void 0),(0,c.debounceTime)(E))}_getAttributeTriggers(p,V){const{triggers:N}=p,h=N.map(E=>this._attributeTriggerProviderFactory.create(E)?.getTrigger(E,V)).filter(Boolean);return h.length===0?null:(0,s.merge)(...h)}_getAttributeSourcesChanges(p,V){const{from:N}=p;return N.length===0?null:this._attributeSourcesChangesProviderFactory.create(N).getChanges(N,p,V)}_defineCalculatedAttribute(p,V,N){Object.defineProperty(N,p,{get:()=>(0,s.firstValueFrom)(V(),{defaultValue:null}),configurable:!0})}defineAttribute(p){this._measurePerformanceService.measure(`CalculatedAttributeCreator.defineAttribute.${p.attribute}`,()=>{const{viewModel:V,attribute:N,attributeConfig:h}=p,E=t(h);if(E===null)return;const w=this._createCalculateAttributeValueFn(p,E),K=this._createGetAttributeValueFn({attributeName:N,attributeConfig:E,calculateAttributeFn:w,viewModel:V});this._defineCalculatedAttribute(N,K,V)})}static{this.\u0275fac=function(V){return new(V||O)(L.\u0275\u0275inject(l),L.\u0275\u0275inject(_),L.\u0275\u0275inject(D),L.\u0275\u0275inject(r.MeasurePerformanceService))}}static{this.\u0275prov=L.\u0275\u0275defineInjectable({token:O,factory:O.\u0275fac,providedIn:"root"})}}class W{static{this.\u0275fac=function(V){return new(V||W)}}static{this.\u0275mod=L.\u0275\u0275defineNgModule({type:W})}static{this.\u0275inj=L.\u0275\u0275defineInjector({providers:[O,l,R,B,A,u,b,i]})}}},55642:(J,$,a)=>{a.d($,{K:()=>L});var s=a(59131),c=a.n(s),M=a(21018),I=a.n(M),F=a(31996);class L{constructor(x,d){this.ngZone=x,this.measurePerformanceService=d}innerDefineAttribute(x,d){this.measurePerformanceService.measure(`DefaultAttributeCreator.defineAttribute.${x.attribute}`,()=>{const l=x.viewModel,v=l.attributes,j=x.attribute,o=x.attributeConfig,u=x.control,_=y=>{v[j]=y,this.ngZone.run(()=>{const S=l._viewModelAttributeChangeEventOptions?.getAsSilent();u.setValue(y,S),d?.call(this,y)})},b=()=>u.value;F.iR.defineAsyncAttribute(l,j,o,b,_)})}defineAttribute(x){this.innerDefineAttribute(x)}static{this.\u0275fac=function(d){return new(d||L)(s.\u0275\u0275inject(s.NgZone),s.\u0275\u0275inject(M.MeasurePerformanceService))}}static{this.\u0275prov=s.\u0275\u0275defineInjectable({token:L,factory:L.\u0275fac,providedIn:"root"})}}},32149:(J,$,a)=>{a.d($,{Z:()=>L});var s=a(59131),c=a.n(s),M=a(21018),I=a.n(M),F=a(55642);class L extends F.K{constructor(x,d){super(x,d)}defineAttribute(x){this.innerDefineAttribute(x,d=>{x?.viewModel?.setAttributePropertyValue(x?.attribute,"displayColor",d?.primaryColorValue)})}static{this.\u0275fac=function(d){return new(d||L)(s.\u0275\u0275inject(s.NgZone),s.\u0275\u0275inject(M.MeasurePerformanceService))}}static{this.\u0275prov=s.\u0275\u0275defineInjectable({token:L,factory:L.\u0275fac,providedIn:"root"})}}},94660:(J,$,a)=>{a.d($,{d:()=>I});var s=a(59131),c=a.n(s),M=a(66882);class I{constructor(L){this.injector=L,this.initDependencies()}initDependencies(){this.repository=this.injector.get(M.k),this.ngZone=this.injector.get(s.NgZone)}static{this.\u0275fac=function(A){return new(A||I)(s.\u0275\u0275inject(s.Injector))}}static{this.\u0275prov=s.\u0275\u0275defineInjectable({token:I,factory:I.\u0275fac})}}},18046:(J,$,a)=>{a.d($,{f:()=>M});var s=a(59131),c=a.n(s);class M{transform(F){return function(L){const{instance:A,params:x}=F,d={value:L.value};return A.validate(d,x)}}static{this.\u0275fac=function(L){return new(L||M)}}static{this.\u0275prov=s.\u0275\u0275defineInjectable({token:M,factory:M.\u0275fac,providedIn:"root"})}}},97082:(J,$,a)=>{a.d($,{f:()=>s.f});var s=a(18046)},37644:(J,$,a)=>{a.d($,{r:()=>s.r,CJ:()=>s.CJ,bg:()=>F.bg,vB:()=>_.v,dX:()=>b.d,iQ:()=>D,A:()=>s.A,a5:()=>s.a5,UO:()=>s.UO,Iu:()=>s.Iu,lg:()=>s.lg,vV:()=>s.vV,Fv:()=>s.Fv,Qj:()=>s.Qj,qG:()=>s.qG,jB:()=>s.jB,zH:()=>F.zH,ff:()=>I.f,Ky:()=>c.K,Im:()=>u,II:()=>F.II,Zr:()=>M.Z,No:()=>h,q_:()=>g.q,m1:()=>N,Xz:()=>K,OY:()=>f,vx:()=>U,BF:()=>E.B,e3:()=>e,sK:()=>l,AC:()=>v,Z$:()=>d,dr:()=>W,od:()=>s.od,wZ:()=>s.wZ,gd:()=>s.gd,Ox:()=>i});var s=a(13669),c=a(55642),M=a(32149),I=a(97082),F=a(46416),L=a(59131),A=a(38495),x=a(10161);class d extends x.L{constructor(q){super(q)}getValidator(q,k){const G=A.ValidatorRegistry.items.get(q);if(!G)throw new Error(`Validator '${q}' was not registered`);if(G.lazy&&!G.instantiate)throw new Error(`Lazy module with ${q} validator is not loaded`);return G.instantiate(k?.injectionContext)}static{this.\u0275fac=function(k){return new(k||d)(L.\u0275\u0275inject(L.Injector))}}static{this.\u0275prov=L.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac})}}class l{constructor(q){this.injector=q,this._schemaValidators=new Map}register(q,k){if((0,A.checkTypeNameFormat)(q.type,"ValidatorTypeName"),(0,A.checkCrtTypeNamePascalCase)(q.type),this._schemaValidators.has(q.type))throw new Error(`Error when register ${q.type} type. Element with this type has already exist`);this._schemaValidators.set(q.type,{instanceType:k,instanceConfig:q})}clearSchemaValidators(){this._schemaValidators.clear()}has(q){return this._schemaValidators.has(q)}get(q,k){const Z=this._schemaValidators.get(q)?.instanceType;if(!Z)throw new Error(`Validator '${q}' was not registered`);return new Z(this.injector)}static{this.\u0275fac=function(k){return new(k||l)(L.\u0275\u0275inject(L.Injector))}}static{this.\u0275prov=L.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac})}}class v extends d{constructor(q,k){super(k),this._schemaValidatorRegistry=q}getValidator(q,k){return this._schemaValidatorRegistry.has(q)?this._schemaValidatorRegistry.get(q,k?.validationParameters):super.getValidator(q,k)}static{this.\u0275fac=function(k){return new(k||v)(L.\u0275\u0275inject(l),L.\u0275\u0275inject(L.Injector))}}static{this.\u0275prov=L.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac})}}var j=a(94655);class o extends j._{constructor(){super(...arguments),this.async=!1}validate(q){return null}}class u extends d{constructor(q){super(q)}getValidator(q,k){try{return super.getValidator(q,k)}catch{return new o(this.injector)}}static{this.\u0275fac=function(k){return new(k||u)(L.\u0275\u0275inject(L.Injector))}}static{this.\u0275prov=L.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac})}}var _=a(19808),b=a(94660),y=a(73308),S=a(79772),R=a(21018),B=a(29957);class D{constructor(q){this._translateService=q}_getAttributesCaptions(q,k){const G=k.map(Z=>{const Q=q._attributeConfigs[Z];return Q&&Q.caption?Promise.resolve(Q.caption):q[R.SchemaResourcesSuffix][R.TypeResources.string][Z].then(Y=>Y||Z)});return Promise.all(G)}_getFirstValidationError(q){const k=Object.entries(q??{});if(k.length===0)return null;const G=k[0][1];return Object.entries(G)[0]}getValidationErrorMessage(q,k){var G=this;return(0,y.A)(function*(){const Z=G._getFirstValidationError(k);if(!Z)return"";const Q=Z[0],Y=Z[1].message,ae=Object.entries(k).filter(([ee,te])=>Object.keys(te).includes(Q)).map(([ee,te])=>ee),re=(yield G._getAttributesCaptions(q,ae)).map(ee=>`"${ee}"`),se=ae.length===1?G._translateService.instant("BaseViewModel.ValidationErrorMessageSingleErrorField"):G._translateService.instant("BaseViewModel.ValidationErrorMessageSeveralErrorFields");return B.String.format(se,re.join(", "),Y)})()}static{this.\u0275fac=function(k){return new(k||D)(L.\u0275\u0275inject(S.TranslateService))}}static{this.\u0275prov=L.\u0275\u0275defineInjectable({token:D,factory:D.\u0275fac})}}var T=a(62278);class U{constructor(q){this._injector=q,this._subscription=new T.Subscription,this._handlerRegisterMap=new Map;for(const[,k]of A.InternalRequestHandlerRegistry.requestHandlersMap)this._registerHandler(k);this._subscription.add(A.InternalRequestHandlerRegistry.onAddRequestHandler((k,G)=>{this._registerHandler(G)})),this._subscription.add(A.InternalRequestHandlerRegistry.onRemoveRequestHandler((k,G)=>{this._removeHandler(G)}))}_registerHandler(q){const{type:k,scopes:G,requestType:Z,createHandler:Q,lazy:Y,lazyModuleRef:X,source:ae}=q.instanceConfig;this._handlerRegisterMap.has(k)?A.HandlerChainService.instance.update({type:k,createHandler:Q}):this._handlerRegisterMap.set(k,A.HandlerChainService.instance.register({type:k,requestType:Z,scopes:[...G??[]],source:ae,createHandler:Q,lazy:Y,lazyModuleRef:X}))}_removeHandler(q){const{type:k}=q.instanceConfig;this._handlerRegisterMap.get(k)()}ngOnDestroy(){this._subscription.unsubscribe(),this._handlerRegisterMap.forEach(q=>{q()})}static{this.\u0275fac=function(k){return new(k||U)(L.\u0275\u0275inject(L.Injector))}}static{this.\u0275prov=L.\u0275\u0275defineInjectable({token:U,factory:U.\u0275fac,providedIn:"root"})}}const f={provide:L.APP_INITIALIZER,useFactory:()=>()=>{},deps:[U],multi:!0};var P=a(53035);class e{create(q){const{validator:k,...G}=q,Z=G.params.map(({name:Q})=>Q);return class extends P._J{constructor(Q){super(Q),this.async=G.async}_getMessageFromParams(Q){return{[G.type]:{message:Q.message}}}_setParamsProxy(Q){return new Proxy(Q,{get(Y,X){if(Z.includes(X))return Y[X];throw new Error(`Property ${X} is not defined in validator params config`)}})}_toPromise(Q){let Y;return Q instanceof Promise?Y=Q:Q instanceof T.Observable?Y=(0,T.lastValueFrom)(Q,{defaultValue:null}):Y=Promise.resolve(Q),Y}validate(Q,Y){let X=Y;Y&&(X=this._setParamsProxy(Y));const re=k(X)(Q,X);return this.isAsync?this._toPromise(re).then(se=>se&&X?.message?this._getMessageFromParams(X):se):X?.message&&re?this._getMessageFromParams(X):re}}}}var t=a(98594);const i={get:z=>{if(z===t.L)return{create:()=>(0,T.of)(null)};if(z===R.MeasurePerformanceService)return{measure:(q,k)=>k(),measureCallback:(q,k)=>k(),measure$:q=>k=>k}}};var r=a(31725),n=a(28399),m=a(36486),C=a(28114),O=a(31996);class W{constructor(q,k){this._modelGenerator=q,this._measurePerformanceService=k}_getSchemaDiff(q,k){const G=(0,r.diff)(q?.viewModelConfig??{},k?.viewModelConfig??{}),Z=(0,r.diff)(q?.modelConfig??{},k?.modelConfig??{}),Q=(0,r.diff)(q?.resources??{},k?.resources??{});return{changedAttributesDiff:G,changedModelDiff:Z,changedResourcesDiff:Q}}diff(q,k,G){return this._measurePerformanceService.measure("ViewModelDiffPatch.diff",()=>{const{changedAttributesDiff:Z,changedModelDiff:Q,changedResourcesDiff:Y}=this._getSchemaDiff(q,k);if((0,n.isEmpty)(Z)&&(0,n.isEmpty)(Q))return(0,T.of)({actualViewModelConfig:k?.viewModelConfig,resources:Y});Z.attributes=Z.attributes||{},Q.dataSources=Q.dataSources||{};let X=Object.keys(Z.attributes);const ae=Object.keys(Q.dataSources),re=Object.keys(k.viewModelConfig?.attributes??{}).filter(ee=>{const te=k.viewModelConfig.attributes[ee]??{};if((0,O.o7)(te))return ae.includes(te.modelConfig?.path)||X.includes(te.modelConfig?.sortingConfig?.attributeName)});X=(0,n.uniq)([...X,...re]);const se=X.map(ee=>{const te=k.viewModelConfig.attributes[ee]??{};if((0,O.o7)(te))return te?.modelConfig?.path?.split(".")[0]}).filter(Boolean);return this._modelGenerator.generate(k.modelConfig,G).pipe(this._measurePerformanceService.measure$("ViewModelDiffPatch.diff.modelGenerate"),(0,m.map)(ee=>({actualViewModelConfig:k?.viewModelConfig,attributes:{changed:X},resources:Y,models:{changed:ee.filter(te=>se.includes(te.name))}})))})}static{this.\u0275fac=function(k){return new(k||W)(L.\u0275\u0275inject(C.n),L.\u0275\u0275inject(R.MeasurePerformanceService))}}static{this.\u0275prov=L.\u0275\u0275defineInjectable({token:W,factory:W.\u0275fac})}}var g=a(49159),p=a(11848);const V="LiveEditingNotifier";class N{constructor(q){this._messageChannelService=q,this._subscribeEntityChanged()}get liveEditingEvent$(){return this._messageChannelService.messageEvent$.pipe((0,m.filter)(q=>q.header.sender===V),(0,m.map)(q=>{const k=q.body;return{entitySchemaName:k.EntitySchemaName,columnNames:k.ColumnNames,primaryColumnValue:k.PrimaryColumnValue,eventType:this._getLiveEditingEventType(k.EventType),primaryColumnName:k.PrimaryColumnName,connectedLiveSchemaColumns:k.ConnectedLiveSchemaColumns}}))}_subscribeEntityChanged(){this.liveEditingEvent$.subscribe(q=>{this._notifyModel(q)})}_notifyModel(q){g.q.instance.notify({modelId:(0,A.generateGuid)(),dataSchemaName:q.entitySchemaName,type:q.eventType,payload:{primaryAttributesValues:[[{name:q.primaryColumnName,value:q.primaryColumnValue}]],changedAttributes:q.columnNames}})}_getLiveEditingEventType(q){switch(q){case 0:return p.MQ.Create;case 1:return p.MQ.Update;case 2:return p.MQ.Delete;default:break}}static{this.\u0275fac=function(k){return new(k||N)(L.\u0275\u0275inject(R.MessageChannelService))}}static{this.\u0275prov=L.\u0275\u0275defineInjectable({token:N,factory:N.\u0275fac,providedIn:"root"})}}const h={provide:L.APP_INITIALIZER,useFactory:()=>()=>{},deps:[N],multi:!0};var E=a(10763),w=a(96590);class K{constructor(){}_getDataSchema(q,k){return q.dataSchemas[k]}_getRelationData(q,k){const G=k.attributePath;if(G.split(".").length!==1)throw new Error(["Transition relation is not allowed.",`Model name: '${q}', attribute path: '${G}'`].join(" "));const Z=k.relationPath.split(".");if(Z.length!==2)throw new Error(["Transition relation is not allowed.",`Model name: '${q}', relation path: '${k.relationPath}'`].join(" "));const[Q,Y]=Z;return{modelAttributeName:G,dependOnModelName:Q,dependOnModelAttributeName:Y}}_mergeRelationTypes(q,k){if(q===O.Eq.None)return k;if(k===O.Eq.None)return q;if(q===O.Eq.CircularDependency||k===O.Eq.CircularDependency)return O.Eq.CircularDependency;if(q===k)return q;if(q===O.Eq.OneToMany&&k===O.Eq.ManyToOne||q===O.Eq.ManyToOne&&k===O.Eq.OneToMany)return O.Eq.CircularDependency;if(q===O.Eq.ManyToMany||k===O.Eq.ManyToMany)return O.Eq.ManyToMany}_saveBefore(q,k,G){const Z=G.find(Q=>Q.name===k);Z.dependsOn.includes(q)||Z.dependsOn.push(q)}_saveAfter(q,k,G){const Z=G.find(Q=>Q.name===q);Z.dependsOn.includes(k)||Z.dependsOn.push(k)}_sort(q,k){const G=k.map(Z=>({name:Z,dependsOn:[]}));return k.forEach(Z=>{const Q=q._getModelDependencies(Z);if(!Q||Q.length===0)return;const Y=new Map;for(const X of Q){const{modelAttributeName:ae,dependOnModelName:re,dependOnModelAttributeName:se}=this._getRelationData(Z,X),ee=(0,O.p9)(this._getDataSchema(q,Z),ae,this._getDataSchema(q,re),se);let te=Y.get(re)??O.Eq.None;te=this._mergeRelationTypes(te,ee),Y.set(re,te)}Y.forEach((X,ae)=>{switch(X){case O.Eq.ManyToOne:this._saveBefore(Z,ae,G);break;case O.Eq.OneToMany:this._saveAfter(Z,ae,G);break;case O.Eq.ManyToMany:throw new Error("Many-to-many relation is not supported");case O.Eq.CircularDependency:throw new Error("Circular dependency detected")}})}),(0,w.buildOrder)(G)}sort(q,k){return k.every(Z=>q.getModelMode(Z)===R.ModelMode.Update)?k:this._sort(q,k).flat()}static{this.\u0275fac=function(k){return new(k||K)}}static{this.\u0275prov=L.\u0275\u0275defineInjectable({token:K,factory:K.\u0275fac})}}},49159:(J,$,a)=>{a.d($,{q:()=>I});var s=a(62278),c=a.n(s);const M=window;class I{constructor(){this._event$=new s.Subject}static get instance(){return M.__modelEventNotificationService||(M.__modelEventNotificationService=new I),M.__modelEventNotificationService}get event$(){return this._event$.asObservable()}notify(L){this._event$.next(L)}}},46416:(J,$,a)=>{a.d($,{bg:()=>s,zH:()=>L,II:()=>F});class s{}var c=a(73308),M=a(38495),I=a(59131);class F extends s{processRequest(x,d){return(0,c.A)(function*(){const{model:l,payload:v}=d??{},j={...x,model:l&&M.Model[M._from](l),payload:v};return yield M.HandlerChainService.instance.process(j)})()}onBeforeLoad(x){return this.processRequest({type:"crt.HandleBeforeModelLoadRequest",previousPayload:x?.previousPayload},x)}onAfterLoad(x){var d=this;return(0,c.A)(function*(){yield d.processRequest({type:"crt.HandleAfterModelLoadRequest",previousPayload:x?.previousPayload},x)})()}onBeforeInsert(x){return this.processRequest({type:"crt.HandleBeforeModelInsertRequest"},x)}onAfterInsert(x){var d=this;return(0,c.A)(function*(){yield d.processRequest({type:"crt.HandleAfterModelInsertRequest"},x)})()}onBeforeUpdate(x){return this.processRequest({type:"crt.HandleBeforeModelUpdateRequest"},x)}onAfterUpdate(x){var d=this;return(0,c.A)(function*(){yield d.processRequest({type:"crt.HandleAfterModelUpdateRequest"},x)})()}onBeforeDelete(x){return this.processRequest({type:"crt.HandleBeforeModelDeleteRequest"},x)}onAfterDelete(x){var d=this;return(0,c.A)(function*(){yield d.processRequest({type:"crt.HandleAfterModelDeleteRequest"},x)})()}static{this.\u0275fac=(()=>{let x;return function(l){return(x||(x=I.\u0275\u0275getInheritedFactory(F)))(l||F)}})()}static{this.\u0275prov=I.\u0275\u0275defineInjectable({token:F,factory:F.\u0275fac,providedIn:"root"})}}class L extends F{processRequest(x,d){return super.processRequest({...x,$context:this._context?.deref()},d)}setContext(x){this._context=new WeakRef(x)}static{this.\u0275fac=(()=>{let x;return function(l){return(x||(x=I.\u0275\u0275getInheritedFactory(L)))(l||L)}})()}static{this.\u0275prov=I.\u0275\u0275defineInjectable({token:L,factory:L.\u0275fac})}}},10763:(J,$,a)=>{a.d($,{B:()=>A});var s=a(28399),c=a.n(s),M=a(62278),I=a.n(M),F=a(59131),L=a.n(F);class A{constructor(){this.changedValues$=new M.Subject,this._valuesStore={}}setValues(d){if(d){const l={};Object.entries(d).forEach(([v,j])=>{const o=this._valuesStore[v]!==j;this._valuesStore[v]=(0,s.cloneDeep)(j),o&&(l[v]=this._valuesStore[v])}),(0,s.isEmpty)(l)||this.changedValues$.next(l)}}get values(){return this._valuesStore}static{this.\u0275fac=function(l){return new(l||A)}}static{this.\u0275prov=F.\u0275\u0275defineInjectable({token:A,factory:A.\u0275fac})}}},19808:(J,$,a)=>{a.d($,{v:()=>I});var s=a(31996),c=a(59131);const M=a(85088);class I{sort(L,A){const x=[];let d=[];Object.entries(L||{}).forEach(([v,j])=>{if((0,s.tC)(j)){let o=j.from;o=Array.isArray(o)?o:[o];const u=o.map(_=>[v,_]);d=d.concat(u)}else x.push(v)});const l=M(d).reverse();return[...x,...l].filter(Boolean).filter((v,j,o)=>o.indexOf(v)===j).map(v=>{const j=l.includes(v)?L[v]??A[v]:L[v];return[v,j]})}static{this.\u0275fac=function(A){return new(A||I)}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:I,factory:I.\u0275fac,providedIn:"root"})}}},40155:(J,$,a)=>{a.d($,{x:()=>M});var s=a(59131),c=a.n(s);const M=new s.InjectionToken("View model attribute creator factory")},30662:(J,$,a)=>{a.d($,{x:()=>s.x});var s=a(40155)},31996:(J,$,a)=>{a.d($,{Eq:()=>S,H2:()=>b.H,Tb:()=>_.T,iR:()=>u.iR,SC:()=>U,A1:()=>s,Jt:()=>j,OP:()=>x,NI:()=>l,p9:()=>T,$9:()=>u.$9,Rz:()=>u.Rz,tC:()=>y.isCalculatedAttributeConfig,MT:()=>M,o7:()=>y.isModelAttributeConfig,V0:()=>R,aW:()=>P,CB:()=>u.CB,og:()=>A,SH:()=>L,OL:()=>d});function s(e,t="value"){return e.map(i=>({displayValue:i.caption,value:i[t],uId:i.uId}))}var c=a(38495);function M(e){const t=e?.config;if(!t)return!1;const i=t;if(!!(i.dataSourceConfig&&i.attributeName))return!0;const n=t;return n.loadType===c.DataSourceLoadType.Load||n.loadType===c.DataSourceLoadType.Reload}var I=a(56711),F=a(36486);function L(e){Object.values(e.controls||{}).forEach(t=>{t instanceof I.FormGroup||t instanceof I.FormArray?L(t):t.updateValueAndValidity({onlySelf:!0})})}function A(e){e?.markAsPristine(),e?.markAsUntouched(),e?.updateValueAndValidity()}function x(e){return Object.values(e?.errors||{}).map(t=>t?.message).filter(Boolean)}function d(e){return e.statusChanges.pipe((0,F.startWith)(e.status),(0,F.first)(()=>e.status.toLowerCase()!=="pending"),(0,F.map)(()=>{}))}function l(e,t){const i=e.getBoundDataSchema(t),r=e.getBoundDataSourceName(t),n=i?.attributes.find(m=>e.getViewModelAttributePath(r,m.name)===t);return Promise.resolve({...n,referenceSchemaName:n?.referenceSchemaName??i?.name})}var v=a(73308);function j(e,t){return o.apply(this,arguments)}function o(){return o=(0,v.A)(function*(e,t){const i=typeof t=="string"?t.split("."):t;let r=i.shift(),n=e;for(;r;)n=yield n[r],r=i.shift();return n}),o.apply(this,arguments)}var u=a(3928),_=a(61872),b=a(86036),y=a(21018),S;(function(e){e.None="None",e.OneToMany="OneToMany",e.ManyToOne="ManyToOne",e.ManyToMany="ManyToMany",e.CircularDependency="CircularDependency"})(S||(S={}));function R(e,t){return!!e?.some(i=>i.relationPath.split(".").shift()===t)}function B(e){return e.dataValueType===c.DataValueType.Guid}function D(e,t){return B(t)&&e.primaryAttributeName===t.name}function T(e,t,i,r){const n=i.findAttributeByName(r),m=e.findAttributeByName(t);return(m.isLookup||B(m))&&D(i,n)?S.OneToMany:D(e,m)&&n.isLookup?S.ManyToOne:S.ManyToMany}function U(e,t,i,r,n){return e=[...e||[]],t.forEach(m=>{const O=m.getDataSource()?.dataSourceName,g=r?.[O]?.type!==y.DataSourceLoadingType.OnInit,p=n?.allowMultipleDataSources&&R(n?.modelsDependenciesConfig?.[O],i);(0,u.CB)(m)&&g&&!p&&(e.find(N=>(N.name||i)===O)||e.push({name:O,action:c.ModelInPageAction.Add}))}),e}var f=a(41821);function P(e){return e===f.F.ForTheSelectedPage||e===f.F.ForTheSelectedRecords}},86036:(J,$,a)=>{a.d($,{H:()=>A});var s=a(38495),c=a.n(s),M=a(21018),I=a.n(M),F=a(28399),L=a.n(F);class A{static _setImageLookupTypeUrl(d,l){const v=d[l],j=v?.value;j&&(v.url=(0,M.getImageFullUrlById)(j))}static _setBlobTypeUrl(d,l,v){const j=l[v];if(j){const o=l.Id;l[v]={value:j,url:(0,M.getImageFullUrlById)(o,d,v)}}}static _addImageUrl(d,l,v){l.forEach(j=>{switch(j.dataValueType){case s.DataValueType.IMAGELOOKUP:{this._setImageLookupTypeUrl(v,j.name);break}case s.DataValueType.Image:{this._setBlobTypeUrl(d,v,j.name);break}default:break}})}static serializeRecordPrimaryAttributesValues(d){return d.map(l=>`${l.name}:${l.value}`).join(";")}static getModelPrimaryAttributeValues(d,l){const v=d.getPrimaryAttributesNames();return l.map(j=>v.map(o=>({name:o,value:j[o]})))}static getOwnColumnsValues(d,l){const v=l??{};if(d.attributes.length){const j=d.attributes.filter(o=>o.attributeType===s.DataSchemaAttributeType.OwnAttribute).map(o=>o.name).filter(o=>!(0,F.isUndefined)(v[o])).map(o=>[o,v[o]]);return Object.fromEntries(j)}else return v}static getPrimaryAttributeValuesFromParameters(d,l){const v=l.filter(j=>j.type===s.ModelParameterType.PrimaryColumnValue);return v.length?v.map(j=>({[d.primaryAttributeName]:j.value})):[]}static getPrimaryAttributeValuesFromData(d,l){const v=d.getPrimaryAttributesNames();return v.length?v.filter(j=>l[j]).map(j=>({[j]:l[j]})):[]}static getPrimaryAttributeValues(d,l,v){const j=this.getPrimaryAttributeValuesFromData(d,l);return j.length?j:this.getPrimaryAttributeValuesFromParameters(d,v)}static getDataSourceLoadOptions(d){const l={loadType:d?.loadType||s.DataSourceLoadType.Load};return d?.pagingConfig&&(l.pagingConfig=d.pagingConfig),d?.sortingConfig&&(l.sortingConfig=d.sortingConfig),d?.isDistinct&&(l.isDistinct=d.isDistinct),l}static getImageAttributes(d,l){const v=[];return(l||[]).forEach(j=>{const o=d.findAttributeByName(j);o?.isImage&&v.push(o)}),v}static processImageData(d,l,v){const j=A.getImageAttributes(d,v);return j.length>0&&l.forEach(o=>this._addImageUrl(d.name,j,o)),l}static removeNotRequestedData(d,l){return Object.keys(l).forEach(v=>{d.includes(v)||delete l[v]}),l}static getLoadRequestSignature(d,l,v,j){return JSON.stringify(d)+JSON.stringify(l)+JSON.stringify(v)+JSON.stringify(j)}}},61872:(J,$,a)=>{a.d($,{T:()=>M});var s=a(21018),c=a.n(s);class M{static _trimValueIfNeeded(F,L){return L?.trimValue&&!M.isEmptyInputValue(F)&&(0,s.isString)(F)?F.trim():F}static isEmptyInputValue(F){return F==null||(typeof F=="string"||Array.isArray(F))&&F.length===0}static hasValidLength(F){return F!=null&&typeof F.length=="number"}static getControlValueAndTrimIfNeeded(F,L){return M._trimValueIfNeeded(F.value,L)}}},3928:(J,$,a)=>{a.d($,{$9:()=>j,CB:()=>v,Rz:()=>l,iR:()=>o});var s=a(38495),c=a.n(s),M=a(21018),I=a.n(M),F=a(62278),L=a.n(F),A=a(36486),x=a.n(A),d=a(37015);function l(u){for(;u?.parent;)u=u.parent;return u}function v(u){return u?.getDataSource()?.scope===s.DataSourceScope.Page}function j(u){const _=[];return u?._modelsMap.forEach((b,y)=>{v(b)&&_.push(y)}),_}class o{static{this._dataCache=new WeakMap}static _getDataSourceColumns(_){const b={};let y=!1;for(const[S,R]of Object.entries(_.dataSourceConfig.config.attributes)){const B=R.path;b[(0,M.removeSpecialSymbols)(S)]=B,B==="Id"&&(y=!0)}return!y&&_.includePrimaryAttributes!==!1&&(b.Id="Id"),b}static _createAttributesConfigMap(_,b,y,S,R){const B={},D=this.getAttributeDataSourceOldName(_,S);for(const[T]of Object.entries(b)){const U=R.config?.useOriginalAttributesName?`${T}`:`${D}_${T}`,f=R.config.attributes[T],P={path:`${y}.${T}`,type:f?.type,functionConfig:f?.functionConfig,aggregationConfig:f?.aggregationConfig};B[U]={modelConfig:P}}return B}static _createAttributePagingConfig(_){return _.pagingConfig||{rowCount:30}}static _createAttributeSortingConfig(_){return _.sortingConfig||{attributeName:_.attributeName+"Sorting"}}static _createAttributeFiltersConfig(_){return _.filtersConfig?.map(b=>{const y={...b};return delete y.value,y})||[]}static _getDataSourceNameForDynamicModel(_,b){return _.getBoundDataSourceNameByAttributePath(b)||this._getAttributeDataSourceDefaultName(b)}static _getDynamicDataSourceNamePrefix(){return`${d.wY}_`}static _isDynamicDataSourceName(_){return _.startsWith(this._getDynamicDataSourceNamePrefix())}static _getAttributeDataSourceDefaultName(_){return`${_}${d.kr}`}static _getLoadData(_,b,y,S){let R;return this._dataCache.has(_)?R=this._dataCache.get(_):(R=b.load(y,[]).pipe((0,A.share)(),(0,A.tap)(()=>this._dataCache.delete(_))),this._dataCache.set(_,R)),(0,F.lastValueFrom)(R.pipe((0,F.map)(()=>S())),{defaultValue:null})}static createAttributeConfig(_,b,y){const S=y.attributeName,R=y.dataSourceConfig,B=this._getDataSourceColumns(y),D=this._createAttributesConfigMap(_,B,b,S,R),T=this._createAttributePagingConfig(y),U=this._createAttributeSortingConfig(y),f=this._createAttributeFiltersConfig(y);return{isCollection:!0,modelConfig:{path:b,pagingConfig:T,sortingConfig:U,filterAttributes:f},viewModelConfig:{attributes:D}}}static getAttributeDataSourceOldName(_,b){let y=this._getDataSourceNameForDynamicModel(_,b);return(!y||this._isDynamicDataSourceName(y))&&(y=this._getAttributeDataSourceDefaultName(b)),y}static createDynamicDataSourceNameFromAttributeName(_,b){const y=this._getDynamicDataSourceNamePrefix(),S=this._getDataSourceNameForDynamicModel(_,b);return this._isDynamicDataSourceName(S)?S:`${y}${S}`}static defineAsyncAttribute(_,b,y,S,R){const B=y.modelConfig?.path?.split(".")[0],D=_.getModelByName(B),T="isLookup"in y&&y.isLookup,U="isCollection"in y&&y.isCollection;Object.defineProperty(_,b,{get:()=>D&&U&&!T&&!D?.isLoaded?this._getLoadData(D,_,B,S):Promise.resolve(S()),set:R,configurable:!0})}}},29721:(J,$,a)=>{a.d($,{v:()=>I});var s=a(59131),c=a.n(s),M=a(38128);class I{constructor(){this.viewModelConstructor=M.o}static useClass(L){return new class extends I{constructor(){super(...arguments),this.viewModelConstructor=L}}}create(L,A,x,d,l,v,j,o){return new this.viewModelConstructor(L,A,x,d,l,v,j,o)}static{this.\u0275fac=function(A){return new(A||I)}}static{this.\u0275prov=s.\u0275\u0275defineInjectable({token:I,factory:I.\u0275fac,providedIn:"root"})}}},99499:(J,$,a)=>{a.d($,{C:()=>b});var s=a(59131),c=a.n(s),M=a(38495),I=a.n(M),F=a(21018),L=a.n(F),A=a(62278),x=a.n(A),d=a(36486),l=a.n(d),v=a(11848),j=a(65576),o=a(48598),u=a(37644),_=a(29721);class b extends u.dX{constructor(){super(...arguments),this._lifecycleHooksRequests={init:o.kU,resume:o.h_,pause:o.S,destroy:o.Si},this.handlerChain=M.HandlerChainService.instance}_processRequest(S,R,B){return this.ngZone.runOutsideAngular(()=>this.sendRequest({...S,scopes:B,$context:R}))}_processViewModelAttributeChanges(S,R){S.events$.pipe((0,d.filter)(B=>B.type===j.n.ChangeAttributeValue&&!B.payload?.preventAttributeChangeRequest)).subscribe({next:B=>{const D=`${v.I4.ProcessingAttributeChangeRequest}-${(0,M.generateGuid)()}`;S._onAsyncTaskStarted(D),this._processRequest(new M.HandleViewModelAttributeChangeRequest(B.payload),S,R).then(()=>S._onAsyncTaskFinished(D))}})}initDependencies(){super.initDependencies(),this.viewModelFactory=this.injector.get(_.v)}generateLifecycleHooks(S,R){Object.entries(this._lifecycleHooksRequests).forEach(([B,D])=>{S[B]=new Proxy(S[B],{apply:(T,U,f)=>{const P=T.apply(U,f);if(!(P instanceof A.Observable))throw new Error(`Method ${B} should return Observable`);return P.pipe((0,d.switchMap)(e=>(0,A.from)(this._processRequest(new D,S,R.scopes)).pipe((0,A.map)(()=>e))))}})})}_generateFromConfig(S,R){const B=R||this.injector,{viewModelConfig:D,modelConfig:T,resources:U,models:f,scopes:P,modelInitConfigs:e,modelConfig:{primaryDataSourceName:t}={},parentViewModel:i,businessRulesActive:r}=S,n=this.viewModelFactory.create(this,B,this._trimEmptyAttributes(D),U,null,P,e,i);return this.generateLifecycleHooks(n,S),this._processViewModelAttributeChanges(n,P),n.init(f,{modelDependencies:T?.dependencies,primaryModelName:t,modelsLoadingConfig:T?.loadingConfig,businessRulesActive:r})}_trimEmptyAttributes(S){const R=S?.attributes??{};return Object.keys(R).forEach(B=>{R[B]||delete R[B]}),{...S,attributes:R}}_generateFromString(S,R){return this.repository.resolveModelConfig(S.viewModelConfig).pipe((0,d.switchMap)(B=>this._generateFromConfig({...S,viewModelConfig:B},R)))}sendRequest(S){return this.handlerChain.process(S)}generate(S,R){const B=R?.get(F.MeasurePerformanceService);return typeof S.viewModelConfig=="string"?B?this._generateFromString(S,R).pipe(B.measure$("viewModelGenerator.generateFromString")):this._generateFromString(S,R):B?this._generateFromConfig(S,R).pipe(B.measure$("viewModelGenerator.generateFromConfig")):this._generateFromConfig(S,R)}static{this.\u0275fac=(()=>{let S;return function(B){return(S||(S=s.\u0275\u0275getInheritedFactory(b)))(B||b)}})()}static{this.\u0275prov=s.\u0275\u0275defineInjectable({token:b,factory:b.\u0275fac,providedIn:"root"})}}},66882:(J,$,a)=>{a.d($,{e:()=>x,k:()=>A});var s=a(62278),c=a.n(s),M=a(36486),I=a.n(M),F=a(59131),L=a.n(F);class A{resolveModelConfig(l){return null}static{this.\u0275fac=function(v){return new(v||A)}}static{this.\u0275prov=F.\u0275\u0275defineInjectable({token:A,factory:A.\u0275fac,providedIn:"root"})}}class x{constructor(){this.account={attributes:{Name:{},Ships:{isCollection:!0,viewModelConfig:"ship"},Employee:{viewModelConfig:"employee"}}},this.ship={attributes:{Id:{}}},this.employee={attributes:{Name:{},Age:{}}}}resolveModelConfig(l){return(0,s.of)(this[l]).pipe((0,M.delay)(50))}static{this.\u0275fac=function(v){return new(v||x)}}static{this.\u0275prov=F.\u0275\u0275defineInjectable({token:x,factory:x.\u0275fac,providedIn:"root"})}}}}]);
