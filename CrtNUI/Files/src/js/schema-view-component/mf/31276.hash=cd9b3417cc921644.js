(self.webpackChunkapp_studio_enterprise_schema_view=self.webpackChunkapp_studio_enterprise_schema_view||[]).push([[31276,73308,50927,28546,6165,62832,40451,18070,95689,94260,71879,41421,63802,86183,8564,30945,53326,75707,98088,20469,42850,70422,48041,15184,92803,80898,58517,25660,3279,91374,68993,83231,8895,5612,38469,60850],{8895:(g,f,d)=>{d.r(f),d.d(f,{EntityStageDataTableSliderConverter:()=>i,EntityStageProgressBarColorMapperService:()=>a,EntityStageSchemaFilterService:()=>C});var E=d(73308),p=d(5960),c=d(38495),u=d(96590),w=d(59131);class a{constructor(){this._newPaletteColorsMap=[{oldColor:"#000000",newColor:"#181818"},{oldColor:"#999999",newColor:"#757575"},{oldColor:"#DFDFDF",newColor:"#D6D6D6"},{oldColor:"#EF7E63",newColor:"#E00022"},{oldColor:"#C73920",newColor:"#B41406"},{oldColor:"#D2310D",newColor:"#B41406"},{oldColor:"#E06F56",newColor:"#E00022"},{oldColor:"#EBA793",newColor:"#E67860"},{oldColor:"#E99886",newColor:"#E67860"},{oldColor:"#7F2910",newColor:"#840D01"},{oldColor:"#B61303",newColor:"#840D01"},{oldColor:"#85C280",newColor:"#54AA4E"},{oldColor:"#D1E9BD",newColor:"#54AA4E"},{oldColor:"#54AA4D",newColor:"#0C8701"},{oldColor:"#2C6018",newColor:"#073F05"},{oldColor:"#035500",newColor:"#073F05"},{oldColor:"#64B8DF",newColor:"#4D84E2"},{oldColor:"#D4EBF6",newColor:"#80A7EB"},{oldColor:"#286581",newColor:"#0026BC"},{oldColor:"#6483C3",newColor:"#9641A9"},{oldColor:"#B87CCF",newColor:"#9641A9"},{oldColor:"#46639F",newColor:"#7848EE"},{oldColor:"#D1DCF0",newColor:"#B97CD1"},{oldColor:"#D6BEE3",newColor:"#B97CD1"},{oldColor:"#2B467E",newColor:"#4F43C2"},{oldColor:"#5BC8C4",newColor:"#02C2A8"},{oldColor:"#95DBD1",newColor:"#02C2A8"},{oldColor:"#4CA6A3",newColor:"#08857E"},{oldColor:"#00BFA5",newColor:"#08857E"},{oldColor:"#BFE8E7",newColor:"#95DBD8"},{oldColor:"#D3F1ED",newColor:"#95DBD8"},{oldColor:"#327B78",newColor:"#0E5F53"},{oldColor:"#009688",newColor:"#0E5F53"},{oldColor:"#F8D162",newColor:"#FFAC07"},{oldColor:"#D3AE46",newColor:"#FF8800"},{oldColor:"#FBE8B2",newColor:"#F9D68D"},{oldColor:"#A8882E",newColor:"#F86700"},{oldColor:"#FF6534",newColor:"#F86700"},{oldColor:"#FBAD43",newColor:"#FF602E"},{oldColor:"#FF795A",newColor:"#FF602E"},{oldColor:"#CC8930",newColor:"#FF4013"},{oldColor:"#FDD6A1",newColor:"#FFA089"},{oldColor:"#A16A1F",newColor:"#D31E0D"},{oldColor:"#FF1C06",newColor:"#D31E0D"},{oldColor:"#8E8EB7",newColor:"#566D83"},{oldColor:"#5E5684",newColor:"#0D2E4E"},{oldColor:"#E1DEED",newColor:"#8697A7"},{oldColor:"#3C365B",newColor:"#031225"},{oldColor:"#0B8500",newColor:"#066800"},{oldColor:"#309726",newColor:"#066800"},{oldColor:"#589928",newColor:"#066800"},{oldColor:"#8ECB60",newColor:"#0C8701"},{oldColor:"#8A8A8A",newColor:"#757575"},{oldColor:"#2669DC",newColor:"#004FD6"},{oldColor:"#3A8BB1",newColor:"#004FD6"},{oldColor:"#0058EF",newColor:"#004FD6"},{oldColor:"#314D69",newColor:"#0D2E4E"}]}_combineColors(o,e){const r=o.match(/rgba?\((\d+),\s*(\d+),\s*(\d+),?\s*(\d*\.?\d+)?\)/),l=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+),?\s*(\d*\.?\d+)?\)/),n=Math.round((parseInt(r[1])+parseInt(l[1]))/2),D=Math.round((parseInt(r[2])+parseInt(l[2]))/2),t=Math.round((parseInt(r[3])+parseInt(l[3]))/2),s=((parseFloat(r[4]||"1")+parseFloat(l[4]||"1"))/2).toFixed(2);return`rgba(${n},${D},${t},${s})`}getStageColor(o){const e=this._newPaletteColorsMap.find(r=>r.oldColor===o.toUpperCase())?.newColor;return e||o}getStageLightHover(o){if(o)return this._combineColors((0,u.hexToRGBA)(o,1),(0,u.hexToRGBA)("#FFFFFF",.6))}getStageDarkHover(o){if(o)return(0,u.hexToDarkerRGB)(o,.25)}static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275prov=w.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"})}}class C{getEntityStageSchemaByFilteredColumnValue(o,e){return o.find(r=>{if(!r.isActive||!r.isActiveVersion)return null;if(!r.filters)return r;const l=JSON.parse(r.filters),n=Object.values(l.items)[0];if(n.comparisonType===c.ComparisonType.Equal)return(n.rightExpressions||[]).map(s=>s?.parameter?.value?.value).filter(s=>!!s).includes(e)?r:null;if(n.comparisonType===c.ComparisonType.Is_null&&!e)return r})}static{this.\u0275fac=function(e){return new(e||C)}}static{this.\u0275prov=w.\u0275\u0275defineInjectable({token:C,factory:C.\u0275fac,providedIn:"root"})}}let i=class{convert(o,e,r){var l=this;return(0,E.A)(function*(){if(!r)return null;const n=yield l._getTargetDCMSchemaData(r.schemas,r.filterColumnAttributePath,e),D=r.schemasData.find(t=>t.name===n?.name);return l._getSliderCellModel(o,D)})()}_getTargetDCMSchemaData(o,e,r){return(0,E.A)(function*(){const l=new C,n=yield r[e];return l.getEntityStageSchemaByFilteredColumnValue(o,n?.value)})()}_getSliderCellModel(o,e){if(!e||!o)return{color:"",value:0};const r=e.stages.filter(t=>!t.parentStageUId);let l=r.find(t=>t.stageRecordId===o.value),n=r.indexOf(l);if(n===-1){const t=e.stages.find(s=>s.stageRecordId===o.value);t&&(n=r.findIndex(s=>s.uId===t.parentStageUId),l=t)}const D=(n+1)*100/r.length;return{color:l?.color,value:D}}};i=(0,p.__decorate)([(0,c.CrtConverter)({type:"crt.ToEntityStageDataTableSliderConverterAsync"})],i)},73308:(g,f,d)=>{d.d(f,{A:()=>p});function E(c,u,w,a,C,i,F){try{var o=c[i](F),e=o.value}catch(r){w(r);return}o.done?u(e):Promise.resolve(e).then(a,C)}function p(c){return function(){var u=this,w=arguments;return new Promise(function(a,C){var i=c.apply(u,w);function F(e){E(i,a,C,F,o,"next",e)}function o(e){E(i,a,C,F,o,"throw",e)}F(void 0)})}}}}]);
