(self.webpackChunkapp_studio_enterprise_schema_view=self.webpackChunkapp_studio_enterprise_schema_view||[]).push([[33707],{33707:(f,de,l)=>{l.r(de),l.d(de,{CONVERSATION_RESET_EVENT:()=>R,ChatMessageActionHandler:()=>k,ChatMessageActionRequest:()=>oe,ChatMessageTypeRegisterServiceMock:()=>ue,ConversationEvent:()=>be,CrtChatDisclaimerComponent:()=>E,CrtChatMessagesComponent:()=>v,CrtChatPanelModule:()=>F,CrtChatTypingComponent:()=>S,CrtConversationComponent:()=>m,CrtMessageEditorComponent:()=>I,CrtMessageEditorInputComponent:()=>_,CrtMessageEditorReplyComponent:()=>P,LoadConversationHandler:()=>L,LoadConversationModeEnum:()=>O,LoadConversationRequest:()=>se,MessageEditorPreprocessor:()=>x,MessageEditorSendHandler:()=>Y,MessageEditorSendRequest:()=>ne,providersMock:()=>Mt});var a=l(5960),e=l(59131),i=l(38495);const ye=["messages"],fe=[[["",8,"messages-header"]]],Me=[".messages-header"];function ve(s,t){}class v{get _lastAuthor(){return this._renderedMessages.length===0?this._lastMessageAuthor:this._renderedMessages[this._renderedMessages.length-1]?.author?.name??null}set messages(t){if(!t)return;const n=this._processMessages(t),o=this._filterNewMessages(n);this._addNewMessages(o),this._renderedMessages=[...this._renderedMessages,...o]}constructor(t){this._renderer=t,this._renderedMessages=[],this._lastMessageAuthor=null,this._messagesCounter=0,this._lastMessageDirections=null,this._isRendering=!1,this.messagePositionAttributeName="chat-message-position"}_getParentContainer(){return this.messagesContainer.nativeElement.parentElement}_addNewMessages(t){t.forEach(n=>{this._messagesCounter++;const o=i.ChatMessageTypeRegistry.getSelector(n.type),r=this._renderer.createElement(o);this._lastMessageDirections!==n.direction&&(r.classList.add("message-group-starter"),this._lastMessageDirections=n.direction),this._renderer.setProperty(r,"message",n),this._renderer.setAttribute(r,this.messagePositionAttributeName,`${this._messagesCounter}`),this._renderer.appendChild(this._getParentContainer(),r)})}_filterNewMessages(t){return t.filter(n=>!this._renderedMessages.some(o=>o.id===n.id))}_processMessages(t){return t.map(n=>n.author?.name!==this._lastAuthor?(this._lastMessageAuthor=n.author?.name,n):{...n,author:null})}rerenderMessages(t){!t||this._isRendering||this._getParentContainer()?.childElementCount>0||(this._isRendering=!0,this.reset(),this._addNewMessages(t),this._isRendering=!1)}reset(){this._messagesCounter=0,this._renderedMessages=[];const t=this._getParentContainer();Array.from(t?.children||[]).forEach(o=>{this._renderer.removeChild(t,o)})}static{this.\u0275fac=function(n){return new(n||v)(e.\u0275\u0275directiveInject(e.Renderer2))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:v,selectors:[["crt-chat-messages"]],viewQuery:function(n,o){if(n&1&&e.\u0275\u0275viewQuery(ye,7,e.ElementRef),n&2){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(o.messagesContainer=r.first)}},inputs:{messages:"messages"},ngContentSelectors:Me,decls:6,vars:0,consts:[["messages",""],[1,"wrapper"],[1,"header-container"],[1,"messages-container"]],template:function(n,o){n&1&&(e.\u0275\u0275projectionDef(fe),e.\u0275\u0275elementStart(0,"div",1)(1,"div",2),e.\u0275\u0275projection(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275template(4,ve,0,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()())}})}}(0,a.__decorate)([(0,i.CrtInput)(),(0,a.__metadata)("design:type",Array),(0,a.__metadata)("design:paramtypes",[Array])],v.prototype,"messages",null);var A=l(50456),C=l(40297),p=l(20822),h=l(59564);function Ee(s,t){if(s&1&&e.\u0275\u0275element(0,"crt-image-input",10),s&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("value",n.author.photo)("placeholder",n.author.name)}}function Se(s,t){if(s&1&&(e.\u0275\u0275elementStart(0,"div",7),e.\u0275\u0275template(1,Ee,1,2,"crt-image-input",8),e.\u0275\u0275element(2,"crt-label",9),e.\u0275\u0275elementEnd()),s&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",n.shouldShowImage),e.\u0275\u0275advance(),e.\u0275\u0275property("caption",n.author.name)}}let S=class ae{constructor(){this.ignoredAuthors=["Creatio.ai"]}get shouldShowImage(){return!!(this.author&&!this.ignoredAuthors.includes(this.author.name))}_initAnimation(){this.typingAnimation={animationData:()=>l.e(37228).then(l.t.bind(l,37228,19)),autoplay:!0,loop:!0}}ngOnInit(){this._initAnimation()}static{this.\u0275fac=function(n){return new(n||ae)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:ae,selectors:[["crt-chat-typing"]],inputs:{author:"author",message:"message"},decls:7,vars:3,consts:[[1,"typing"],["class","author",4,"ngIf"],[1,"typing-message"],[1,"animation"],["width","16px","height","16px",3,"config"],[1,"text"],["labelColor","var(--crt-palette-label-500)","labelType","caption","labelFontSize","10px",1,"typing-text",3,"caption"],[1,"author"],["readonly","true","class","author-image","placeholderMode","abbreviation","borderRadius","large","positioning","cover","size","extra-small",3,"value","placeholder",4,"ngIf"],["labelColor","var(--crt-palette-label-500)","labelType","caption","labelFontSize","12px",1,"author-text",3,"caption"],["readonly","true","placeholderMode","abbreviation","borderRadius","large","positioning","cover","size","extra-small",1,"author-image",3,"value","placeholder"]],template:function(n,o){n&1&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,Se,3,2,"div",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3),e.\u0275\u0275element(4,"crt-lottie",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",5),e.\u0275\u0275element(6,"crt-label",6),e.\u0275\u0275elementEnd()()()),n&2&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.author),e.\u0275\u0275advance(3),e.\u0275\u0275property("config",o.typingAnimation),e.\u0275\u0275advance(2),e.\u0275\u0275property("caption",o.message))},dependencies:[C.NgIf,p.CrtLabelComponent,p.CrtImageInputComponent,h.CrtLottieComponent],styles:[".author[_ngcontent-%COMP%], .typing-message[_ngcontent-%COMP%]{display:flex;gap:8px;margin:10px 0}"]})}};(0,a.__decorate)([(0,i.CrtInput)(),(0,a.__metadata)("design:type",A.Contact)],S.prototype,"author",void 0),(0,a.__decorate)([(0,i.CrtInput)(),(0,a.__metadata)("design:type",String)],S.prototype,"message",void 0),S=(0,a.__decorate)([(0,i.CrtViewElement)({type:"crt.ChatTyping",reuseStrategy:i.ViewElementReuseStrategy.Reuse})],S);var pe=l(10710),g=l(21018);class be{}const R="reset";var O;(function(s){s.Replace="replace",s.Append="append"})(O||(O={}));var Z=l(52989);const Ie=()=>[1,2,3,4],Oe=(s,t)=>({right:s,left:t}),Te=()=>({width:"40%",height:"12px",padding:"4px, 8px","border-radius":"8px"}),Pe=()=>({width:"60%",height:"56px",padding:"4px, 8px","border-radius":"8px"});function De(s,t){if(s&1&&(e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275element(1,"crt-skeleton-loader",3)(2,"crt-skeleton-loader",4),e.\u0275\u0275elementEnd()),s&2){const n=t.index;e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(3,Oe,(n+1)%2===0,(n+1)%2!==0)),e.\u0275\u0275advance(),e.\u0275\u0275property("styles",e.\u0275\u0275pureFunction0(6,Te)),e.\u0275\u0275advance(),e.\u0275\u0275property("styles",e.\u0275\u0275pureFunction0(7,Pe))}}class w{constructor(){}static{this.\u0275fac=function(n){return new(n||w)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:w,selectors:[["crt-conversation-skeleton"]],decls:2,vars:2,consts:[[1,"conversation-skeleton-container"],["class","item-skeleton",3,"ngClass",4,"ngFor","ngForOf"],[1,"item-skeleton",3,"ngClass"],["appearance","line","count","1",1,"caption",3,"styles"],["appearance","line","count","1",1,"content",3,"styles"]],template:function(n,o){n&1&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,De,3,8,"div",1),e.\u0275\u0275elementEnd()),n&2&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pureFunction0(1,Ie)))},dependencies:[C.NgClass,C.NgForOf,h.SkeletonLoaderComponent],styles:[".conversation-skeleton-container[_ngcontent-%COMP%]{max-width:840px}.conversation-skeleton-container[_ngcontent-%COMP%]   .item-skeleton[_ngcontent-%COMP%]{margin:16px 8px 0}.conversation-skeleton-container[_ngcontent-%COMP%]   .item-skeleton.right[_ngcontent-%COMP%]{text-align:right}.conversation-skeleton-container[_ngcontent-%COMP%]   .item-skeleton.left[_ngcontent-%COMP%]{text-align:left}"]})}}var b=l(79772);const xe=["typing"],Ae=["contentWrap"],we=[[["","actions",""]],[["","information",""]],[["","placeholder",""]],[["","tools",""]],[["","typing",""]]],Ne=["[actions]","[information]","[placeholder]","[tools]","[typing]"];function Be(s,t){if(s&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"crt-button",11),e.\u0275\u0275listener("clicked",function(){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.onLoadPreviousMessagesClicked())}),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()}s&2&&(e.\u0275\u0275property("size","medium"),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,2,"Conversation.LoadPreviousChat")))}function Fe(s,t){s&1&&(e.\u0275\u0275elementStart(0,"div",12,2),e.\u0275\u0275projection(2,4),e.\u0275\u0275elementEnd())}function Re(s,t){if(s&1&&(e.\u0275\u0275elementStart(0,"span",17),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),s&2){const n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(n.unreadMessages>9?"9+":n.unreadMessages)}}function je(s,t){if(s&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",13),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.scrollToLastMessage())}),e.\u0275\u0275template(1,Re,2,1,"span",14),e.\u0275\u0275elementStart(2,"div",15),e.\u0275\u0275element(3,"mat-icon",16),e.\u0275\u0275elementEnd()()}if(s&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",n.unreadMessages>0)}}function ke(s,t){if(s&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",4),e.\u0275\u0275projection(2),e.\u0275\u0275projection(3,1),e.\u0275\u0275elementStart(4,"div",5,1),e.\u0275\u0275template(6,Be,3,4,"crt-button",6),e.\u0275\u0275elementStart(7,"crt-chat-messages",7),e.\u0275\u0275projection(8,2,[1,"messages-header"]),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,Fe,3,0,"div",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,je,4,1,"div",9),e.\u0275\u0275elementStart(11,"div",10),e.\u0275\u0275projection(12,3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),s&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",n.hasPreviousMessages),e.\u0275\u0275advance(),e.\u0275\u0275property("messages",n.messages),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.isTyping),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",n.isScrolledUp)}}function Le(s,t){s&1&&e.\u0275\u0275element(0,"crt-conversation-skeleton")}let m=class re extends A.BaseContainerComponent{get _messagesContainer(){return this._chatMessagesComponent?.messagesContainer?.nativeElement?.parentElement}set conversationEvent(t){t?.forEach(n=>{n.name===R&&(this._chatMessagesComponent.reset(),this.isScrolledUp=!1,this.unreadMessages=0)}),t?.length&&this.conversationEventChange.emit([])}constructor(t){super(t),this.injector=t,this._scrollOnOpen=!0,this.unreadMessages=0,this.isScrolledUp=!1,this.actions=[],this.information=[],this.tools=[],this.placeholder=[],this.disableAutoScroll=!1,this.typing=[],this.messages=[],this.hasPreviousMessages=!1,this.isTyping=!1,this.conversationEventChange=new e.EventEmitter,this.paginationChange=new e.EventEmitter,this.loadPreviousMessages=new e.EventEmitter,this._observeLastVisibleMessageElement=()=>{const n=this._messagesContainer.querySelectorAll(`[${this._chatMessagesComponent.messagePositionAttributeName}]`),o=n.length,r=this._getLastVisibleMessageElement(n),c=r?parseInt(r.getAttribute(this._chatMessagesComponent.messagePositionAttributeName)):0;this.isScrolledUp=c<o,this.unreadMessages=Math.min(o-c,this.unreadMessages||0),this.changeDetectorRef.detectChanges()}}_scrollToBottom(t=!1){!this.isScrolledUp&&(!this.disableAutoScroll||t)&&setTimeout(()=>{(this._typingContainer?.nativeElement||this._messagesContainer?.lastChild)?.scrollIntoView?.({block:"nearest"}),this.isScrolledUp=!1},0)}_resetScroll(){this.isScrolledUp=!1,this._scrollOnOpen=!0,this._observer?.disconnect()}_startObserve(t,n){t&&(this._stopObserve(t),this._observer=new IntersectionObserver(o=>n(o.filter(r=>r.target===t),t)),this._observer.observe(t))}_stopObserve(t){this._observer&&this._observer.unobserve(t)}_observeMessages(){this._messagesContainer&&new MutationObserver(n=>{for(const o of n)o.type==="childList"&&o.addedNodes.forEach(r=>{r.nodeType===Node.ELEMENT_NODE&&this._processLastElement(r)})}).observe(this._messagesContainer,{childList:!0,subtree:!1})}_processLastElement(t){t?.message?.direction===pe.MessageDirection.Outcoming?(this.isScrolledUp=!1,this._scrollToBottom()):this.isScrolledUp&&(this.unreadMessages=(this.unreadMessages||0)+1,this.changeDetectorRef.detectChanges()),this.isScrolledUp||(this._observer?.disconnect(),this._startObserve(t,n=>{n.forEach(o=>{this.isScrolledUp=!o.isIntersecting,this.changeDetectorRef.detectChanges()})}))}_getLastVisibleMessageElement(t){const n=this._contentWrap.nativeElement;let o=null;return t.forEach(r=>{if(r instanceof HTMLElement){const c=r.getBoundingClientRect(),u=n.getBoundingClientRect();c.top<u.bottom&&c.bottom>u.top&&(o=r)}}),o}ngAfterViewInit(){super.ngAfterViewInit(),this._observeMessages(),this._contentWrap?.nativeElement?.addEventListener?.("scroll",this._observeLastVisibleMessageElement)}ngAfterViewChecked(){this.elementRef.nativeElement?.checkVisibility?.()?this._scrollOnOpen&&(this._scrollToBottom(),this._scrollOnOpen=!1):this._resetScroll(),this._chatMessagesComponent?.rerenderMessages(this.messages)}ngOnChanges(){this.isScrolledUp||this._scrollToBottom()}ngOnDestroy(){super.ngOnDestroy(),this._contentWrap?.nativeElement?.removeEventListener?.("scroll",this._observeLastVisibleMessageElement)}scrollToLastMessage(){this.isScrolledUp=!1,this._scrollToBottom(!0)}onLoadPreviousMessagesClicked(){this.loadPreviousMessages.emit()}static{this.\u0275fac=function(n){return new(n||re)(e.\u0275\u0275directiveInject(e.Injector))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:re,selectors:[["crt-conversation"]],viewQuery:function(n,o){if(n&1&&(e.\u0275\u0275viewQuery(v,5),e.\u0275\u0275viewQuery(xe,5,e.ElementRef),e.\u0275\u0275viewQuery(Ae,5,e.ElementRef)),n&2){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(o._chatMessagesComponent=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(o._typingContainer=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(o._contentWrap=r.first)}},inputs:{actions:"actions",information:"information",tools:"tools",placeholder:"placeholder",disableAutoScroll:"disableAutoScroll",typing:"typing",conversationEvent:"conversationEvent",messages:"messages",hasPreviousMessages:"hasPreviousMessages",isTyping:"isTyping"},outputs:{conversationEventChange:"conversationEventChange",paginationChange:"paginationChange",loadPreviousMessages:"loadPreviousMessages"},features:[e.\u0275\u0275InheritDefinitionFeature,e.\u0275\u0275NgOnChangesFeature],ngContentSelectors:Ne,decls:3,vars:2,consts:[["skeleton",""],["contentWrap",""],["typing",""],[4,"ngIf","ngIfElse"],[1,"conversation-container"],[1,"chat-panel-content-wrap"],["class","load-previous-messages","color","outline",3,"size","clicked",4,"ngIf"],[3,"messages"],["class","typing",4,"ngIf"],["class","scroll-to-bottom",3,"click",4,"ngIf"],[1,"tools"],["color","outline",1,"load-previous-messages",3,"clicked","size"],[1,"typing"],[1,"scroll-to-bottom",3,"click"],["class","unread-messages",4,"ngIf"],[1,"arrow-wrap"],["svgIcon","arrow-down-heavy"],[1,"unread-messages"]],template:function(n,o){if(n&1&&(e.\u0275\u0275projectionDef(we),e.\u0275\u0275template(0,ke,13,4,"ng-container",3)(1,Le,1,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)),n&2){const r=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",!o.loading)("ngIfElse",r)}},dependencies:[Z.MatIcon,C.NgIf,p.CrtButtonComponent,v,w,b.TranslatePipe],styles:[".chat-panel-content-wrap[_ngcontent-%COMP%]{flex:1 1 auto;overflow-y:auto;box-sizing:border-box;overflow-x:hidden}.chat-panel-content-wrap[_ngcontent-%COMP%]   crt-button.load-previous-messages[_ngcontent-%COMP%]{display:block;margin:8px auto 16px}.conversation-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;max-width:840px}.conversation-container[_ngcontent-%COMP%]   .scroll-to-bottom[_ngcontent-%COMP%]{position:sticky;margin-left:auto;margin-right:auto;transform:translate(-50%);bottom:4px;display:inline-flex;flex-direction:column;align-items:center;border-radius:16px}.conversation-container[_ngcontent-%COMP%]   .scroll-to-bottom[_ngcontent-%COMP%]   .unread-messages[_ngcontent-%COMP%]{position:fixed;min-width:8px;height:16px;top:-8px;left:-4px;border-radius:8px;padding:0 4px;text-align:center;direction:ltr}.conversation-container[_ngcontent-%COMP%]   .scroll-to-bottom[_ngcontent-%COMP%]   .arrow-wrap[_ngcontent-%COMP%]{width:32px;height:32px;cursor:pointer;display:flex;align-items:center;justify-content:center}.conversation-container[_ngcontent-%COMP%]   .scroll-to-bottom[_ngcontent-%COMP%]   .arrow-wrap[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:16px;height:16px}.tools[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;padding-top:10px;padding-bottom:10px}[_nghost-%COMP%]{display:block;height:100%}[dir=rtl][_ngcontent-%COMP%]   .scroll-to-bottom[_ngcontent-%COMP%]   .unread-messages[_ngcontent-%COMP%]{left:unset;right:-4px}"]})}};(0,a.__decorate)([(0,i.CrtInput)(),(0,a.__metadata)("design:type",Array)],m.prototype,"actions",void 0),(0,a.__decorate)([(0,i.CrtInput)(),(0,a.__metadata)("design:type",Array)],m.prototype,"information",void 0),(0,a.__decorate)([(0,i.CrtInput)(),(0,a.__metadata)("design:type",Array)],m.prototype,"tools",void 0),(0,a.__decorate)([(0,i.CrtInput)(),(0,a.__metadata)("design:type",Array)],m.prototype,"placeholder",void 0),(0,a.__decorate)([(0,i.CrtInput)(),(0,a.__metadata)("design:type",Object)],m.prototype,"disableAutoScroll",void 0),(0,a.__decorate)([(0,i.CrtInput)(),(0,a.__metadata)("design:type",Array)],m.prototype,"typing",void 0),(0,a.__decorate)([(0,i.CrtInput)(),(0,a.__metadata)("design:type",Array),(0,a.__metadata)("design:paramtypes",[Array])],m.prototype,"conversationEvent",null),(0,a.__decorate)([(0,i.CrtInput)(),(0,a.__metadata)("design:type",Array)],m.prototype,"messages",void 0),(0,a.__decorate)([(0,i.CrtInput)(),(0,a.__metadata)("design:type",Object)],m.prototype,"hasPreviousMessages",void 0),(0,a.__decorate)([(0,i.CrtInput)(),(0,a.__metadata)("design:type",Object)],m.prototype,"isTyping",void 0),(0,a.__decorate)([(0,i.CrtOutput)(),(0,a.__metadata)("design:type",Object)],m.prototype,"conversationEventChange",void 0),(0,a.__decorate)([(0,i.CrtOutput)(),(0,a.__metadata)("design:type",Object)],m.prototype,"paginationChange",void 0),(0,a.__decorate)([(0,i.CrtOutput)(),(0,a.__metadata)("design:type",Object)],m.prototype,"loadPreviousMessages",void 0),m=(0,a.__decorate)([(0,i.CrtViewElement)({type:"crt.Conversation",contentSlots:["actions","information","typing","tools","placeholder"]}),(0,i.CrtInterfaceDesignerItem)({toolbarConfig:{requiredFeatures:{ShowDesignerDemoItems:!0},position:110,groupType:i.DesignerToolGroupType.Components,icon:l(70807),defaultPropertyValues:{actions:[],information:[],messages:[],tools:[{name:"MessageEditor_"+g.GENERATE_GUID_MACRO,type:"crt.MessageEditor",items:[{name:"MessageEditorBody_"+g.GENERATE_GUID_MACRO,type:"crt.MessageEditorBody",inputs:[{name:"MessageEditorInput_"+g.GENERATE_GUID_MACRO,type:"crt.MessageEditorInput"}]}]}],placeholder:[],typing:[]},addCommandTypeName:"crt.AddConversationCommand"},designControlConfig:{allowDesignContent:!0},propertiesPanelComponentTypeName:"crt.ConversationPropertiesPanel",viewElementGroupType:i.ViewElementGroupType.LayoutElements,typeCaption:"Conversation.Caption",placeholderSize:{height:"1000px"}}),(0,a.__metadata)("design:paramtypes",[e.Injector])],m);var T=l(47742);let P=class J extends T.CrtBaseComponent{static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=e.\u0275\u0275getInheritedFactory(J)))(o||J)}})()}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:J,selectors:[["crt-message-editor-reply"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(n,o){}})}};P=(0,a.__decorate)([(0,i.CrtViewElement)({type:"crt.MessageEditorReply"})],P);const Ve=["items"];function He(s,t){s&1&&e.\u0275\u0275elementContainer(0)}function ze(s,t){if(s&1&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,He,1,0,"ng-container",3),e.\u0275\u0275elementEnd()),s&2){const n=t.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",n)}}function Ue(s,t){if(s&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,ze,2,1,"div",2),e.\u0275\u0275elementContainerEnd()),s&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",n.itemsTemplates)}}let I=class K extends T.CrtBaseComponent{set items(t){this._items=t}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=e.\u0275\u0275getInheritedFactory(K)))(o||K)}})()}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:K,selectors:[["crt-message-editor"]],contentQueries:function(n,o,r){if(n&1&&e.\u0275\u0275contentQuery(r,Ve,4,e.TemplateRef),n&2){let c;e.\u0275\u0275queryRefresh(c=e.\u0275\u0275loadQuery())&&(o.itemsTemplates=c)}},inputs:{items:"items"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:3,vars:1,consts:[[1,"message-editor"],[4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet"]],template:function(n,o){n&1&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"crt-message-editor-reply"),e.\u0275\u0275template(2,Ue,2,1,"ng-container",1),e.\u0275\u0275elementEnd()),n&2&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.itemsTemplates==null?null:o.itemsTemplates.length))},dependencies:[C.NgForOf,C.NgIf,C.NgTemplateOutlet,P],styles:["[_nghost-%COMP%]{width:100%}"]})}};(0,a.__decorate)([(0,i.CrtInput)(),(0,a.__metadata)("design:type",Array),(0,a.__metadata)("design:paramtypes",[Array])],I.prototype,"items",null),I=(0,a.__decorate)([(0,i.CrtViewElement)({type:"crt.MessageEditor",reuseStrategy:i.ViewElementReuseStrategy.Reuse,contentSlots:[{name:"items",lazy:!0,input:!0}]}),(0,i.CrtInterfaceDesignerItem)({propertiesPanelComponentTypeName:"crt.MessageEditorPropertiesPanel",viewElementGroupType:i.ViewElementGroupType.Components,typeCaption:"MessageEditor.Caption"})],I);var W=l(56711),j=l(28399);const Ge=["crtInput"],Je=s=>({"message-editor-input-focused":s});let _=class Q extends T.CrtBaseComponent{constructor(){super(...arguments),this._publishMessageHotKeys=["Enter"],this._publishKeyboardAction="publishMessage",this.sendHotkeyPressed=new e.EventEmitter,this.keyboardHotkeysMap={keydown:{[this._publishKeyboardAction]:{sequence:this._publishMessageHotKeys}}},this.messageFormControl=new W.FormControl(""),this.chatInputChange=new e.EventEmitter,this.isFocusedChange=new e.EventEmitter,this.sendMessage=new e.EventEmitter}set chatInput(t){t!==this.messageFormControl?.value&&this.messageFormControl?.setValue(t)}_setIsFocused(t){this.isFocused=t,this.isFocusedChange.emit(t)}onBlur(){this._setIsFocused(!1)}ngOnInit(){this.messageFormControl?.valueChanges.subscribe(t=>{this.onInputContentChanged(t)})}onMessageEditorAreaClicked(){this.isFocused||(this._setIsFocused(!0),this.crtInput?.focus())}onInputContentChanged(t){t!==this.chatInput&&(this.chatInput=t,this.chatInputChange.emit(t))}onHotKeyPressed({action:t,event:n}){n.shiftKey===!1&&t===this._publishKeyboardAction&&(n.preventDefault(),(0,j.isEmpty)(this.messageFormControl?.value)||this.sendMessage.emit())}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=e.\u0275\u0275getInheritedFactory(Q)))(o||Q)}})()}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Q,selectors:[["crt-message-editor-input"]],viewQuery:function(n,o){if(n&1&&e.\u0275\u0275viewQuery(Ge,5),n&2){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(o.crtInput=r.first)}},inputs:{chatInput:"chatInput",isFocused:"isFocused"},outputs:{sendHotkeyPressed:"sendHotkeyPressed",chatInputChange:"chatInputChange",isFocusedChange:"isFocusedChange",sendMessage:"sendMessage"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:4,vars:10,consts:[["crtInput",""],[1,"message-editor-input",3,"click"],[3,"focusout","crtKeyboardHotkeyPressed","ngClass","control","labelPosition","multiline","placeholder","crtKeyboardHotkeys"]],template:function(n,o){if(n&1){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",1),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(o.onMessageEditorAreaClicked())}),e.\u0275\u0275elementStart(1,"crt-input",2,0),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275listener("focusout",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(o.onBlur())})("crtKeyboardHotkeyPressed",function(u){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(o.onHotKeyPressed(u))}),e.\u0275\u0275elementEnd()()}n&2&&(e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(3,6,"MessageEditor.InputPlaceholder")),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(8,Je,o.isFocused===!0))("control",o.messageFormControl)("labelPosition","hidden")("multiline",!0)("crtKeyboardHotkeys",o.keyboardHotkeysMap))},dependencies:[C.NgClass,p.CrtInputComponent,h.CrtKeyboardHotkeysDirective,b.TranslatePipe],styles:[".message-editor-input[_ngcontent-%COMP%]{display:flex;min-height:80px;max-height:147px}.message-editor-input[_ngcontent-%COMP%]   crt-input[_ngcontent-%COMP%]{flex:1;border:1px solid var(--crt-palette-border-900);border-radius:8px;overflow-y:scroll}.message-editor-input[_ngcontent-%COMP%]   crt-input.message-editor-input-focused[_ngcontent-%COMP%], .message-editor-input[_ngcontent-%COMP%]   crt-input[_ngcontent-%COMP%]:hover{border:1px solid var(--crt-palette-primary-800)}"]})}};(0,a.__decorate)([(0,i.CrtInput)(),(0,a.__metadata)("design:type",String),(0,a.__metadata)("design:paramtypes",[String])],_.prototype,"chatInput",null),(0,a.__decorate)([(0,i.CrtOutput)(),(0,a.__metadata)("design:type",e.EventEmitter)],_.prototype,"chatInputChange",void 0),(0,a.__decorate)([(0,i.CrtOutput)(),(0,a.__metadata)("design:type",e.EventEmitter)],_.prototype,"isFocusedChange",void 0),(0,a.__decorate)([(0,i.CrtOutput)(),(0,a.__metadata)("design:type",Object)],_.prototype,"sendMessage",void 0),(0,a.__decorate)([(0,i.CrtInput)(),(0,a.__metadata)("design:type",Boolean)],_.prototype,"isFocused",void 0),_=(0,a.__decorate)([(0,i.CrtViewElement)({type:"crt.MessageEditorInput"})],_);var Ke=l(71252);let E=class ie extends A.BaseContainerComponent{set caption(t){this._consentText=t}get caption(){return this._sanitizer.bypassSecurityTrustHtml(this._consentText)}constructor(t){super(t),this.acceptClicked=new e.EventEmitter,this._sanitizer=t.get(Ke.DomSanitizer)}agreeClicked(){this.acceptClicked.emit()}static{this.\u0275fac=function(n){return new(n||ie)(e.\u0275\u0275directiveInject(e.Injector))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:ie,selectors:[["crt-chat-disclaimer"]],inputs:{consentCode:"consentCode",caption:"caption"},outputs:{acceptClicked:"acceptClicked"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:5,vars:4,consts:[[1,"outer-border"],[1,"disclaimer-message",3,"innerHTML"],["color","primary","size","large","data-qa","button-disclaimer-agree",1,"agree-button",3,"clicked"]],template:function(n,o){n&1&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"span",1),e.\u0275\u0275elementStart(2,"crt-button",2),e.\u0275\u0275listener("clicked",function(){return o.agreeClicked()}),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()()),n&2&&(e.\u0275\u0275advance(),e.\u0275\u0275property("innerHTML",o.caption,e.\u0275\u0275sanitizeHtml),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,2,"CopilotDisclaimer.AgreeButton")," "))},dependencies:[p.CrtButtonComponent,b.TranslatePipe],styles:['.outer-border[_ngcontent-%COMP%]{position:relative;display:inline-block;padding:12px 16px;background:linear-gradient(90deg,#fafbfe,#fcfafe);border-radius:15px;border-width:1px;z-index:1}.outer-border[_ngcontent-%COMP%]   .agree-button[_ngcontent-%COMP%]{padding-top:8px;float:inline-end}.outer-border[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;z-index:-1;background:linear-gradient(90deg,#c4bdff,#ecb5ff);border-radius:16px}.outer-border[_ngcontent-%COMP%]:after{background:linear-gradient(90deg,#fafbfe,#fcfafe);content:"";position:absolute;inset:1px;border-radius:15px;z-index:-1}.disclaimer-message[_ngcontent-%COMP%]{display:block}']})}};(0,a.__decorate)([(0,i.CrtInput)(),(0,a.__metadata)("design:type",String)],E.prototype,"consentCode",void 0),(0,a.__decorate)([(0,i.CrtOutput)(),(0,a.__metadata)("design:type",Object)],E.prototype,"acceptClicked",void 0),(0,a.__decorate)([(0,i.CrtInput)(),(0,a.__metadata)("design:type",String),(0,a.__metadata)("design:paramtypes",[String])],E.prototype,"caption",null),E=(0,a.__decorate)([(0,i.CrtViewElement)({type:"crt.ChatDisclaimer",reuseStrategy:i.ViewElementReuseStrategy.Reuse}),(0,a.__metadata)("design:paramtypes",[e.Injector])],E);var N=l(73308);let Y=class extends i.BaseRequestHandler{handle(t){var n=this;return(0,N.A)(function*(){yield n.next?.handle(t)})()}};Y=(0,a.__decorate)([(0,i.CrtRequestHandler)({type:"crt.MessageEditorSendHandler",requestType:"crt.MessageEditorSendRequest"})],Y);let k=class extends i.BaseRequestHandler{constructor(t){super(),this._sanitizeHtmlPipe=t.get(g.SanitizeHtmlPipe),this._copilotToEditorCommunicationService=t.get(g.CopilotToEditorCommunicationService)}handle(t){var n=this;return(0,N.A)(function*(){const o=n._sanitizeHtmlPipe.transform(t.message.text,{mode:"textOnly",dataType:i.DataValueType.MAXSIZE_TEXT});n._copilotToEditorCommunicationService.notify({editorAction:t.action,selection:o}),yield n.next?.handle(t)})()}};k=(0,a.__decorate)([(0,i.CrtRequestHandler)({type:"crt.ChatMessageActionHandler",requestType:"crt.ChatMessageActionRequest"}),(0,a.__metadata)("design:paramtypes",[e.Injector])],k);var d=l(62278);let L=class extends i.BaseRequestHandler{constructor(t,n,o){super(),this._userInfo=t,this._omniChatService=n,this._translateService=o}_getUserLocalDate(t){return(0,g.setTimeZoneOffset)(t,this._userInfo.timeZoneOffsetHours),t}_getConvertedMessages(t){return t.map(n=>({attachments:n.attachments,macrosTemplate:n.macrosTemplate,id:n.id,author:n.author,date:this._getUserLocalDate(n.time),direction:n.direction,isBotMessage:n.isBotMessage,text:n.text,type:p.ChatMessageTypeMapping.get(n.type)}))}_getChatMessages(t){var n=this;return(0,N.A)(function*(){return n._getConvertedMessages(yield(0,d.lastValueFrom)(n._omniChatService.getConversation(t)))})()}_addChatStartedMessage(t){const n=t.find(r=>r.type!==p.ChatMessageTypeEnum.System),o={id:(0,i.generateGuid)(),type:p.ChatMessageTypeEnum.System,date:n.date,macrosTemplate:{template:this._translateService.instant("ChatMessage.System.ChatStartedMessage"),tokens:[{key:"chatStartedAt",type:"datetime",value:n.date.toString()},{key:"chatStartedBy",type:"lookup",value:{entitySchemaName:"Contact",primaryColumnValue:n.author.id,caption:n.author.name}},{key:"icon",type:"icon",value:"flag-icon"}]}};return t.unshift(o),o.id}_addDateChangedDividers(t,n){if(t.length===0)return;const o=JSON.stringify({type:p.ChatMessageTypeEnum.System,date:null,macrosTemplate:{template:"{dateHeader}",tokens:[{key:"icon",type:"icon",value:"date-time"}]}});let r=this._getDatePart(t[t.length-1].date);for(let c=t.length-1;c>=0;c--)if((c===0||this._getDatePart(t[c].date)!==r)&&t[c].id!==n){const u=JSON.parse(o);u.date=new Date(r),u.macrosTemplate.tokens.push({key:"dateHeader",type:"date",value:r}),t.splice(c===0?0:c+1,0,u),r=this._getDatePart(t[c].date)}}_getDatePart(t){return t.toISOString().split("T")[0]}handle(t){var n=this;return(0,N.A)(function*(){yield n.next?.handle(t);const o=t.$context;if(!o[`${t.chatMessagesAttributeName}`])return;const r=t.chatId,c=t.loadMode;let u,U,y,G;switch(c){case O.Append:y=yield o[`${t.previousChatIdAttributeName}`],u=yield n._getChatMessages(y),G=n._addChatStartedMessage(u),n._addDateChangedDividers(u,G),U=yield o[`${t.chatMessagesAttributeName}`],o.ConversationEvent=[{name:R}],o[`${t.chatMessagesAttributeName}`]=u.concat(U),y=yield(0,d.lastValueFrom)(n._omniChatService.getPreviousChatId(y)),o[`${t.previousChatIdAttributeName}`]=y===i.EMPTY_GUID?null:y;return;case O.Replace:default:u=yield n._getChatMessages(r),o.ChatId=r,o.ConversationEvent=[{name:R}],G=n._addChatStartedMessage(u),n._addDateChangedDividers(u,G),o[`${t.chatMessagesAttributeName}`]=u,t.previousChatIdAttributeName&&(y=yield(0,d.lastValueFrom)(n._omniChatService.getPreviousChatId(r)),o[`${t.previousChatIdAttributeName}`]=y===i.EMPTY_GUID?null:y);return}})()}};L=(0,a.__decorate)([(0,i.CrtRequestHandler)({type:"crt.LoadConversationHandler",requestType:"crt.LoadConversationRequest"}),(0,a.__metadata)("design:paramtypes",[g.UserInfo,pe.OmnichannelChatService,b.TranslateService])],L);var V=l(96590);class ue{static{this._selectorCounter=0}static getProvider(){return{provide:p.ChatMessageTypeRegisterService,useFactory:(t,n)=>{for(const o of t){let{selector:r}=(0,e.reflectComponentType)(o.componentType);r=r+this._selectorCounter++,n.defineComponent(r,o.componentType),i.ChatMessageTypeRegistry.register(o.messageType,r)}},deps:[p.CRT_CHAT_MESSAGE_TYPE,V.CustomElementsBootstrapService]}}}var X=l(53035),Qe=l(32740);class $e{constructor(t={},n={}){this.attributes=t,this._crtControls=new Map,this.formApiModel=new W.FormGroup({}),this._destroy$=new d.Subject,this.events$=new d.Subject,this.dataSchemas={},this._businessRulesActivated$=new d.BehaviorSubject(!1);for(const o of Object.keys(t)){Object.defineProperty(this,o,{get:()=>Promise.resolve(this.attributes[o]),set:c=>this.attributes[o]=c,configurable:!0});const r=X.CI.create({name:o,value:this.attributes[o],propertiesConfig:[]});this._crtControls.set(o,r)}this.Resources={Strings:{}},Object.assign(this,n)}get PrimaryModelMode(){return g.ModelMode.Create}get IsChanged(){return Promise.resolve(!1)}get HasUnsavedData(){return Promise.resolve(!1)}get[Qe.wi](){return{}}isValid(){return Promise.resolve(!0)}deactivateBusinessRules(){}activateBusinessRules(){return(0,d.of)()}validate(){return Promise.resolve({})}init(t){return(0,d.of)()}setValue(t,n){return(0,d.of)()}set(t,n,o){return(0,d.of)()}setSorting(){return(0,d.of)(null)}create(t,n){return(0,d.of)(null)}executeRequest(t){return Promise.resolve()}loadLookupList(t,n,o){return null}load(...t){return(0,d.of)()}copy(t,n,o){return(0,d.of)()}loadDefaultValues(){return(0,d.of)()}save(t,n,o){return(0,d.of)()}delete(t,n,o){return(0,d.of)()}getAttributeControl(t){const n=this.attributes[t];return new W.FormControl(n)}getBoundDataSourceName(t){return""}getBoundDataSource(t){}getBoundDataSchema(t){}getViewModelAttributePath(t,n){return""}getViewModelAttributePaths(t,n){return null}destroy(){return this._destroy$.next(),this._destroy$.complete(),(0,d.of)(void 0)}getBoundDataSchemaByAttributePath(t){}getBoundDataSchemaAttributeByAttributePath(t){return null}getBoundDataSourceNameByAttributePath(t){return""}getPrimaryModelName(){return Promise.resolve("")}getPrimaryDataSchema(){return Promise.resolve(null)}getAttributeNameByViewItemName(t){return""}getControl(t){return this._crtControls.has(t)?this._crtControls.get(t):X.CI.create({name:t,value:null,propertiesConfig:[]})}getAttributePropertyValue(...t){let n,o;if(t.length===2)n=t[0],o=t[1];else if(t.length===1){const c=t[0].split(":");n=c[0],o=c[1]}else throw new Error("ArgumentException");return this.getControl(n)?.getPropertyValue(o)}setAttributePropertyValue(...t){let n,o,r;if(t.length===3)n=t[0],o=t[1],r=t[2];else if(t.length===2){const u=t[0].split(":");n=u[0],o=u[1],r=t[1]}else throw new Error("ArgumentException");const c=this.getControl(n);c&&c.setPropertyValue(o,r)}resetAttributePropertyValue(...t){let n,o;if(t.length===1)[n,o]=t[0].split(":");else if(t.length===2)n=t[0],o=t[1];else throw new Error("ArgumentException");this.getControl(n).getPropertyByName(o)?.resetValue()}getInvariabilityPropertyName(t){return null}setModelValues(t,n){return null}getIsDirty(t){return this.getControl(t).isDirty}getModelByName(t){return null}getModelMode(t){return null}getPrimaryModelMode(){return null}_getModelModeChanges(t){return null}_getPrimaryModelModeChanges(){return null}_hotSwap(t){return(0,d.of)(void 0)}get _injectionContext(){return{id:"id",inject:()=>null,addLazyModule:()=>null,connectHostLazyModules:()=>{},getLazyModules:()=>[],destroy:()=>{}}}markModelFor(t,n){return null}markPrimaryModelFor(t){return null}_onAsyncTaskStarted(t){}_onAsyncTaskFinished(t){}_getIsAffectedByBusinessRules(t){return Promise.resolve(!1)}}const Ze=s=>(t,n)=>t.value!==s.name?null:{"crt.ShouldNotHasName":{message:"crt.ShouldNotHasName Validation Error"}};class vt extends X._J{constructor(){super(...arguments),this.async=!1,this.i18nMessageKey=""}validate(t,n){return Ze(n)(t,n)}}var Et=l(93185),We=l(20442),Ye=l(20083);class Xe extends Ye.Z{format(t,n){return t}}var me=l(15766);class H{static{this.\u0275fac=function(n){return new(n||H)}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:H})}static{this.\u0275inj=e.\u0275\u0275defineInjector({imports:[me.g.forRoot({default:Xe})]})}}(function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(H,{imports:[me.g]})})();var ge=l(59888);class D extends ge.m{loadApplicationInfo(){return(0,d.of)({success:!0,applicationInfo:{serviceUrl:"ws://localhost/0/Nui/ViewModule.aspx.ashx",clientConnectionClassName:"Terrasoft.WebSocketChannel",sysValues:{maxEntitySchemaNameLength:100,coreVersion:"8.1.2.3"}}})}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=e.\u0275\u0275getInheritedFactory(D)))(o||D)}})()}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:D,factory:D.\u0275fac})}}const St={provide:ge.m,useClass:D};var qe=l(26594);const et={},bt={provide:qe.G,useValue:et};var tt=l(6438);const It={provide:tt.A,useValue:{sendMessage:()=>(0,d.of)(null),messageEvent$:new d.Subject}};var nt=l(60322);const q={id:(0,i.generateGuid)(),isSSP:!1,accessType:"General",photoId:null,contactId:(0,i.generateGuid)(),contactName:"Andrew Baker",accountId:(0,i.generateGuid)(),accountName:"Our company",timeZoneId:null,cultureInfo:{sysCultureId:(0,i.generateGuid)(),sysCultureName:"en-US",decimalSeparator:",",thousandSeparator:" ",dateTimeFormat:{dateSeparator:"/",firstDayOfWeek:0,shortDatePattern:"M/d/yyyy",shortTimePattern:"h:mm tt",amDesignator:"AM",pmDesignator:"PM"}},defCultureInfo:{sysCultureId:(0,i.generateGuid)(),sysCultureName:"en-US",decimalSeparator:",",thousandSeparator:" ",dateTimeFormat:{dateSeparator:"/",firstDayOfWeek:0,shortDatePattern:"M/d/yyyy",shortTimePattern:"h:mm tt",amDesignator:"AM",pmDesignator:"PM"}},timeZoneOffsetHours:2,sessionId:"session_id"},Ot={id:q.id,userInfo:q,success:!0},ot={provide:nt.oq,useValue:q};function Tt(s,t){let n=class{};n=__decorate([CrtModule(s)],n),t?bootstrapCrtModule(t,n,{moduleType:"remote"}):bootstrapCrtModule(n,{moduleType:"host",resolveDependency:o=>TestBed.inject(Injector).get(o)})}function Pt(s){return instantiate(s,t=>TestBed.inject(Injector).get(t))}var st=l(39820);const Dt={provide:st.x,useValue:{handleRequest:s=>s}};var at=l(22457);const xt={provide:at.D,useValue:{handleRequest:s=>s,handleRequests:s=>s}};var ee=l(86384),At=l(24089);function wt(s){let t=s.attributes??[];const n=s.primaryAttributeName,o=s.primaryDisplayAttributeName;return n&&(t.find(c=>c.name===n)||(t=[...t,{name:n,path:n,dataValueType:DataValueType.Guid}])),o&&(t.find(c=>c.name===o)||(t=[...t,{name:o,path:o,dataValueType:DataValueType.Text}])),s.attributes=t,new EntityDataSchemaBuilder().setDataSchemaConfig(s).build()}var rt=l(28930);class Nt extends rt.dY{constructor(t,n){super(t,null),this.dataSourceName=t,this._config=n,this.type="crt.FakeDataSource"}innerCanCreate(t){return(0,d.of)({result:!0,message:""})}innerCanDelete(t){return(0,d.of)({result:!0,message:""})}innerCanEdit(t){return(0,d.of)({result:!0,message:""})}innerDelete(t){return(0,d.of)({success:!0,rowsAffected:1,errorInfo:""})}innerGetLookupDataSchema(t){return(0,d.of)(null)}innerGetSchema(){return(0,d.of)(this._config?.dataSchema??null)}innerGetDefaultValues(){return(0,d.of)({Name:"TestName"})}innerInsert(t){return(0,d.of)({success:!0,rowsAffected:1,errorInfo:"",primaryAttributes:[]})}innerLoad(t,n,o){return(0,d.of)(this._config?.data??[])}innerSave(t,n){return(0,d.of)({success:!0,rowsAffected:1,errorInfo:""})}}var it=l(68678),Bt=l(80246),Ce=l(59910),Ft=l(99499);class z{static{this.\u0275fac=function(n){return new(n||z)}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:z})}static{this.\u0275inj=e.\u0275\u0275defineInjector({providers:[ot,(0,ee.Qo)(We.BusinessRulesEngine),{provide:it.Fj,useValue:null},{provide:i.SysSettingsService,useValue:{getByCodes:()=>(0,d.of)({values:{}})}},{provide:i.FeatureService,useValue:{getFeatureState:()=>(0,d.of)(!0)}},(0,ee.Qo)(g.EntitySchemaRepository),(0,ee.Qo)(g.FEATURE_VALUES,{},"useValue")],imports:[Ce.g,b.TranslateModule.forRoot()]})}}(function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(z,{imports:[Ce.g,b.TranslateModule]})})();function Rt(s,t){const n=createDataSchema({name:s,primaryAttributeName:t[0],primaryDisplayAttributeName:t[1],primaryColorAttributeName:t[2],attributes:t.map(o=>({name:o,caption:o})),dataSourceConfig:{type:DataSourceType.EntityDataSource,config:{entitySchemaName:s}}});return n.primaryColorAttributeName=t[2],n}function jt(s){return te.apply(this,arguments)}function te(){return te=_asyncToGenerator(function*(s){const t=Object.entries(s?.modelConfig?.dataSources??{}).map(([r,c])=>{const u=s?.dataSchemas?.find(y=>y.name===c.config.entitySchemaName),U=new FakeDataSource(r,{dataSchema:u,data:s?.data?.[r]});return new Model(null,U)}),n=TestBed.inject(ViewModelGenerator),o=yield firstValueFrom(n.generate({viewModelConfig:s.viewModelConfig,modelConfig:s.modelConfig,models:t}));return yield Promise.all(Object.keys(s.data??{}).map(r=>firstValueFrom(o.load(r,[])))),o}),te.apply(this,arguments)}var lt=l(10850),he=l(96283);const ct={"hu-HU":JSON.parse('{"MessageEditor":{"InputPlaceholder":"\xCDrjon be egy \xFCzenetet","SendButtonHint":"Send Message (Enter)","Caption":"Message editor"},"CopilotDisclaimer":{"AgreeButton":"Agree"},"ChatMessage":{"File":{"DownloadLink":"Download file"}}}'),"hr-HR":JSON.parse('{"MessageEditor":{"InputPlaceholder":"Napi\u0161i poruku","SendButtonHint":"Po\u0161alji poruku (Enter)","Caption":"Ure\u0111iva\u010D poruka"},"CopilotDisclaimer":{"AgreeButton":"Pristajem"},"ChatMessage":{"File":{"DownloadLink":"Download file"}}}'),"zh-CN":JSON.parse('{"MessageEditor":{"InputPlaceholder":"Type a message","SendButtonHint":"Send Message (Enter)","Caption":"Message editor"},"CopilotDisclaimer":{"AgreeButton":"Agree"},"ChatMessage":{"File":{"DownloadLink":"Download file"}}}'),"sq-AL":JSON.parse('{"MessageEditor":{"InputPlaceholder":"Shkruaj nj\xEB mesazh","SendButtonHint":"D\xEBrgo nj\xEB Mesazh (Enter)","Caption":"Message editor"},"CopilotDisclaimer":{"AgreeButton":"Agree"},"ChatMessage":{"File":{"DownloadLink":"Download file"}}}'),"en-GB":{},"bg-BG":JSON.parse('{"MessageEditor":{"InputPlaceholder":"\u0412\u044A\u0432\u0435\u0434\u0438 \u0441\u044A\u043E\u0431\u0449\u0435\u043D\u0438\u0435","SendButtonHint":"\u0418\u0437\u043F\u0440\u0430\u0442\u0438 \u0441\u044A\u043E\u0431\u0449\u0435\u043D\u0438\u0435 (Enter)","Caption":"\u0420\u0435\u0434\u0430\u043A\u0442\u043E\u0440 \u043D\u0430 \u0441\u044A\u043E\u0431\u0449\u0435\u043D\u0438\u044F"},"CopilotDisclaimer":{"AgreeButton":"\u0421\u044A\u0433\u043B\u0430\u0441\u0435\u043D"},"ChatMessage":{"File":{"DownloadLink":"\u0418\u0437\u0442\u0435\u0433\u043B\u0438 \u0444\u0430\u0439\u043B\u0430"}}}'),"zh-TW":JSON.parse('{"MessageEditor":{"InputPlaceholder":"\u8F38\u5165\u8A0A\u606F","SendButtonHint":"\u50B3\u9001\u8A0A\u606F (\u8F38\u5165)","Caption":"Message editor"},"CopilotDisclaimer":{"AgreeButton":"Agree"},"ChatMessage":{"File":{"DownloadLink":"Download file"}}}'),"no-NO":{},"ko-KR":JSON.parse('{"MessageEditor":{"InputPlaceholder":"\uBA54\uC2DC\uC9C0\uB97C \uC785\uB825\uD569\uB2C8\uB2E4","SendButtonHint":"Send Message (Enter)","Caption":"Message editor"},"CopilotDisclaimer":{"AgreeButton":"Agree"},"ChatMessage":{"File":{"DownloadLink":"Download file"}}}'),"ja-JP":JSON.parse('{"MessageEditor":{"InputPlaceholder":"\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u5165\u529B","SendButtonHint":"Send Message (Enter)","Caption":"Message editor"},"CopilotDisclaimer":{"AgreeButton":"Agree"},"ChatMessage":{"File":{"DownloadLink":"Download file"}}}'),"fr-CA":{},zh:{},"vi-VN":JSON.parse('{"MessageEditor":{"InputPlaceholder":"Type a message","SendButtonHint":"Send Message (Enter)","Caption":"Message editor"},"CopilotDisclaimer":{"AgreeButton":"Agree"},"ChatMessage":{"File":{"DownloadLink":"Download file"}}}'),"tr-TR":JSON.parse('{"MessageEditor":{"InputPlaceholder":"Bir mesaj yaz\u0131n","SendButtonHint":"Mesaj G\xF6nder (Enter)","Caption":"Mesaj edit\xF6r\xFC"},"CopilotDisclaimer":{"AgreeButton":"Kabul etmek"},"ChatMessage":{"File":{"DownloadLink":"Download file"}}}'),"th-TH":JSON.parse('{"MessageEditor":{"InputPlaceholder":"Type a message","SendButtonHint":"Send Message (Enter)","Caption":"Message editor"},"CopilotDisclaimer":{"AgreeButton":"Agree"},"ChatMessage":{"File":{"DownloadLink":"Download file"}}}'),"sv-SE":JSON.parse('{"MessageEditor":{"InputPlaceholder":"Type a message","SendButtonHint":"Send Message (Enter)","Caption":"Message editor"},"CopilotDisclaimer":{"AgreeButton":"Agree"},"ChatMessage":{"File":{"DownloadLink":"Download file"}}}'),"ro-RO":JSON.parse('{"MessageEditor":{"InputPlaceholder":"Scrie un mesaj","SendButtonHint":"Trimite mesaj (Enter)","Caption":"Editor mesaj"},"CopilotDisclaimer":{"AgreeButton":"Acord"},"ChatMessage":{"File":{"DownloadLink":"Descarc\u0103 fi\u0219ier"}}}'),"pt-PT":JSON.parse('{"MessageEditor":{"InputPlaceholder":"Escrever uma mensagem","SendButtonHint":"Send Message (Enter)","Caption":"Message editor"},"CopilotDisclaimer":{"AgreeButton":"Agree"},"ChatMessage":{"File":{"DownloadLink":"Download file"}}}'),"pt-BR":JSON.parse('{"MessageEditor":{"InputPlaceholder":"Escrever uma mensagem","SendButtonHint":"Enviar Mensagem (Enter)","Caption":"Editor de mensagens"},"CopilotDisclaimer":{"AgreeButton":"Concordar"},"ChatMessage":{"File":{"DownloadLink":"Baixar o arquivo"}}}'),"pl-PL":JSON.parse('{"MessageEditor":{"InputPlaceholder":"Wpisz wiadomo\u015B\u0107","SendButtonHint":"Wy\u015Blij wiadomo\u015B\u0107 (Enter)","Caption":"Edytor wiadomo\u015Bci"},"CopilotDisclaimer":{"AgreeButton":"Zgoda"},"ChatMessage":{"File":{"DownloadLink":"Pobierz plik"}}}'),no:{},"nl-NL":JSON.parse('{"MessageEditor":{"InputPlaceholder":"Type a message","SendButtonHint":"Send Message (Enter)","Caption":"Message editor"},"CopilotDisclaimer":{"AgreeButton":"Akkoord"},"ChatMessage":{"File":{"DownloadLink":"Download bestand"}}}'),"lv-LV":JSON.parse('{"MessageEditor":{"InputPlaceholder":"Ierakstiet zi\u0146u","SendButtonHint":"S\u016Bt\u012Bt zi\u0146u (Ievad\u012Bt)","Caption":"Zi\u0146ojumu redaktors"},"CopilotDisclaimer":{"AgreeButton":"Piekr\u012Btu"},"ChatMessage":{"File":{"DownloadLink":"Lejupiel\u0101d\u0113t failu"}}}'),"kk-KZ":{},"it-IT":JSON.parse('{"MessageEditor":{"InputPlaceholder":"Inserisci un messaggio","SendButtonHint":"Invia Messaggio (Invio)","Caption":"Editor messaggi"},"CopilotDisclaimer":{"AgreeButton":"Accetto"},"ChatMessage":{"File":{"DownloadLink":"Download file"}}}'),"id-ID":JSON.parse('{"MessageEditor":{"InputPlaceholder":"Ketik pesan","SendButtonHint":"Kirim Pesan (Enter)","Caption":"Message editor"},"CopilotDisclaimer":{"AgreeButton":"Agree"},"ChatMessage":{"File":{"DownloadLink":"Download file"}}}'),"he-IL":JSON.parse('{"MessageEditor":{"InputPlaceholder":"\u05D4\u05E7\u05DC\u05D3 \u05D4\u05D5\u05D3\u05E2\u05D4","SendButtonHint":"\u05E9\u05DC\u05D7 \u05D4\u05D5\u05D3\u05E2\u05D4 (Enter)","Caption":"\u05E2\u05D5\u05E8\u05DA \u05D4\u05D5\u05D3\u05E2\u05D5\u05EA"},"CopilotDisclaimer":{"AgreeButton":"\u05DE\u05E1\u05DB\u05D9\u05DD"},"ChatMessage":{"File":{"DownloadLink":"\u05D4\u05D5\u05E8\u05D3 \u05E7\u05D5\u05D1\u05E5"}}}'),"fr-FR":JSON.parse('{"MessageEditor":{"InputPlaceholder":"Tapez un message","SendButtonHint":"Envoyer un message (Entr\xE9e)","Caption":"\xC9diteur de message"},"CopilotDisclaimer":{"AgreeButton":"Accepter"},"ChatMessage":{"File":{"DownloadLink":"T\xE9l\xE9charger le fichier"}}}'),"fa-IR":{},"es-ES":JSON.parse('{"MessageEditor":{"InputPlaceholder":"Escribe un mensaje","SendButtonHint":"Enviar mensaje (Enter)","Caption":"Editor de mensajes"},"CopilotDisclaimer":{"AgreeButton":"De acuerdo"},"ChatMessage":{"File":{"DownloadLink":"Descargar archivo"}}}'),"de-DE":JSON.parse('{"MessageEditor":{"InputPlaceholder":"Nachricht eingeben","SendButtonHint":"Nachricht senden (Enter)","Caption":"Message editor"},"CopilotDisclaimer":{"AgreeButton":"Agree"},"ChatMessage":{"File":{"DownloadLink":"Download file"}}}'),"cs-CZ":JSON.parse('{"MessageEditor":{"InputPlaceholder":"Type a message","SendButtonHint":"Send Message (Enter)","Caption":"Message editor"},"CopilotDisclaimer":{"AgreeButton":"Agree"},"ChatMessage":{"File":{"DownloadLink":"Download file"}}}'),"ar-SA":JSON.parse('{"MessageEditor":{"InputPlaceholder":"\u0643\u062A\u0627\u0628\u0629 \u0631\u0633\u0627\u0644\u0629","SendButtonHint":"\u0623\u0631\u0633\u0644 \u0627\u0644\u0631\u0633\u0627\u0644\u0629 (\u0627\u0636\u063A\u0637 \u0632\u0631 Enter)","Caption":"Message editor"},"CopilotDisclaimer":{"AgreeButton":"Agree"},"ChatMessage":{"File":{"DownloadLink":"Download file"}}}'),"en-US":JSON.parse('{"MessageEditor":{"InputPlaceholder":"Type a message","SendButtonHint":"Send Message (Enter)","Caption":"Message editor"},"CopilotDisclaimer":{"AgreeButton":"Agree"},"ChatMessage":{"File":{"DownloadLink":"Download file"},"System":{"ChatStartedMessage":"Chat started: {chatStartedAt} by {chatStartedBy}"}},"Conversation":{"LoadPreviousChat":"Load previous chat"}}'),"ru-RU":JSON.parse('{"MessageEditor":{"InputPlaceholder":"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435","SendButtonHint":"\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435 (Enter)","Caption":"\u0420\u0435\u0434\u0430\u043A\u0442\u043E\u0440 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0439"},"CopilotDisclaimer":{"AgreeButton":"\u041F\u0440\u0438\u043D\u044F\u0442\u044C"},"ChatMessage":{"File":{"DownloadLink":"\u0421\u043A\u0430\u0447\u0430\u0442\u044C \u0444\u0430\u0439\u043B"},"System":{"ChatStartedMessage":"\u0427\u0430\u0442 \u043D\u0430\u0447\u0430\u0442: {chatStartedAt} \u043A\u043E\u043D\u0442\u0430\u043A\u0442\u043E\u043C {chatStartedBy}"}},"Conversation":{"LoadPreviousChat":"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u043F\u0440\u0435\u0434\u044B\u0434\u0443\u0449\u0438\u0439 \u0447\u0430\u0442"}}'),"uk-UA":JSON.parse('{"MessageEditor":{"InputPlaceholder":"\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u043F\u043E\u0432\u0456\u0434\u043E\u043C\u043B\u0435\u043D\u043D\u044F","SendButtonHint":"\u041D\u0430\u0434\u0456\u0441\u043B\u0430\u0442\u0438 \u043F\u043E\u0432\u0456\u0434\u043E\u043C\u043B\u0435\u043D\u043D\u044F (Enter)","Caption":"\u0420\u0435\u0434\u0430\u043A\u0442\u043E\u0440 \u043F\u043E\u0432\u0456\u0434\u043E\u043C\u043B\u0435\u043D\u044C"},"CopilotDisclaimer":{"AgreeButton":"\u041F\u043E\u0433\u043E\u0434\u0436\u0443\u044E\u0441\u044C"},"ChatMessage":{"File":{"DownloadLink":"\u0417\u0430\u0432\u0430\u043D\u0442\u0430\u0436\u0438\u0442\u0438 \u0444\u0430\u0439\u043B"}}}')},dt=["*"];let B=class le extends A.BaseContainerComponent{constructor(t){super(t),this._injector=t}static{this.\u0275fac=function(n){return new(n||le)(e.\u0275\u0275directiveInject(e.Injector))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:le,selectors:[["crt-chat"]],features:[e.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:dt,decls:2,vars:0,consts:[[1,"items"]],template:function(n,o){n&1&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275projection(1),e.\u0275\u0275elementEnd())},styles:["[_nghost-%COMP%]{display:block;height:100%}.items[_ngcontent-%COMP%]{height:100%;max-width:840px}"]})}};B=(0,a.__decorate)([(0,i.CrtViewElement)({type:"crt.Chat",contentSlots:["items"]}),(0,i.CrtInterfaceDesignerItem)({toolbarConfig:{requiredFeatures:{ShowDesignerDemoItems:!0},position:261,groupType:i.DesignerToolGroupType.Components,icon:l(15208),hint:"Components.Chat.Hint",defaultPropertyValues:{masterSchemaId:"$Id",items:[]},defaultLocalizableStrings:{caption:"Components.Chat.Caption",label:"Components.Chat.Caption"}},propertiesPanelComponentTypeName:"crt.ChatPropertiesPanel",viewElementGroupType:i.ViewElementGroupType.Components,typeCaption:"Components.Chat.Caption",designControlConfig:{allowDesignContent:!0},designViewItemCommands:{create:"crt.CreateChatCommand"}}),(0,a.__metadata)("design:paramtypes",[e.Injector])],B);var _e=l(22438);const pt=["toolbarItems"],ut=["inputs"],mt=s=>({"message-editor-body-button-focussed":s});function gt(s,t){s&1&&e.\u0275\u0275elementContainer(0)}function Ct(s,t){if(s&1&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,gt,1,0,"ng-container",8),e.\u0275\u0275elementEnd()),s&2){const n=t.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",n)}}function ht(s,t){if(s&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",6),e.\u0275\u0275template(2,Ct,2,1,"div",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),s&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.inputsTemplates)}}function _t(s,t){s&1&&e.\u0275\u0275elementContainer(0)}function yt(s,t){if(s&1&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,_t,1,0,"ng-container",8),e.\u0275\u0275elementEnd()),s&2){const n=t.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",n)}}function ft(s,t){if(s&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",9),e.\u0275\u0275template(2,yt,2,1,"div",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),s&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.toolbarItemsTemplates)}}let M=class $ extends T.CrtBaseComponent{constructor(){super(...arguments),this.sizeEnum=_e.SizeEnum,this.iconPositionEnum=_e.IconPositionEnum,this.sendMessage=new e.EventEmitter}set toolbarItems(t){this._toolbarItems=t}set inputs(t){this._inputs=t}onSendClicked(){this.isInputContentEmpty()||this.sendMessage.emit(this.chatInput)}isInputContentEmpty(){return(0,j.isEmpty)(this.chatInput)}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=e.\u0275\u0275getInheritedFactory($)))(o||$)}})()}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:$,selectors:[["crt-message-editor-body"]],contentQueries:function(n,o,r){if(n&1&&(e.\u0275\u0275contentQuery(r,pt,4,e.TemplateRef),e.\u0275\u0275contentQuery(r,ut,4,e.TemplateRef)),n&2){let c;e.\u0275\u0275queryRefresh(c=e.\u0275\u0275loadQuery())&&(o.toolbarItemsTemplates=c),e.\u0275\u0275queryRefresh(c=e.\u0275\u0275loadQuery())&&(o.inputsTemplates=c)}},inputs:{toolbarItems:"toolbarItems",inputs:"inputs",isFocused:"isFocused",chatInput:"chatInput"},outputs:{sendMessage:"sendMessage"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:8,vars:12,consts:[[1,"message-editor-body"],[4,"ngIf"],[1,"message-editor-body-toolbar"],[1,"message-editor-body-toolbar-dropzone"],[1,"message-editor-body-toolbar-send"],[3,"clicked","ngClass","iconPosition","iconSize","icon","disabled","title"],[1,"message-editor-input-container"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet"],[1,"message-editor-toolbar-container"]],template:function(n,o){n&1&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,ht,3,1,"ng-container",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3),e.\u0275\u0275template(4,ft,3,1,"ng-container",1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",4)(6,"crt-button",5),e.\u0275\u0275pipe(7,"translate"),e.\u0275\u0275listener("clicked",function(){return o.onSendClicked()}),e.\u0275\u0275elementEnd()()()()),n&2&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.inputsTemplates==null?null:o.inputsTemplates.length),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",o.toolbarItemsTemplates==null?null:o.toolbarItemsTemplates.length),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("title",e.\u0275\u0275pipeBind1(7,8,"MessageEditor.SendButtonHint")),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(10,mt,o.isFocused===!0))("iconPosition",o.iconPositionEnum.OnlyIcon)("iconSize",o.sizeEnum.Large)("icon","message-editor-send-icon")("disabled",o.isInputContentEmpty()))},dependencies:[C.NgClass,C.NgForOf,C.NgIf,C.NgTemplateOutlet,p.CrtButtonComponent,b.TranslatePipe],styles:["[_nghost-%COMP%]{position:relative;width:100%}[_nghost-%COMP%]   .message-editor-body[_ngcontent-%COMP%]   .message-editor-body-toolbar[_ngcontent-%COMP%]{display:flex;margin-top:-32px;padding:0 8px 3px 5px}[_nghost-%COMP%]   .message-editor-body[_ngcontent-%COMP%]   .message-editor-body-toolbar[_ngcontent-%COMP%]   .message-editor-body-toolbar-dropzone[_ngcontent-%COMP%]{flex-grow:1}[_nghost-%COMP%]   .message-editor-body[_ngcontent-%COMP%]   .message-editor-body-toolbar[_ngcontent-%COMP%]   .message-editor-body-toolbar-send[_ngcontent-%COMP%]{text-align:right}"]})}};(0,a.__decorate)([(0,i.CrtInput)(),(0,a.__metadata)("design:type",Array),(0,a.__metadata)("design:paramtypes",[Array])],M.prototype,"toolbarItems",null),(0,a.__decorate)([(0,i.CrtInput)(),(0,a.__metadata)("design:type",Array),(0,a.__metadata)("design:paramtypes",[Array])],M.prototype,"inputs",null),(0,a.__decorate)([(0,i.CrtOutput)(),(0,a.__metadata)("design:type",Object)],M.prototype,"sendMessage",void 0),(0,a.__decorate)([(0,i.CrtInput)(),(0,a.__metadata)("design:type",Boolean)],M.prototype,"isFocused",void 0),(0,a.__decorate)([(0,i.CrtInput)(),(0,a.__metadata)("design:type",String)],M.prototype,"chatInput",void 0),M=(0,a.__decorate)([(0,i.CrtViewElement)({type:"crt.MessageEditorBody",contentSlots:[{name:"inputs",lazy:!0,input:!0},{name:"toolbarItems",lazy:!0,input:!0}]})],M);class x{_getViewConfigs(t,n){return g.MetadataSchemaUtils.getViewConfigInfoByProperty("type",n,t).map(o=>o?.viewConfig).filter(Boolean)}_updateBindings(t,n){this._setChatInputAttribute(t,n),this._setSendMessageRequest(t),this._setBindingsMappingAttribure(t,n)}_setChatInputAttribute(t,n){if(!(0,j.isEmpty)(t.chatInput))return;const o=`ChatInput_${t.name}`;n[o]={value:null},t.chatInput=`$${o}`}_setSendMessageRequest(t){if(!(0,j.isEmpty)(t.sendMessage))return;const n=this._getBindingsMappingAttribureName(t);t.sendMessage={request:"crt.MessageEditorSendRequest",params:{attributesMapping:`$${n}`}}}_setBindingsMappingAttribure(t,n){const o=this._getBindingsMappingAttribureName(t),r=n[o]?.value||{};r.ChatInput=t.chatInput.split("$").pop(),n[o]={value:r},t.bindingsMappingAttribure=o}_getBindingsMappingAttribureName(t){return t.bindingsMappingAttribure||`BindingsMapping_${t.name}`}crtOnMetaDataInit(t){var n=this;return(0,N.A)(function*(){const o=t,r=n._getViewConfigs(o.viewConfig,"crt.MessageEditor"),c=o.viewModelConfig.attributes;for(const u of r)n._updateBindings(u,c);return Promise.resolve(t)})()}static{this.\u0275fac=function(n){return new(n||x)}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:x,factory:x.\u0275fac})}}let F=class ce{constructor(t){this._materialIconsRegistrator=t,this._materialIconsRegistrator.addIcons([{name:"message-editor-send-icon",icon:l(21888)},{name:"arrow-down-heavy",icon:l(73869)},{name:"empty-chat-contact-designer-skeleton-icon",icon:l(78517)}])}static{this.\u0275fac=function(n){return new(n||ce)(e.\u0275\u0275inject(h.MaterialIconsRegistrator))}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:ce})}static{this.\u0275inj=e.\u0275\u0275defineInjector({providers:[{provide:lt.CRT_METADATA_PREPROCESSOR,useClass:x,multi:!0}],imports:[Z.MatIconModule,C.CommonModule,p.CrtInputModule,h.CrtKeyboardHotkeysModule,p.CrtButtonModule,p.CrtLabelModule,V.CrtLibTranslateModule.forRoot({i18n:ct}),g.DateTimeFormattingModule,p.CrtImageInputModule,he.MarkdownModule.forRoot(),h.CrtLottieModule,p.CrtChatComponentsModule,h.CrtSkeletonLoaderModule]})}};F=(0,a.__decorate)([(0,i.CrtModule)({viewElements:[m,S,I,M,_,E,B],requestHandlers:[k,L]}),(0,a.__metadata)("design:paramtypes",[h.MaterialIconsRegistrator])],F),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(F,{declarations:[v,m,S,I,M,_,P,E,B,w],imports:[Z.MatIconModule,C.CommonModule,p.CrtInputModule,h.CrtKeyboardHotkeysModule,p.CrtButtonModule,p.CrtLabelModule,V.CrtLibTranslateModule,g.DateTimeFormattingModule,p.CrtImageInputModule,he.MarkdownModule,h.CrtLottieModule,p.CrtChatComponentsModule,h.CrtSkeletonLoaderModule],exports:[v,m,S,I,M,_,P,E,B]})}();const Mt=[{provide:T.JIT_MODULES,useValue:[F,p.CrtLabelModule,p.CrtButtonModule,A.CdkModule,p.CrtInputModule]},{provide:g.FEATURE_VALUES,useValue:{}},{provide:T.BINDING_CONTEXT,useValue:{viewModel$:(0,d.of)(new $e)}},{provide:g.CRT_NAVIGATION_LOCK_TOKEN,useValue:g.CrtNoopNavigationLock.instance},{provide:V.WINDOW_TOKEN,useFactory:()=>globalThis},ue.getProvider(),(0,e.importProvidersFrom)(p.CrtChatComponentsModule)];let ne=class extends i.BaseRequest{};ne=(0,a.__decorate)([(0,i.CrtRequest)({type:"crt.MessageEditorSendRequest"})],ne);let oe=class extends i.BaseRequest{};oe=(0,a.__decorate)([(0,i.CrtRequest)({type:"crt.ChatMessageActionRequest"})],oe);let se=class extends i.BaseRequest{constructor(){super(...arguments),this.loadMode=O.Replace}};se=(0,a.__decorate)([(0,i.CrtRequest)({type:"crt.LoadConversationRequest"})],se)},15208:f=>{f.exports=`<svg width="72" height="64" viewBox="0 0 72 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<g id="Components | Chat - 72x64 | bright">
<g id="Icon">
<rect x="16.5" y="7.5" width="39" height="49" rx="2.5" stroke="#70ACEE"/>
<g id="Frame 19809">
<rect id="Rectangle 45209" x="21" y="11" width="16" height="2" rx="1" fill="#7FC7F4"/>
<g id="Frame 19808">
<g id="Frame 19814">
<circle id="Ellipse 3260" cx="23" cy="17" r="2" fill="#D1D1D1"/>
<g id="Frame 17499">
<rect x="21" y="20" width="24" height="9" rx="2" fill="#D1D1D1"/>
<g id="Frame 19807">
<line id="Line 2314" x1="24" y1="23.5" x2="30" y2="23.5" stroke="white"/>
<line id="Line 2315" x1="24" y1="25.5" x2="42" y2="25.5" stroke="white"/>
</g>
</g>
</g>
<g id="Frame 19815">
<circle id="Ellipse 3260_2" cx="49" cy="30" r="2" fill="#80C8F5"/>
<g id="Frame 17500">
<rect x="27" y="33" width="24" height="9" rx="2" fill="#80C8F5"/>
<g id="Frame 19807_2">
<line id="Line 2314_2" x1="30" y1="36.5" x2="48" y2="36.5" stroke="white"/>
<line id="Line 2315_2" x1="44" y1="38.5" x2="48" y2="38.5" stroke="white"/>
</g>
</g>
</g>
<g id="Frame 19816">
<circle id="Ellipse 3260_3" cx="23" cy="43" r="2" fill="#D1D1D1"/>
<g id="Frame 17499_2">
<rect x="21" y="46" width="24" height="7" rx="2" fill="#D1D1D1"/>
<g id="Frame 19807_3">
<line id="Line 2314_3" x1="24" y1="49.5" x2="42" y2="49.5" stroke="white"/>
</g>
</g>
</g>
</g>
</g>
</g>
</g>
</svg>
`},70807:f=>{f.exports=`<svg width="72" height="64" viewBox="0 0 72 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M58 15H28C26.3431 15 25 16.3431 25 18C25 19.6569 26.3431 21 28 21H58C59.6569 21 61 19.6569 61 18C61 16.3431 59.6569 15 58 15Z" fill="#40ACF0"/>
<path d="M58 36H40C38.3431 36 37 37.3431 37 39C37 40.6569 38.3431 42 40 42H58C59.6569 42 61 40.6569 61 39C61 37.3431 59.6569 36 58 36Z" fill="#D1D1D1"/>
<path d="M58 26H40C38.3431 26 37 27.3431 37 29C37 30.6569 38.3431 32 40 32H58C59.6569 32 61 30.6569 61 29C61 27.3431 59.6569 26 58 26Z" fill="#D1D1D1"/>
<path d="M58 46H40C38.3431 46 37 47.3431 37 49C37 50.6569 38.3431 52 40 52H58C59.6569 52 61 50.6569 61 49C61 47.3431 59.6569 46 58 46Z" fill="#D1D1D1"/>
<circle cx="29" cy="39" r="4" fill="#004FD6"/>
<circle cx="29" cy="29" r="4" fill="#004FD6"/>
<circle cx="29" cy="49" r="4" fill="#004FD6"/>
<path d="M15 26C18.3137 26 21 23.3137 21 20C21 16.6863 18.3137 14 15 14C11.6863 14 9 16.6863 9 20C9 23.3137 11.6863 26 15 26Z" stroke="#FF4013" stroke-width="2" stroke-miterlimit="10"/>
<path d="M15 17.1152V20.3722L16.682 22.3302" stroke="#FF4013" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round"/>
</svg>
`},78517:f=>{f.exports='<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><path d="M42.2,39.7l-8.1-3.6-.5-1.6c-.2-.6-.4-1.1-.9-1.2a.68.68,0,0,1-.4-.6L32,29.5a.91.91,0,0,1,.3-.7,6.1,6.1,0,0,0,1.5-3.6c.1-.7.5-1.3.6-2l.7-3.8a.85.85,0,0,0-.5-1.1c-.2,0-.3-.3-.3-.7a44.6,44.6,0,0,0,.5-6.7c-.3-2.3-2.1-7-6.9-6.7C15.2.4,16.2,6.6,11.8,8.5a2.6,2.6,0,0,0,2.8.5c-.2.2-1.8.3-2.5,3.3a3.76,3.76,0,0,1,2-1.5c-1.5.8-.1,5.7-.1,6.2v.6a.78.78,0,0,1-.3.7c-.6.3-.6.6-.6,1.1l.7,3.8a7.62,7.62,0,0,1,.6,2,7.7,7.7,0,0,0,1.5,3.6.91.91,0,0,1,.3.7l-.3,3.2a.82.82,0,0,1-.4.6c-.5.1-.8.7-.9,1.2l-.5,1.6L5.9,39.7A24.11,24.11,0,0,0,24,47.9,23.83,23.83,0,0,0,42.2,39.7Z" fill="#cacaca"/><g opacity="0.05"><path d="M24,2A22,22,0,1,1,2,24,22,22,0,0,1,24,2m0-2A24,24,0,1,0,48,24,24,24,0,0,0,24,0Z" fill="#181818"/></g></svg>'},21888:f=>{f.exports=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M13.5538 7.23804L4.32784 2.12044C4.17412 2.03159 3.99711 1.99031 3.81954 2.00192C3.64197 2.01352 3.47196 2.07747 3.33133 2.18556C3.18772 2.29787 3.08345 2.45217 3.03332 2.62654C2.98319 2.80092 2.98976 2.98652 3.05209 3.15698L4.59066 7.41713C4.60623 7.4596 4.63447 7.49638 4.67164 7.52255C4.70881 7.54873 4.75313 7.56306 4.79872 7.56365H8.75192C8.86558 7.56187 8.9757 7.60289 9.06004 7.67843C9.14438 7.75397 9.19668 7.85841 9.20637 7.97067C9.21011 8.02993 9.20155 8.08932 9.18122 8.14516C9.16089 8.20101 9.12922 8.25213 9.08817 8.29536C9.04712 8.3386 8.99755 8.37303 8.94254 8.39652C8.88753 8.42002 8.82824 8.43208 8.76834 8.43196H4.79872C4.75313 8.43256 4.70881 8.44689 4.67164 8.47307C4.63447 8.49924 4.60623 8.53601 4.59066 8.57849L3.05209 12.8386C3.00593 12.9699 2.99202 13.1101 3.01151 13.2478C3.03101 13.3854 3.08336 13.5165 3.16421 13.63C3.24505 13.7436 3.35206 13.8364 3.47636 13.9007C3.60065 13.9651 3.73864 13.9991 3.87887 14C4.02808 13.9993 4.17481 13.962 4.30594 13.8915L13.5538 8.75758C13.6893 8.68132 13.8019 8.57083 13.8803 8.43737C13.9587 8.30391 14 8.15224 14 7.99781C14 7.84338 13.9587 7.69171 13.8803 7.55825C13.8019 7.42479 13.6893 7.3143 13.5538 7.23804Z" fill="currentColor"/>
</svg>
`},73869:f=>{f.exports=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path id="Vector" fill-rule="evenodd" clip-rule="evenodd" d="M8.58802 13.7571C8.43705 13.9072 8.22896 14 7.99921 14C7.75841 14 7.54141 13.8981 7.38902 13.735L3.25662 9.7663C2.92401 9.44687 2.91333 8.91829 3.23276 8.58568C3.55219 8.25307 4.08078 8.24239 4.41339 8.56182L7.16421 11.2037L7.16421 2.835C7.16421 2.37384 7.53805 2 7.99921 2C8.46037 2 8.83421 2.37384 8.83421 2.835L8.83421 11.2052L11.5866 8.56182C11.9192 8.24239 12.4478 8.25307 12.7672 8.58568C13.0867 8.91829 13.076 9.44687 12.7434 9.7663L8.58802 13.7571Z" fill="currentColor"/>
</svg>
`}}]);
